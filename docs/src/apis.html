<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-09-22">

<title>Urban analytics and city science - APIs and urban data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Urban analytics and city science</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">Unit description</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lectures" role="button" data-bs-toggle="dropdown" aria-expanded="false">Lectures</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lectures">    
        <li>
    <a class="dropdown-item" href="../src/smart_cities.html">
 <span class="dropdown-text">Smart cities, urban big data, digital twins and other buzz terms</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../src/why_cities.html">
 <span class="dropdown-text">Cities, a very very brief introduction</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-practicals" role="button" data-bs-toggle="dropdown" aria-expanded="false">Practicals</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-practicals">    
        <li>
    <a class="dropdown-item" href="../src/apis.html">
 <span class="dropdown-text">APIs and urban data</span></a>
  </li>  
    </ul>
  </li>
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#aims-of-the-practical" id="toc-aims-of-the-practical" class="nav-link active" data-scroll-target="#aims-of-the-practical">Aims of the practical</a></li>
  <li><a href="#apis" id="toc-apis" class="nav-link" data-scroll-target="#apis">APIs</a></li>
  <li><a href="#json-file-format" id="toc-json-file-format" class="nav-link" data-scroll-target="#json-file-format">JSON file format</a></li>
  <li><a href="#practical-example-with-api" id="toc-practical-example-with-api" class="nav-link" data-scroll-target="#practical-example-with-api">Practical example with API</a></li>
  <li><a href="#accessing-apis-using-existing-r-packages" id="toc-accessing-apis-using-existing-r-packages" class="nav-link" data-scroll-target="#accessing-apis-using-existing-r-packages">Accessing APIs using existing <code>R</code> packages</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">APIs and urban data</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 22, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="aims-of-the-practical" class="level2">
<h2 class="anchored" data-anchor-id="aims-of-the-practical">Aims of the practical</h2>
<ul>
<li><p>Understand the technicalities and the breadth of the urban data landscape</p></li>
<li><p>Understand the <em>messiness</em> of real world (urban) data</p></li>
<li><p>Access programmatically urban data and understand the benefits of such data access practise.</p></li>
</ul>
</section>
<section id="apis" class="level2">
<h2 class="anchored" data-anchor-id="apis">APIs</h2>
<p>Application Programming Interface (APIs) represent a ‘gate’ or otherwise a platform that enables a client (that is you) to interact with a server (for example <a href="https://opendata.bristol.gov.uk/pages/homepage/">opendata.bristol.gov.uk</a>. According to <span class="citation" data-cites="amazonWhatAPI">AWS (<a href="#ref-amazonWhatAPI" role="doc-biblioref">2022</a>)</span>:</p>
<blockquote class="blockquote">
<p>In the context of APIs, the word Application refers to any software with a distinct function. Interface can be thought of as a contract of service between two applications. This contract defines how the two communicate with each other using requests and responses. Their API documentation contains information on how developers are to structure those requests and responses.</p>
</blockquote>
<p>The client’s software (this might be R for example) sends a request to the server requesting specific data. The response is the data the client asked.</p>
<p>More commonly, the client might be a mobile phone app (e.g.&nbsp;train network status app) and the server is the network operator’s server.</p>
<p>APIs can be private or public types. For more inthe description from <span class="citation" data-cites="amazonWhatAPI">AWS (<a href="#ref-amazonWhatAPI" role="doc-biblioref">2022</a>)</span> <a href="https://aws.amazon.com/what-is/api/#:~:text=API%20stands%20for%20Application%20Programming,other%20using%20requests%20and%20responses.">here</a></p>
</section>
<section id="json-file-format" class="level2">
<h2 class="anchored" data-anchor-id="json-file-format">JSON file format</h2>
<p>Although some urban data can be downloaded as a tidy^ [Every column is a variable; every row is an observation; every cell is a single value. See [here])(https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html) for more info] table in a <code>.csv</code> format, most APIs will ship data to you in a <code>JSON</code> format.</p>
<p>According to the official JSON website <span class="citation" data-cites="jsonJSON">(<a href="#ref-jsonJSON" role="doc-biblioref">JSON</a>)</span>, JSON</p>
<blockquote class="blockquote">
<p>is a lightweight data-interchange format. It is easy for humans to read and write. It is easy for machines to parse and generate. It is based on a subset of the JavaScript Programming Language Standard ECMA-262 3rd Edition - December 1999. JSON is a text format that is completely language independent but uses conventions that are familiar to programmers of the C-family of languages, including C, C++, C#, Java, JavaScript, Perl, Python, and many others. These properties make JSON an ideal data-interchange language.</p>
</blockquote>
<p>It adopts a hierarchical structure such as <code>attribute:value</code> instead of the fixed structure of tidy data. Following <span class="citation" data-cites="singleton2017urban">Singleton, Spielman, and Folch (<a href="#ref-singleton2017urban" role="doc-biblioref">2017</a>)</span>, such <code>attribute:value</code> pairs might be:</p>
<ul>
<li><p>“mean income”:“50000”</p></li>
<li><p>“internet speed”:“35”</p></li>
<li><p>“jobs”:“15000”</p></li>
</ul>
<p>These attributes might be organised hierarchically:</p>
<p>(“city”:“Bristol,”mean income”: “27000”, “internet speed”: “55”, “jobs”:(“2019”:“15000”, “2020”:“14000”)), (“city”:“Newcastle,”mean income”: “25000”, “internet speed”: “45”, “jobs”:(“2019”:“11000”, “2020”:“10000”))</p>
<p>Although this format is more verbose (attribute names are repeated) it is more flexible (not all observations need to have all attributes) <span class="citation" data-cites="singleton2017urban">(<a href="#ref-singleton2017urban" role="doc-biblioref">Singleton, Spielman, and Folch 2017</a>)</span></p>
</section>
<section id="practical-example-with-api" class="level2">
<h2 class="anchored" data-anchor-id="practical-example-with-api">Practical example with API</h2>
<p><a href="https://opendata.bristol.gov.uk/pages/homepage/">opendata.bristol.gov.uk</a> offers a lot of data about Bristol. For this example, let’s try to work with <a href="https://opendata.bristol.gov.uk/explore/dataset/jobs-by-ward-by-industry-in-bristol-2020/information/?disjunctive.ward">Jobs by Ward (by industry) in Bristol 2020</a>. As you can see, this is a small data set with <span class="math inline">\(35\)</span> observations representing Bristol’s <span class="math inline">\(35\)</span> Wards. You can visualise these data with the <code>Table</code> tab and even download a <code>.csv</code> with these data. To begin with, do both of these things.</p>
<p>Then, go to the <code>API</code> tab. Change the <code>rows</code> you want to include in you API request from 10, which is the default here to 35, which is the maximum as we already know. Then clink on the <code>Submit</code> button and below that you will see a new link. This URL is your API request. If you carefully read the URL from right to left you can easily recognise the fields you saw on the previous screen. The <em>weird</em> output on your screen is the data you requested in <code>JSON</code> format.</p>
<div class="cell" type="alert alert-warning">
<div class="alert alert-warning">
<p>
<strong>Question</strong>: Why should you go through all these efforts to build an API request and download the data in <code>JSON</code> file format instead of just downloading a <code>.csv</code> file?
</p>
</div>
</div>
<p>So, let’s try to access these data programmatically. First, we need to load the relevant <code>R</code> packages</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>-- Attaching packages --------------------------------------- tidyverse 1.3.2 --
v ggplot2 3.3.6     v purrr   0.3.4
v tibble  3.1.8     v dplyr   1.0.9
v tidyr   1.2.0     v stringr 1.4.0
v readr   2.1.2     v forcats 0.5.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tibble' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>-- Conflicts ------------------------------------------ tidyverse_conflicts() --
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'jsonlite' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'jsonlite'

The following object is masked from 'package:purrr':

    flatten</code></pre>
</div>
</div>
<p>To access the data, we are going to use the function <code>fromJSON()</code> from the <code>jsonlite</code> package. Please check the syntax of this function as well as the other function of this package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="st">"https://opendata.bristol.gov.uk/api/records/1.0/search/?dataset=jobs-by-ward-by-industry-in-bristol-2020&amp;q=&amp;rows=35&amp;facet=ward"</span>, <span class="at">flatten =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We now have an <code>R</code> object called <code>dat</code>. Let’s try to see how it looks like</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
<p>So, this is a list. If you need a reminder for what a list is, see <a href="http://adv-r.had.co.nz/Data-structures.html">here</a>. Now the difficult part. Let’s try to figure out the structure of this <code>JSON</code> formated data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 4
 $ nhits       : int 35
 $ parameters  :List of 6
  ..$ dataset : chr "jobs-by-ward-by-industry-in-bristol-2020"
  ..$ rows    : int 35
  ..$ start   : int 0
  ..$ facet   : chr "ward"
  ..$ format  : chr "json"
  ..$ timezone: chr "UTC"
 $ records     :'data.frame':   35 obs. of  24 variables:
  ..$ datasetid                                          : chr [1:35] "jobs-by-ward-by-industry-in-bristol-2020" "jobs-by-ward-by-industry-in-bristol-2020" "jobs-by-ward-by-industry-in-bristol-2020" "jobs-by-ward-by-industry-in-bristol-2020" ...
  ..$ recordid                                           : chr [1:35] "8f1ee37587a2233922bfa38b048879368059502e" "464799297e1d1af8bb980450d062c7eedb787042" "4cf81b7e8c57fc61c73eb40c4d4556446d20896c" "e034ff06e7c7d67f6f716c41e8ccd940a36d41fd" ...
  ..$ record_timestamp                                   : chr [1:35] "2021-12-22T11:29:00.712Z" "2021-12-22T11:29:00.712Z" "2021-12-22T11:29:00.712Z" "2021-12-22T11:29:00.712Z" ...
  ..$ fields.mining_quarrying_utilities                  : int [1:35] 10 0 0 0 0 10 0 30 2250 0 ...
  ..$ fields.transport_storage_inc_postal                : int [1:35] 20 0 350 15 200 50 100 600 1750 300 ...
  ..$ fields.accommodation_food_services                 : int [1:35] 100 150 175 800 700 175 400 400 6000 300 ...
  ..$ fields.public_administration_defence               : int [1:35] 0 0 0 10 50 0 0 400 9000 200 ...
  ..$ fields.agriculture_forestry_fishing                : int [1:35] 0 0 0 0 0 0 0 0 0 0 ...
  ..$ fields.business_administration_support_services    : int [1:35] 125 75 1250 1750 450 225 500 450 11000 125 ...
  ..$ fields.retail                                      : int [1:35] 700 100 200 700 900 75 800 1500 4500 500 ...
  ..$ fields.property                                    : int [1:35] 10 15 20 450 175 75 200 30 1750 30 ...
  ..$ fields.health                                      : int [1:35] 150 125 125 450 500 500 2000 900 12000 1500 ...
  ..$ fields.motor_trades                                : int [1:35] 125 30 300 30 350 20 40 600 200 40 ...
  ..$ fields.manufacturing                               : int [1:35] 150 25 900 25 400 5 75 500 500 50 ...
  ..$ fields.information_communication                   : int [1:35] 225 200 400 800 350 175 450 700 10000 50 ...
  ..$ fields.education                                   : int [1:35] 350 250 400 200 350 175 1000 500 9000 800 ...
  ..$ fields.ward_code                                   : chr [1:35] "E05010889" "E05010918" "E05010890" "E05010894" ...
  ..$ fields.financial_insurance                         : int [1:35] 1500 10 10 600 50 10 75 15 8000 35 ...
  ..$ fields.ward                                        : chr [1:35] "Bishopsworth" "Windmill Hill" "Brislington East" "Clifton Down" ...
  ..$ fields.period                                      : chr [1:35] "2020" "2020" "2020" "2020" ...
  ..$ fields.professional_scientific_technical           : int [1:35] 75 125 200 1000 600 250 800 600 22000 125 ...
  ..$ fields.construction                                : int [1:35] 500 125 500 300 400 100 350 175 1250 125 ...
  ..$ fields.arts_entertainment_recreation_other_services: int [1:35] 150 75 75 350 500 35 250 125 1750 100 ...
  ..$ fields.wholesale                                   : int [1:35] 100 20 450 35 400 15 50 150 900 20 ...
 $ facet_groups:'data.frame':   1 obs. of  2 variables:
  ..$ name  : chr "ward"
  ..$ facets:List of 1
  .. ..$ :'data.frame': 35 obs. of  4 variables:
  .. .. ..$ name : chr [1:35] "Ashley" "Avonmouth and Lawrence Weston" "Bedminster" "Bishopston and Ashley Down" ...
  .. .. ..$ count: int [1:35] 1 1 1 1 1 1 1 1 1 1 ...
  .. .. ..$ state: chr [1:35] "displayed" "displayed" "displayed" "displayed" ...
  .. .. ..$ path : chr [1:35] "Ashley" "Avonmouth and Lawrence Weston" "Bedminster" "Bishopston and Ashley Down" ...</code></pre>
</div>
</div>
<p>Well, it’s complicated. Looking on the above output of <code>list()</code> the object that looks most useful to us is the <code>dat$records</code>.</p>
<div class="cell" type="alert alert-warning">
<div class="alert alert-warning">
<p>
<strong>Question</strong>: Based on the output of <code>list()</code>, why do you think is <code>dat$records</code> the most useful part of <code>dat</code> for us?
</p>
</div>
</div>
<p>And if you want to see how the dataframe <code>dat$records</code> looks like, the below function will show the first five rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat<span class="sc">$</span>records)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                 datasetid
1 jobs-by-ward-by-industry-in-bristol-2020
2 jobs-by-ward-by-industry-in-bristol-2020
3 jobs-by-ward-by-industry-in-bristol-2020
4 jobs-by-ward-by-industry-in-bristol-2020
5 jobs-by-ward-by-industry-in-bristol-2020
6 jobs-by-ward-by-industry-in-bristol-2020
                                  recordid         record_timestamp
1 8f1ee37587a2233922bfa38b048879368059502e 2021-12-22T11:29:00.712Z
2 464799297e1d1af8bb980450d062c7eedb787042 2021-12-22T11:29:00.712Z
3 4cf81b7e8c57fc61c73eb40c4d4556446d20896c 2021-12-22T11:29:00.712Z
4 e034ff06e7c7d67f6f716c41e8ccd940a36d41fd 2021-12-22T11:29:00.712Z
5 88ce4a95ea29ef24f38ecd46b3a7e021d325991c 2021-12-22T11:29:00.712Z
6 0576d71991a12a6102330e89a595d26fcc92fd32 2021-12-22T11:29:00.712Z
  fields.mining_quarrying_utilities fields.transport_storage_inc_postal
1                                10                                  20
2                                 0                                   0
3                                 0                                 350
4                                 0                                  15
5                                 0                                 200
6                                10                                  50
  fields.accommodation_food_services fields.public_administration_defence
1                                100                                    0
2                                150                                    0
3                                175                                    0
4                                800                                   10
5                                700                                   50
6                                175                                    0
  fields.agriculture_forestry_fishing
1                                   0
2                                   0
3                                   0
4                                   0
5                                   0
6                                   0
  fields.business_administration_support_services fields.retail fields.property
1                                             125           700              10
2                                              75           100              15
3                                            1250           200              20
4                                            1750           700             450
5                                             450           900             175
6                                             225            75              75
  fields.health fields.motor_trades fields.manufacturing
1           150                 125                  150
2           125                  30                   25
3           125                 300                  900
4           450                  30                   25
5           500                 350                  400
6           500                  20                    5
  fields.information_communication fields.education fields.ward_code
1                              225              350        E05010889
2                              200              250        E05010918
3                              400              400        E05010890
4                              800              200        E05010894
5                              350              350        E05010914
6                              175              175        E05010916
  fields.financial_insurance      fields.ward fields.period
1                       1500     Bishopsworth          2020
2                         10    Windmill Hill          2020
3                         10 Brislington East          2020
4                        600     Clifton Down          2020
5                         50       Southville          2020
6                         10     Stoke Bishop          2020
  fields.professional_scientific_technical fields.construction
1                                       75                 500
2                                      125                 125
3                                      200                 500
4                                     1000                 300
5                                      600                 400
6                                      250                 100
  fields.arts_entertainment_recreation_other_services fields.wholesale
1                                                 150              100
2                                                  75               20
3                                                  75              450
4                                                 350               35
5                                                 500              400
6                                                  35               15</code></pre>
</div>
</div>
<p>Looking into the above, I can think of the the following necessary data cleaning and wrangling steps:</p>
<ol type="1">
<li><p>remove the first three columns as they don’t include any useful data</p></li>
<li><p>remove the string “fields.” from the column names</p></li>
<li><p>although not necessary, it is common practice for the first columns to contain identification data such as the ward names and codes.</p></li>
</ol>
<p>To do all the above, we will use the below functions from the <code>dplyr</code> package, which is part of the <a href="https://www.tidyverse.org/"><code>tidyverse</code> ecosystem</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat<span class="sc">$</span>records <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>datasetid, <span class="sc">-</span>recordid, <span class="sc">-</span>record_timestamp) <span class="sc">%&gt;%</span> <span class="co"># remove useless columns</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">sub</span>(<span class="st">"fields."</span>, <span class="st">""</span>, .)) <span class="sc">%&gt;%</span>              <span class="co"># ~ introduces a formula here</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(ward, ward_code, period) <span class="sc">%&gt;%</span>                <span class="co"># looks better</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()                                            <span class="co"># a glimpse of the output</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 35
Columns: 21
$ ward                                         &lt;chr&gt; "Bishopsworth", "Windmill~
$ ward_code                                    &lt;chr&gt; "E05010889", "E05010918",~
$ period                                       &lt;chr&gt; "2020", "2020", "2020", "~
$ mining_quarrying_utilities                   &lt;int&gt; 10, 0, 0, 0, 0, 10, 0, 30~
$ transport_storage_inc_postal                 &lt;int&gt; 20, 0, 350, 15, 200, 50, ~
$ accommodation_food_services                  &lt;int&gt; 100, 150, 175, 800, 700, ~
$ public_administration_defence                &lt;int&gt; 0, 0, 0, 10, 50, 0, 0, 40~
$ agriculture_forestry_fishing                 &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0~
$ business_administration_support_services     &lt;int&gt; 125, 75, 1250, 1750, 450,~
$ retail                                       &lt;int&gt; 700, 100, 200, 700, 900, ~
$ property                                     &lt;int&gt; 10, 15, 20, 450, 175, 75,~
$ health                                       &lt;int&gt; 150, 125, 125, 450, 500, ~
$ motor_trades                                 &lt;int&gt; 125, 30, 300, 30, 350, 20~
$ manufacturing                                &lt;int&gt; 150, 25, 900, 25, 400, 5,~
$ information_communication                    &lt;int&gt; 225, 200, 400, 800, 350, ~
$ education                                    &lt;int&gt; 350, 250, 400, 200, 350, ~
$ financial_insurance                          &lt;int&gt; 1500, 10, 10, 600, 50, 10~
$ professional_scientific_technical            &lt;int&gt; 75, 125, 200, 1000, 600, ~
$ construction                                 &lt;int&gt; 500, 125, 500, 300, 400, ~
$ arts_entertainment_recreation_other_services &lt;int&gt; 150, 75, 75, 350, 500, 35~
$ wholesale                                    &lt;int&gt; 100, 20, 450, 35, 400, 15~</code></pre>
</div>
</div>
<p>Let’s try now to do some analysis based on these data and create some outputs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">21</span>))),           <span class="co"># total jobs in a ward</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>               <span class="fu">across</span>(<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">21</span>),                             <span class="co"># select the columns you are interested in</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">.names =</span> <span class="st">"{col}_share"</span>) <span class="sc">/</span> total) <span class="sc">%&gt;%</span> <span class="co"># divide these columns by total to create industry share within ward  </span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                                                           <span class="co"># and name the new columns as oldname_share</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">23</span><span class="sc">:</span><span class="dv">40</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">!</span><span class="fu">c</span>(ward, ward_code),                        <span class="co"># These are the columns I am 'pivoting'</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"industry"</span>,                      <span class="co"># This is how I will name the column with all the industries ...</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"jobs_share"</span>) <span class="sc">%&gt;%</span>               <span class="co"># ... and the column with the jobs percentage</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                                                           <span class="co"># Look https://tidyr.tidyverse.org/articles/pivot.html to </span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>                                                           <span class="co"># understand the long to wide / wide to long transformations.</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group_by(ward) %&gt;% </span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># summarise(total = sum(jobs_share))</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ward <span class="sc">==</span> <span class="st">"Central"</span>) <span class="sc">%&gt;%</span>                            <span class="co"># Let's focus on Central Bristol</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>industry, <span class="at">y=</span>jobs_share)) <span class="sc">+</span>                  <span class="co"># ... and create a bar chart for it jobs distribution</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="co"># to understand the "identity part go on the Details section of the geom_bar documentation:</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.rdocumentation.org/packages/ggplot2/versions/1.0.1/topics/geom_bar</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">90</span>)) <span class="sc">+</span>     <span class="co"># This line rotates the x labels,</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"jobs %"</span>)                                         <span class="co"># and here we rename the y axis. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="apis_files/figure-html/analysis-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now, let’s do something slightly more interesting. Let’s create two plots to compare the job distribution between two Bristol wards.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">21</span>))),           <span class="co"># total jobs in a ward</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>               <span class="fu">across</span>(<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">21</span>),                             <span class="co"># select the columns you are interested in</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">.names =</span> <span class="st">"{col}_share"</span>) <span class="sc">/</span> total) <span class="sc">%&gt;%</span> <span class="co"># divide these columns by total to create industry share within ward  </span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                                                           <span class="co"># and name the new columns as oldname_share</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">23</span><span class="sc">:</span><span class="dv">40</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">!</span><span class="fu">c</span>(ward, ward_code),                        <span class="co"># These are the columns I am 'pivoting'</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"industry"</span>,                      <span class="co"># This is how I will name the column with all the industries ...</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"jobs_share"</span>) <span class="sc">%&gt;%</span>               <span class="co"># ... and the column with the jobs percentage</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                                                           <span class="co"># Look https://tidyr.tidyverse.org/articles/pivot.html to </span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                                                           <span class="co"># understand the long to wide / wide to long transformations.</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group_by(ward) %&gt;% </span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># summarise(total = sum(jobs_share))</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ward <span class="sc">==</span> <span class="st">"Central"</span> <span class="sc">|</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>         ward <span class="sc">==</span> <span class="st">"Easton"</span>) <span class="sc">%&gt;%</span>                             <span class="co"># Let's focus on Easton and Central Bristol</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>industry, <span class="at">y=</span>jobs_share)) <span class="sc">+</span>                  <span class="co"># ... and create a bar chart for it jobs distribution</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">90</span>)) <span class="sc">+</span>     <span class="co"># This line rotates the x labels,</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"jobs %"</span>)                                         <span class="co"># and here we rename the y axis. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="apis_files/figure-html/comparison-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>ward, <span class="at">ncol =</span> <span class="dv">2</span>)                            <span class="co"># facet_wrap creates two graphs based on `ward` </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;ggproto object: Class FacetWrap, Facet, gg&gt;
    compute_layout: function
    draw_back: function
    draw_front: function
    draw_labels: function
    draw_panels: function
    finish_data: function
    init_scales: function
    map_data: function
    params: list
    setup_data: function
    setup_params: function
    shrink: TRUE
    train_scales: function
    vars: function
    super:  &lt;ggproto object: Class FacetWrap, Facet, gg&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>                                                           <span class="co"># and puts one next to each other</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Well done! You’ve just utilised Bristol’s open data and are part of the urban open data revolution.</p>
<p>Obviously the <code>x</code> labels are rather ugly.</p>
<div class="cell" type="alert alert-warning">
<div class="alert alert-warning">
<p>
<strong>Task:</strong> using and tweaking the code provided here, can you rename these labels?
</p>
</div>
</div>
<div class="cell" type="alert alert-warning">
<div class="alert alert-warning">
<p>
<strong>Next task:</strong> Search for some other interesting data from <a href="https://opendata.bristol.gov.uk/pages/homepage/">opendata.bristol.gov.uk</a>, access it programmatically, do the necessary data wrangling and produce some graphs in a new <code>.Rmd</code> document. Make sure to knit it as <code>.html</code>.
</p>
<p>
If this is to easy for you, why don’t you check the new <a href="https://quarto.org/docs/guide/">Quarto format</a>.
</p>
</div>
</div>
</section>
<section id="accessing-apis-using-existing-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="accessing-apis-using-existing-r-packages">Accessing APIs using existing <code>R</code> packages</h2>
<p>Now you might be lucky and somebody else has already done all the infrastructural / backend work in order for you to easily interrogate an API and access their data. How would this look like? Like another <code>R</code> package. Here is a list with a few examples:</p>
<ul>
<li><p><code>nomisr</code> is a package that allows you to access <a href="https://www.nomisweb.co.uk/">Nomis</a> data with <code>R</code>. Find <a href="https://cran.r-project.org/web/packages/nomisr/vignettes/introduction.html">here</a> an introduction.</p></li>
<li><p><code>tidysencus</code> is part of the <code>tidyverse</code> ecosystem and offers access to the US Census. This is the <a href="https://walker-data.com/tidycensus/">link</a>. Pay extra attention to the <em>spatial data</em> option.</p></li>
<li><p>The city of Toronto offers an <code>R</code> <a href="https://sharlagelfand.github.io/opendatatoronto/">package</a> to access <a href="https://open.toronto.ca/">City of Toronto Open Data Portal</a>.</p></li>
<li><p>See a relevant book by <span class="citation" data-cites="apis">Bauer, Landesvatter, and Behrens (<a href="#ref-apis" role="doc-biblioref">2022</a>)</span> available <a href="https://bookdown.org/paul/apis_for_social_scientists/">here</a>.</p></li>
</ul>
<div class="cell" type="alert alert-warning">
<div class="alert alert-warning">
<p>
<strong>Another task:</strong> On your own time, play with these packages and access some of the (urban) data they offer.
</p>
</div>
</div>
</section>
<section id="references" class="level2">




</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-amazonWhatAPI" class="csl-entry" role="doc-biblioentry">
AWS, Amazon. 2022. <span>“<span>W</span>hat Is an <span>A</span><span>P</span><span>I</span>? - <span>A</span><span>P</span><span>I</span> <span>B</span>eginner’s <span>G</span>uide - <span>A</span><span>W</span><span>S</span> — Aws.amazon.com.”</span> <a href="https://aws.amazon.com/what-is/api/#:~:text=API%20stands%20for%20Application%20Programming,other%20using%20requests%20and%20responses." class="uri">https://aws.amazon.com/what-is/api/#:~:text=API%20stands%20for%20Application%20Programming,other%20using%20requests%20and%20responses.</a>
</div>
<div id="ref-apis" class="csl-entry" role="doc-biblioentry">
Bauer, P. C., Landesvatter C., and L. Behrens. 2022. <span>“APIs for Social Scientists: A Collaborative Review V1.0.”</span> https://doi.org/<a href="https://doi.org/10.5281/zenodo.6798690">https://doi.org/10.5281/zenodo.6798690</a>.
</div>
<div id="ref-jsonJSON" class="csl-entry" role="doc-biblioentry">
JSON. <span>“<span>J</span><span>S</span><span>O</span><span>N</span> — Json.org.”</span> <a href="https://www.json.org/json-en.html" class="uri">https://www.json.org/json-en.html</a>.
</div>
<div id="ref-singleton2017urban" class="csl-entry" role="doc-biblioentry">
Singleton, Alex D, Seth Spielman, and David Folch. 2017. <em>Urban Analytics</em>. Sage.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>