[
  {
    "objectID": "src/smart_cities.html#outline",
    "href": "src/smart_cities.html#outline",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Outline",
    "text": "Outline\n\nBig data vs. just data\nSmart city\nUrban dashboards\nDigital twins"
  },
  {
    "objectID": "src/smart_cities.html#big-data-vs.-just-data",
    "href": "src/smart_cities.html#big-data-vs.-just-data",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Big data vs. just data",
    "text": "Big data vs. just data\n\nDigital traces human activities leave behind\nAccidental (Arribas-Bel 2014)\nWhy?\nComputing power\nDigital turn\nGeospatial technologies [important for urban researchers]"
  },
  {
    "objectID": "src/smart_cities.html#big-data-vs.-just-data-1",
    "href": "src/smart_cities.html#big-data-vs.-just-data-1",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Big data vs. just data",
    "text": "Big data vs. just data\n\n\nVolume [how big is big?]\nVelocity, being created in or near real time\nVariety, being structured and unstructured in nature\nExhaustive in scope, capture entire populations or systems\nFine-grained in resolution\nRelational in nature, common fields that enable the merging of different data sets\nFlexible, extensionable (can add new fields easily) and scalable (can expand in size rapidly) (Kitchin 2013).\n\nOr, whatever doesn’t fit in an excel spreadsheet (Batty, anecdotal)"
  },
  {
    "objectID": "src/smart_cities.html#big-data-vs.-just-data-2",
    "href": "src/smart_cities.html#big-data-vs.-just-data-2",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Big data vs. just data",
    "text": "Big data vs. just data\n\nBiases\nNeed for new methods\nAccidental\nBig data can speak for themselves. Not really (Kitchin 2013)"
  },
  {
    "objectID": "src/smart_cities.html#smart-cities-different-approaces",
    "href": "src/smart_cities.html#smart-cities-different-approaces",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Smart cities, different approaces",
    "text": "Smart cities, different approaces\nThe digital technologies approach\n\nUrban infrastructure and services are managed computationally\nNetworked digital instrumentation embedded into the urban fabric\nContinuous streams of data that dynamically feed into management systems and control rooms\nNew forms of governmentality\n\n\nBased on Kitchin (2019)"
  },
  {
    "objectID": "src/smart_cities.html#smart-cities-different-approaches",
    "href": "src/smart_cities.html#smart-cities-different-approaches",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Smart cities, different approaches",
    "text": "Smart cities, different approaches\nThe outputs approach\n\nStrategic use of information and communications technology (ICT)\n➔ smarter citizens, workers, policy, and programs\n➔ innovation, economic development, and entrepreneurship\n➔ urban resilience and sustainability\n\n\nBased on Kitchin (2019)"
  },
  {
    "objectID": "src/smart_cities.html#smart-cities-different-approaches-1",
    "href": "src/smart_cities.html#smart-cities-different-approaches-1",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Smart cities, different approaches",
    "text": "Smart cities, different approaches\nThe just approach\n\nICT-led, citizen-centric model of development\n➔ social innovation and social justice, civic engagement and activism\n➔ transparent and accountable governance\n\n\nBased on Kitchin (2019)"
  },
  {
    "objectID": "src/smart_cities.html#smart-cities-different-approaches-2",
    "href": "src/smart_cities.html#smart-cities-different-approaches-2",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Smart cities, different approaches",
    "text": "Smart cities, different approaches\nIn reality…\n… a blend of all these approached\nRio de Janeiro, Brazil: The first smart city\n\n Source: Centro De Operacoes Prefeitura Do Rio"
  },
  {
    "objectID": "src/smart_cities.html#smart-cities-and-data",
    "href": "src/smart_cities.html#smart-cities-and-data",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Smart cities and data",
    "text": "Smart cities and data\n\n(Smart) cities generate much more data nowadays\n\ne-government systems, city operating systems, centralized control rooms, digital surveillance, predictive policing, intelligent transport systems, smart grids, sensor networks, building management systems, civic apps … (Kitchin and Moore-Cherry 2021)"
  },
  {
    "objectID": "src/smart_cities.html#smart-cities-and-data-1",
    "href": "src/smart_cities.html#smart-cities-and-data-1",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Smart cities and data",
    "text": "Smart cities and data\n\nLocal authorities are under pressure to release open data for:\n\npublic scrutiny\ncivic apps\n\nData reuse:\n\ninternally facing\nexternally facing"
  },
  {
    "objectID": "src/smart_cities.html#dashboards",
    "href": "src/smart_cities.html#dashboards",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Dashboards",
    "text": "Dashboards\n\nA visual display of the most important information needed to achieve one or more objectives; a consolidated and arranged on a single screen so the information can be monitored at a glance (Few and Edge 2007)"
  },
  {
    "objectID": "src/smart_cities.html#dashboards-1",
    "href": "src/smart_cities.html#dashboards-1",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Dashboards",
    "text": "Dashboards\n\nTransparency, open government philosophy, accountability (Young, Kitchin, and Naji 2022)\nImprove user’s ’span of control of large and complex data\nShare outputs"
  },
  {
    "objectID": "src/smart_cities.html#dashboards-2",
    "href": "src/smart_cities.html#dashboards-2",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Dashboards",
    "text": "Dashboards\n\nNot just neutral, technical tools\nTranslators and engines rather than mirrors\nReductive in nature (vs. the complex nature of cities)\nDecontextualize cities (Kitchin, Maalsen, and McArdle 2016)"
  },
  {
    "objectID": "src/smart_cities.html#london-dashboard",
    "href": "src/smart_cities.html#london-dashboard",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "London dashboard",
    "text": "London dashboard\n\n\n Source: https://citydashboard.org/london/"
  },
  {
    "objectID": "src/smart_cities.html#nyc-dashboard",
    "href": "src/smart_cities.html#nyc-dashboard",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "NYC Dashboard",
    "text": "NYC Dashboard\n\n Source: https://datausa.io/profile/geo/new-york-ny"
  },
  {
    "objectID": "src/smart_cities.html#digital-twins",
    "href": "src/smart_cities.html#digital-twins",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Digital twins",
    "text": "Digital twins\n\n\nA mirror image of a physical process that is articulated alongside the process in question, usually matching exactly the operation of the physical process which takes place in real time\n\n\nA variety of digital simulation models that run alongside real-time processes that pertain to social and economic systems as well as physical systems\n\n Models are simplifications not replications of the real thing\n\nBased on Batty (2018)"
  },
  {
    "objectID": "src/smart_cities.html#digital-twins-1",
    "href": "src/smart_cities.html#digital-twins-1",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "Digital twins",
    "text": "Digital twins\n\n\n  Source: (Bolton et al. 2018)"
  },
  {
    "objectID": "src/smart_cities.html#references",
    "href": "src/smart_cities.html#references",
    "title": "Smart cities, urban big data, digital twins and other buzz terms",
    "section": "References",
    "text": "References\n\n\n\n\n\n\nArribas-Bel, Daniel. 2014. “Accidental, Open and Everywhere: Emerging Data Sources for the Understanding of Cities.” Applied Geography 49: 45–53.\n\n\nBatty, Michael. 2018. “Digital Twins.” Environment and Planning B: Urban Analytics and City Science. SAGE Publications Sage UK: London, England.\n\n\nBolton, Alexandra, Lorraine Butler, Ian Dabson, Mark Enzer, Matthew Evans, Tim Fenemore, Fergus Harradence, et al. 2018. “Gemini Principles.”\n\n\nFew, Stephen, and Perceptual Edge. 2007. “Dashboard Confusion Revisited.” Perceptual Edge, 1–6.\n\n\nKitchin, Rob. 2013. “Big Data and Human Geography: Opportunities, Challenges and Risks.” Dialogues in Human Geography 3 (3): 262–67.\n\n\n———. 2019. “The Timescape of Smart Cities.” Annals of the American Association of Geographers 109 (3): 775–90.\n\n\nKitchin, Rob, Sophia Maalsen, and Gavin McArdle. 2016. “The Praxis and Politics of Building Urban Dashboards.” Geoforum 77: 93–101.\n\n\nKitchin, Rob, and Niamh Moore-Cherry. 2021. “Fragmented Governance, the Urban Data Ecosystem and Smart City-Regions: The Case of Metropolitan Boston.” Regional Studies 55 (12): 1913–23.\n\n\nYoung, Gareth W, Rob Kitchin, and Jeneen Naji. 2022. “Building City Dashboards for Different Types of Users.” In Sustainable Smart City Transitions, 259–79. Routledge."
  },
  {
    "objectID": "src/why_cities.html#why-should-we-care-about-cities",
    "href": "src/why_cities.html#why-should-we-care-about-cities",
    "title": "Cities, a very very brief introduction",
    "section": "Why should we care about cities?",
    "text": "Why should we care about cities?\nThe most overused figure (Nations 2009)…\n\nIn 2009 for the first time in history 2009 more than 50% of the population lived within cities\n\n… but still true!\nSource of:\n\neconomic growth,\ninnovation - technology - …,\nbut also - pandemics (!)"
  },
  {
    "objectID": "src/why_cities.html#why-should-we-care-about-cities-1",
    "href": "src/why_cities.html#why-should-we-care-about-cities-1",
    "title": "Cities, a very very brief introduction",
    "section": "Why should we care about cities?",
    "text": "Why should we care about cities?\n\nStrong links historically between (McCann and Acs 2011):\n\nGlobalisation\nUrbanisation\nIndustrialisation"
  },
  {
    "objectID": "src/why_cities.html#why-should-we-care-about-cities-2",
    "href": "src/why_cities.html#why-should-we-care-about-cities-2",
    "title": "Cities, a very very brief introduction",
    "section": "Why should we care about cities?",
    "text": "Why should we care about cities?\n\n\n\n\n\n\nTremendous growth\nNot the same everywhere"
  },
  {
    "objectID": "src/why_cities.html#urban-analytics-and-city-science",
    "href": "src/why_cities.html#urban-analytics-and-city-science",
    "title": "Cities, a very very brief introduction",
    "section": "Urban analytics and city science",
    "text": "Urban analytics and city science\n\nUnderstand cities and how they change\nUse critically and effectively urban data\nUnderstand and master methodological tools\nSupport urban policy making"
  },
  {
    "objectID": "src/why_cities.html#different-terms",
    "href": "src/why_cities.html#different-terms",
    "title": "Cities, a very very brief introduction",
    "section": "Different terms",
    "text": "Different terms\n\nAcademics love inventing new terms\nUrban science, city science, urban analytics, urban geography, geographic data science, urban data science, complexity science, TheNextBigThing\nHave a look: Batty (2019)"
  },
  {
    "objectID": "src/why_cities.html#why-do-cities-exist",
    "href": "src/why_cities.html#why-do-cities-exist",
    "title": "Cities, a very very brief introduction",
    "section": "Why do cities exist?",
    "text": "Why do cities exist?\n\nAn economist’s answer: to economise!\nBecause of economies of scale and agglomeration economies"
  },
  {
    "objectID": "src/why_cities.html#scale-economies",
    "href": "src/why_cities.html#scale-economies",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies\n\nAKA increasing returns to scale, or\nAKA economies of scale\nBusiness enterprises become more efﬁcient at large scales of operation\nMore output per unit of input than at smaller scales\n➔ larger enterprises\nWithin firms"
  },
  {
    "objectID": "src/why_cities.html#scale-economies-1",
    "href": "src/why_cities.html#scale-economies-1",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies"
  },
  {
    "objectID": "src/why_cities.html#scale-economies-2",
    "href": "src/why_cities.html#scale-economies-2",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies\nIncreasing returns to scale\n\n\ndouble ALL the inputs ➔\nmore than double output"
  },
  {
    "objectID": "src/why_cities.html#scale-economies-3",
    "href": "src/why_cities.html#scale-economies-3",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies"
  },
  {
    "objectID": "src/why_cities.html#scale-economies-4",
    "href": "src/why_cities.html#scale-economies-4",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies\nConstant returns to scale:\n\n\ndouble ALL the inputs ➔\ndouble output"
  },
  {
    "objectID": "src/why_cities.html#scale-economies-5",
    "href": "src/why_cities.html#scale-economies-5",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies"
  },
  {
    "objectID": "src/why_cities.html#scale-economies-6",
    "href": "src/why_cities.html#scale-economies-6",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies\nDecreasing returns to scale\n\n\ndouble ALL the inputs ➔\nless than double output"
  },
  {
    "objectID": "src/why_cities.html#scale-economies-7",
    "href": "src/why_cities.html#scale-economies-7",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies"
  },
  {
    "objectID": "src/why_cities.html#scale-economies-8",
    "href": "src/why_cities.html#scale-economies-8",
    "title": "Cities, a very very brief introduction",
    "section": "Scale economies",
    "text": "Scale economies\nHow do they affect space?\n\n\nClustering of workers near factories\nClustering of services for workers near factories\nThe company town example\nIllustrative"
  },
  {
    "objectID": "src/why_cities.html#agglomeration-economies",
    "href": "src/why_cities.html#agglomeration-economies",
    "title": "Cities, a very very brief introduction",
    "section": "Agglomeration economies",
    "text": "Agglomeration economies\n\nAKA external economies of scale\nExternal to the firm\nVery important for cities\nTwo types:\n\nLocalisation economies AKA Marshallian externalities\nUrbanisation economies AKA Jacobian externalities"
  },
  {
    "objectID": "src/why_cities.html#localization-economies",
    "href": "src/why_cities.html#localization-economies",
    "title": "Cities, a very very brief introduction",
    "section": "Localization Economies",
    "text": "Localization Economies\n\nWithin a group of firms of the same industry\nClustered together at the same place\nWhy?\n\nInformation exchange\nLabour mobility\nSpecialist services\n\n\nExamples: Silicon Valley (micro-electronics), The City of London (finance), Detroit and Michigan (automobile), Seattle (aerospace), etc."
  },
  {
    "objectID": "src/why_cities.html#localization-economies-1",
    "href": "src/why_cities.html#localization-economies-1",
    "title": "Cities, a very very brief introduction",
    "section": "Localization Economies",
    "text": "Localization Economies"
  },
  {
    "objectID": "src/why_cities.html#urbanization-economies",
    "href": "src/why_cities.html#urbanization-economies",
    "title": "Cities, a very very brief introduction",
    "section": "Urbanization economies",
    "text": "Urbanization economies\n\nFirms across different sectors\nClustered together at the same place (Jane Jacobs 1961)\nA city\nWhy?\n\nSupport services to firms experiencing internal and localization economies\nClustering\nIncreased local factor prices\nEconomies of scale"
  },
  {
    "objectID": "src/why_cities.html#agglomeration-economies-1",
    "href": "src/why_cities.html#agglomeration-economies-1",
    "title": "Cities, a very very brief introduction",
    "section": "Agglomeration economies",
    "text": "Agglomeration economies\n\nDiversity vs. specialization\nInternal economies of scale (firm specific)\nLocalization economies (industry specific)\nUrbanization economies (city specific)"
  },
  {
    "objectID": "src/why_cities.html#the-sources-of-agglomeration",
    "href": "src/why_cities.html#the-sources-of-agglomeration",
    "title": "Cities, a very very brief introduction",
    "section": "The sources of agglomeration",
    "text": "The sources of agglomeration\n\nKnowledge spillovers (Marshall 1890)\n\n\nInteractions between employees of different firms\nProximity\nTacit knowledge\nMutual trading of information"
  },
  {
    "objectID": "src/why_cities.html#the-sources-of-agglomeration-economies",
    "href": "src/why_cities.html#the-sources-of-agglomeration-economies",
    "title": "Cities, a very very brief introduction",
    "section": "The sources of agglomeration economies",
    "text": "The sources of agglomeration economies\n\nNon-traded local inputs\n\n\nEfficient provision of specialist inputs\nInfrastructure"
  },
  {
    "objectID": "src/why_cities.html#the-sources-of-agglomeration-economies-1",
    "href": "src/why_cities.html#the-sources-of-agglomeration-economies-1",
    "title": "Cities, a very very brief introduction",
    "section": "The sources of agglomeration economies",
    "text": "The sources of agglomeration economies\n\nLocal skilled labour pool\n\n\nSufficient quantity of labour to respond to market changes\nSpecialised labour / cost of training"
  },
  {
    "objectID": "src/why_cities.html#the-sources-of-agglomeration-economies-2",
    "href": "src/why_cities.html#the-sources-of-agglomeration-economies-2",
    "title": "Cities, a very very brief introduction",
    "section": "The sources of agglomeration economies",
    "text": "The sources of agglomeration economies\n\nProcesses of learning, sharing and matching (Duranton and Puga 2004)\nClustering:\n\nInteraction\nDynamic\n➔ reduces knowledge and information transaction cost\n\nHigher profitability for firms within the cluster than those outside the cluster"
  },
  {
    "objectID": "src/why_cities.html#agglomeration-economies-pecuniary-vs.-technological",
    "href": "src/why_cities.html#agglomeration-economies-pecuniary-vs.-technological",
    "title": "Cities, a very very brief introduction",
    "section": "Agglomeration economies: pecuniary vs. technological",
    "text": "Agglomeration economies: pecuniary vs. technological\n\nPecuniary ➔ input cost reduction\nmake inputs cheaper in larger cities\nTechnological ➔ raise productivity\nmake inputs more productive in larger cities\n\n\nBased on Brueckner (2011)"
  },
  {
    "objectID": "src/why_cities.html#agglomeration-economies-a-citique",
    "href": "src/why_cities.html#agglomeration-economies-a-citique",
    "title": "Cities, a very very brief introduction",
    "section": "Agglomeration economies: a citique",
    "text": "Agglomeration economies: a citique\nBounded rationality (Simon 1955, 1966)\n\nInformation about space and location in limited\nRelocation issues, the ability of a rational decision is limited\nRelocation cost"
  },
  {
    "objectID": "src/why_cities.html#why-cities-do-exist",
    "href": "src/why_cities.html#why-cities-do-exist",
    "title": "Cities, a very very brief introduction",
    "section": "Why cities do exist?",
    "text": "Why cities do exist?\nTo economise!\nIn other words, collocation of people and firms increases efficiency."
  },
  {
    "objectID": "src/why_cities.html#cities-as-complex-system",
    "href": "src/why_cities.html#cities-as-complex-system",
    "title": "Cities, a very very brief introduction",
    "section": "Cities as complex system",
    "text": "Cities as complex system\n\n\n\n\n\n\n\n\nHeterogeneity\nDifferences in information, profession, culture, race, ethnicity, and economic status\n\n\nInterconnectivity\nInterdependence between people, organizations, and infrastructure in networks\n\n\nScaling\nSelf-similar economies of scale per capita in material infrastructure and increasing returns to socioeconomic activity\n\n\nCircular causality\nInterdependence dynamics between socioeconomic activities, institutions, and services\n\n\nEvolution\nOpen-ended change supported by new information, investment, and collective action\n\n\n\n Source: Bettencourt (2021)"
  },
  {
    "objectID": "src/why_cities.html#cities-as-complex-system-scale",
    "href": "src/why_cities.html#cities-as-complex-system-scale",
    "title": "Cities, a very very brief introduction",
    "section": "Cities as complex system: scale",
    "text": "Cities as complex system: scale"
  },
  {
    "objectID": "src/why_cities.html#urban-models-looking-into-cities",
    "href": "src/why_cities.html#urban-models-looking-into-cities",
    "title": "Cities, a very very brief introduction",
    "section": "Urban models: looking into cities",
    "text": "Urban models: looking into cities\nThe Burgess model\n\n Source: bbc.co.uk"
  },
  {
    "objectID": "src/why_cities.html#urban-models-looking-into-cities-1",
    "href": "src/why_cities.html#urban-models-looking-into-cities-1",
    "title": "Cities, a very very brief introduction",
    "section": "Urban models: looking into cities",
    "text": "Urban models: looking into cities\nThe Burgess model\n\nCreated by E.W. Burgess in 1925\nDeveloped in rings, reflecting waves of immigrants\nUsed Chicago as his model\nMost European cities developed this way (pre-automobile)"
  },
  {
    "objectID": "src/why_cities.html#urban-models-looking-into-cities-2",
    "href": "src/why_cities.html#urban-models-looking-into-cities-2",
    "title": "Cities, a very very brief introduction",
    "section": "Urban models: looking into cities",
    "text": "Urban models: looking into cities\nThe Von Thünen model (The isolated state in 1826)\n\nBasic idea: Agricultural land uses follow predictable patterns around cities, which are the markets for the farm goods\nGoods with greatest demand and having the highest transport costs should be produced closest to the city"
  },
  {
    "objectID": "src/why_cities.html#urban-models-looking-into-cities-3",
    "href": "src/why_cities.html#urban-models-looking-into-cities-3",
    "title": "Cities, a very very brief introduction",
    "section": "Urban models: looking into cities",
    "text": "Urban models: looking into cities\n\n Source: Coe, Kelly, and Yeung (2019)"
  },
  {
    "objectID": "src/why_cities.html#urban-models-systems-of-cities",
    "href": "src/why_cities.html#urban-models-systems-of-cities",
    "title": "Cities, a very very brief introduction",
    "section": "Urban models: systems of cities",
    "text": "Urban models: systems of cities\nWhy aren’t we all clustered in a huge city?\n\n\nDiseconomies of scale\nAKA Decreasing returns to scale\n\n Source: Bettencourt (2021)"
  },
  {
    "objectID": "src/why_cities.html#urban-models-systems-of-cities-1",
    "href": "src/why_cities.html#urban-models-systems-of-cities-1",
    "title": "Cities, a very very brief introduction",
    "section": "Urban models: systems of cities",
    "text": "Urban models: systems of cities\nCentral place theory\n\n Source: Wood and Roberts (2012) adapted from Christaller (1966)"
  },
  {
    "objectID": "src/why_cities.html#urban-models-systems-of-cities-2",
    "href": "src/why_cities.html#urban-models-systems-of-cities-2",
    "title": "Cities, a very very brief introduction",
    "section": "Urban models: systems of cities",
    "text": "Urban models: systems of cities\nCentral place theory\n\nSpatial distribution of cities and towns in Southern Germany\nInductive instead of deductive\nHierarchy of 3 different goods (3, 2, 1), 3 different market areas and 3 different levels of urban centres\nAssumptions: homogeneous land and equal\nTransport possibilities in all directions"
  },
  {
    "objectID": "src/why_cities.html#urban-models-systems-of-cities-3",
    "href": "src/why_cities.html#urban-models-systems-of-cities-3",
    "title": "Cities, a very very brief introduction",
    "section": "Urban models: systems of cities",
    "text": "Urban models: systems of cities\nThe core-periphery model\n\n\n\n2 region model\nTransport cost steadily fall over time\nAs transport cost ⟱, separation of production and consumption becomes feasible\n⤇ Core-periphery\n\n\n\n\n Source: Krugman and Elizondo (1996)"
  },
  {
    "objectID": "src/why_cities.html#summary",
    "href": "src/why_cities.html#summary",
    "title": "Cities, a very very brief introduction",
    "section": "Summary",
    "text": "Summary\n\nUrban structure is not random\nMultiple scales: individual, neighbourhoods, cities, urban networks\nCities are complex adaptive systems"
  },
  {
    "objectID": "src/why_cities.html#references",
    "href": "src/why_cities.html#references",
    "title": "Cities, a very very brief introduction",
    "section": "References",
    "text": "References\n\n\n\n\n\n\nBatty, Michael. 2019. “Urban Analytics Defined.” Environment and Planning B: Urban Analytics and City Science 46 (3): 403–5. https://doi.org/10.1177/2399808319839494.\n\n\nBettencourt, Luı́s MA. 2021. “Introduction to Urban Science: Evidence and Theory of Cities as Complex Systems.”\n\n\nBrueckner, Jan K. 2011. Lectures on Urban Economics. MIT press.\n\n\nChristaller, Walter. 1966. Central Places in Southern Germany. Vol. 10. Prentice-Hall.\n\n\nCoe, Neil M, Philip F Kelly, and Henry WC Yeung. 2019. Economic Geography: A Contemporary Introduction. John Wiley & Sons.\n\n\nDuranton, Gilles, and Diego Puga. 2004. “Micro-Foundations of Urban Agglomeration Economies.” Handbook of Regional and Urban Economics 4: 2063–2117.\n\n\nJane Jacobs. 1961. The Death and Life of Great American Cities. Vintage Books.\n\n\nKrugman, Paul, and Raul Livas Elizondo. 1996. “Trade Policy and the Third World Metropolis.” Journal of Development Economics 49 (1): 137–50.\n\n\nMarshall, Alfred. 1890. “Principles of Economics: An Introductory Volume.” The Macmillan Press Ltd.\n\n\nMcCann, Philip, and Zoltan J Acs. 2011. “Globalization: Countries, Cities and Multinationals.” Regional Studies 45 (1): 17–32.\n\n\nNations, United. 2009. Urban and Rural Areas. New Yorl: United Nations.\n\n\nSimon, Herbert A. 1955. “A Behavioral Model of Rational Choice.” The Quarterly Journal of Economics 69 (1): 99–118.\n\n\n———. 1966. “Theories of Decision-Making in Economics and Behavioural Science.” In Surveys of Economic Theory, 1–28. Springer.\n\n\nWood, Andrew, and Susan Roberts. 2012. Economic Geography: Places, Networks and Flows. Routledge."
  },
  {
    "objectID": "src/intro_networks.html#outline",
    "href": "src/intro_networks.html#outline",
    "title": "Networks",
    "section": "Outline",
    "text": "Outline\n\nWhy networks?\nNetwork Data\nNetwork Measures"
  },
  {
    "objectID": "src/intro_networks.html#why-networks",
    "href": "src/intro_networks.html#why-networks",
    "title": "Networks",
    "section": "Why Networks",
    "text": "Why Networks\n\n\n\nNetworks are everywhere!\nThe focus is not on individual attributes, but…\n… on who is connected to whom.\nAKA networks are about relationships\nInteractions, or\nflows between nodes (actors, places, …)\nSocial Network Analysis, Graph Theory, Network Science and Complexity Theory"
  },
  {
    "objectID": "src/intro_networks.html#scale-and-levels",
    "href": "src/intro_networks.html#scale-and-levels",
    "title": "Networks",
    "section": "Scale and levels",
    "text": "Scale and levels\n\n\n\n\n\n\n\n\n\n\n\nLevel (aggregation of linkages and nodes)\n\nGeographical scale (network boundary)\n\n\n\n\n\n\n\n\n1 – Local\n2 – Regional\n3 – Global\n\n\nA -- Macro\nCities\nCity as a whole entity\nCentral place system (Christaller 1966)\n\n\n\nB -- Meso\nFirms\nClusters (Porter 2000)\nRegional economic intergration and functional polycentrism (e.g. Scott 2001: Boschma 2005)\nGlobal inter-firm network (e.g. Cohen 1981)\n\n\nC – Micro\nPeople\nA neighbourly economic suport support network (e.g. Wellman 1979)\nA local labou market (e.g. Granovetter 1974)\nThe global economic elite (Sassen 1991)\n\n\n\n\n Source: (Neal and Rozenblat 2021)"
  },
  {
    "objectID": "src/intro_networks.html#section-1",
    "href": "src/intro_networks.html#section-1",
    "title": "Networks",
    "section": "",
    "text": "Source: Facebook.com"
  },
  {
    "objectID": "src/intro_networks.html#section-2",
    "href": "src/intro_networks.html#section-2",
    "title": "Networks",
    "section": "",
    "text": "Source: http://www.opte.org/"
  },
  {
    "objectID": "src/intro_networks.html#directed-non-weighted-networks",
    "href": "src/intro_networks.html#directed-non-weighted-networks",
    "title": "Networks",
    "section": "1. Directed, non-weighted networks1",
    "text": "1. Directed, non-weighted networks1\n\n\nBasic elements: nodes and links\nData is not arranged in vectors but on square matrices\n1 and 0 represent the existence of a link\n\nAdjacency matrix\n\n\n\n\nA\nB\nC\nD\n\n\nA\n0\n1\n1\n1\n\n\nB\n0\n0\n1\n0\n\n\nC\n0\n0\n0\n1\n\n\nD\n0\n0\n0\n0\n\n\n\n\nHanneman and Riddle (2005) is a very useful online source for most of the concepts presented here."
  },
  {
    "objectID": "src/intro_networks.html#directed-non-weighted-networks-1",
    "href": "src/intro_networks.html#directed-non-weighted-networks-1",
    "title": "Networks",
    "section": "1. Directed, non-weighted networks",
    "text": "1. Directed, non-weighted networks\n\n\nBasic elements: nodes and links\nData is not arranged in vectors but on square matrices\n1 and 0 represent the existence of a link\nEdge list\n\n\n\ni\nj\nw\n\n\n\n\nA\nB\n1\n\n\nA\nC\n1\n\n\nA\nD\n1\n\n\nB\nC\n1\n\n\nC\nD\n1\n\n\nD\nC\n1"
  },
  {
    "objectID": "src/intro_networks.html#directed-non-weighted-networks-2",
    "href": "src/intro_networks.html#directed-non-weighted-networks-2",
    "title": "Networks",
    "section": "1. Directed, non-weighted networks",
    "text": "1. Directed, non-weighted networks\n\n\nBasic elements: nodes and links\nData is not arranged in vectors but on square matrices\n1 and 0 represent the existence of a link"
  },
  {
    "objectID": "src/intro_networks.html#undirected-non-weighted-networks",
    "href": "src/intro_networks.html#undirected-non-weighted-networks",
    "title": "Networks",
    "section": "2. Undirected, non-weighted networks",
    "text": "2. Undirected, non-weighted networks\n\n\nSymmetrical ties\nSymmetrical adjacency matrices\n\nAdjacency matrix\n\n\n\n\nA\nB\nC\nD\n\n\nA\n0\n1\n1\n1\n\n\nB\n1\n0\n1\n0\n\n\nC\n1\n1\n0\n1\n\n\nD\n1\n0\n1\n0"
  },
  {
    "objectID": "src/intro_networks.html#undirected-non-weighted-networks-1",
    "href": "src/intro_networks.html#undirected-non-weighted-networks-1",
    "title": "Networks",
    "section": "2. Undirected, non-weighted networks",
    "text": "2. Undirected, non-weighted networks\n\nEdge list\n\n\n\ni\nj\nw\n\n\n\n\nA\nB\n1\n\n\nA\nC\n1\n\n\nA\nD\n1\n\n\nB\nA\n1\n\n\nB\nC\n1\n\n\nC\nA\n1\n\n\nC\nB\n1\n\n\nC\nD\n1\n\n\nD\nA\n1\n\n\nD\nC\n1"
  },
  {
    "objectID": "src/intro_networks.html#undirected-non-weighted-networks-2",
    "href": "src/intro_networks.html#undirected-non-weighted-networks-2",
    "title": "Networks",
    "section": "2. Undirected, non-weighted networks",
    "text": "2. Undirected, non-weighted networks"
  },
  {
    "objectID": "src/intro_networks.html#directed-weighted-networks",
    "href": "src/intro_networks.html#directed-weighted-networks",
    "title": "Networks",
    "section": "3. Directed, weighted networks",
    "text": "3. Directed, weighted networks\n\nLinks are characterized by weights i.e. strength of a friendship, commuting flows, trade flows\nAdjacency matrix\n\n\n\n\nA\nB\nC\nD\n\n\nA\n0\n3\n1\n5\n\n\nB\n0\n0\n1\n0\n\n\nC\n0\n0\n0\n6\n\n\nD\n0\n0\n7\n0"
  },
  {
    "objectID": "src/intro_networks.html#directed-weighted-networks-1",
    "href": "src/intro_networks.html#directed-weighted-networks-1",
    "title": "Networks",
    "section": "3. Directed, weighted networks",
    "text": "3. Directed, weighted networks\n\nLinks are characterized by weights i.e. strength of a friendship, commuting flows, trade flows\nEdge list\n\n\n\ni\nj\nw\n\n\n\n\nA\nB\n3\n\n\nA\nC\n1\n\n\nA\nD\n5\n\n\nB\nC\n1\n\n\nC\nD\n6\n\n\nD\nC\n7"
  },
  {
    "objectID": "src/intro_networks.html#directed-weighted-networks-2",
    "href": "src/intro_networks.html#directed-weighted-networks-2",
    "title": "Networks",
    "section": "3. Directed, weighted networks",
    "text": "3. Directed, weighted networks"
  },
  {
    "objectID": "src/intro_networks.html#undirected-weighted-networks",
    "href": "src/intro_networks.html#undirected-weighted-networks",
    "title": "Networks",
    "section": "4. Undirected, weighted networks",
    "text": "4. Undirected, weighted networks\n\nLinks are characterized by weights i.e. strength of a friendship, commuting flows, trade flows…\n… and also have symmetrical matrices\nAdjacency matrix\n\n\n\n\nA\nB\nC\nD\n\n\nA\n0\n3\n1\n5\n\n\nB\n3\n0\n1\n0\n\n\nC\n1\n1\n0\n6\n\n\nD\n5\n0\n6\n0"
  },
  {
    "objectID": "src/intro_networks.html#undirected-weighted-networks-1",
    "href": "src/intro_networks.html#undirected-weighted-networks-1",
    "title": "Networks",
    "section": "4. Undirected, weighted networks",
    "text": "4. Undirected, weighted networks\n\nEdge list\n\n\n\ni\nj\nw\n\n\n\n\nA\nB\n3\n\n\nA\nC\n1\n\n\nA\nD\n5\n\n\nB\nC\n1\n\n\nB\nA\n3\n\n\nC\nD\n6\n\n\nC\nA\n1\n\n\nC\nB\n1\n\n\nD\nC\n6\n\n\nD\nA\n5"
  },
  {
    "objectID": "src/intro_networks.html#undirected-weighted-networks-2",
    "href": "src/intro_networks.html#undirected-weighted-networks-2",
    "title": "Networks",
    "section": "4. Undirected, weighted networks",
    "text": "4. Undirected, weighted networks"
  },
  {
    "objectID": "src/intro_networks.html#network-data-summary",
    "href": "src/intro_networks.html#network-data-summary",
    "title": "Networks",
    "section": "Network data: summary",
    "text": "Network data: summary\n\n\n4 possible combinations of network data\n\nDirectional and non-weighted (or binary)\nDirectional and weighted\nUndirected and non-weighted (or binary)\nUndirected and weighted\n\nNodes, aka vertices (singular: vertex)\nLinks or ties, edges or arcs\nConventional data: actors and attributes\nNetwork data: actors and their relations"
  },
  {
    "objectID": "src/intro_networks.html#network-size",
    "href": "src/intro_networks.html#network-size",
    "title": "Networks",
    "section": "Network size",
    "text": "Network size\n\n\\(k\\) numbers of nodes\nmaximum number of links:\n\n\\(k(k-1)\\) for directed\n\\(k(k-1)/2\\) for undirected networks"
  },
  {
    "objectID": "src/intro_networks.html#network-density",
    "href": "src/intro_networks.html#network-density",
    "title": "Networks",
    "section": "Network density",
    "text": "Network density\n\nNumbers of links / Max. number of links:\n\n\\(L/k(k-1)\\) for directed\n\\(2L/k(k-1)\\) for undirected networks"
  },
  {
    "objectID": "src/intro_networks.html#network-distance",
    "href": "src/intro_networks.html#network-distance",
    "title": "Networks",
    "section": "Network distance",
    "text": "Network distance\nA macro characteristic of the network ➔ efficiency\n\n\nMultiple paths between two nodes\nA walk is a path in which each node and each link are used once\nGeodesic distance: the number of relations in the shortest possible path from one node to another\nDiameter: the longest geodesic distance in the network"
  },
  {
    "objectID": "src/intro_networks.html#reciprocity",
    "href": "src/intro_networks.html#reciprocity",
    "title": "Networks",
    "section": "Reciprocity",
    "text": "Reciprocity\n\nThe extent to which ties are reciprocated (if A ➔ B, then B ➔ A)\nAt least two different approaches:\n\nReciprocated ties / maximum number of ties (0.33)\nReciprocated ties / number of existing ties (0.5)"
  },
  {
    "objectID": "src/intro_networks.html#assortativity",
    "href": "src/intro_networks.html#assortativity",
    "title": "Networks",
    "section": "Assortativity",
    "text": "Assortativity\n\nA bias towards connections between network nodes with similar network characteristics\nAssortativity coefficient is the Pearson correlation coefficient of the degree centralities of pairs of connected nodes"
  },
  {
    "objectID": "src/intro_networks.html#clustering",
    "href": "src/intro_networks.html#clustering",
    "title": "Networks",
    "section": "Clustering",
    "text": "Clustering\n\nLarge proportion of links are highly “clustered” into local neighborhoods ➔ small worlds\n\\(C_{i} = 2 E_{i} / k_{i}(k_{i}-1)\\)\nthe ratio between the number of edges \\(E_{i}\\) that exist among \\(i\\)’s nearest neighbors and the maximum number of these edges, where \\(k_{i}\\) is the number of nodes in the sub-net\nAKA Transitivity"
  },
  {
    "objectID": "src/intro_networks.html#community-detection",
    "href": "src/intro_networks.html#community-detection",
    "title": "Networks",
    "section": "Community detection",
    "text": "Community detection\n\nExploratory process\nThe emphasis is not on the behaviour of single entities, but on the information of who is connected to whom\n“The problem of community detection requires the partition of a network into communities of densely connected nodes, with the nodes belonging to different communities being only sparsely connected” (Blondel et al. 2008, 2)\nClusters of nodes with dense connections inside the clusters, but not between the clusters"
  },
  {
    "objectID": "src/intro_networks.html#community-detection-1",
    "href": "src/intro_networks.html#community-detection-1",
    "title": "Networks",
    "section": "Community detection",
    "text": "Community detection\n\n\nLouvain method (Blondel et al. 2008): maximization of links inside the communities (modularity)\nNetwork of communities extracted from a Belgian mobile phone network\nNode size proportional to the number of individuals in the community\nColour represents the main language spoken in the community (red for French and green for Dutch)\nWhat does the intermediate community of mixed colours between the two main clusters represent?"
  },
  {
    "objectID": "src/intro_networks.html#community-detection-2",
    "href": "src/intro_networks.html#community-detection-2",
    "title": "Networks",
    "section": "Community detection",
    "text": "Community detection\n\nRedrawing the Map of Great Britain from a Network of Human Interactions (Ratti et al. 2010)\n\nDo administrative boundaries follow the more natural ways people interact across space?\nLarge telecommunications database in Great Britain."
  },
  {
    "objectID": "src/intro_networks.html#degree-centrality-for-undirected-networks",
    "href": "src/intro_networks.html#degree-centrality-for-undirected-networks",
    "title": "Networks",
    "section": "Degree centrality for undirected networks",
    "text": "Degree centrality for undirected networks\n\nThe simplest centrality measure\nWho has the most connections?\nThe number of links per node\n\\(D_{i} = \\sum_{j}^{N} x_{ij}= \\sum_{j}^{N} x_{ji}\\)"
  },
  {
    "objectID": "src/intro_networks.html#degree-centrality-for-directed-networks",
    "href": "src/intro_networks.html#degree-centrality-for-directed-networks",
    "title": "Networks",
    "section": "Degree centrality for directed networks",
    "text": "Degree centrality for directed networks\n\nIndegree: the number of ingoing links per node \\(D_{i} = \\sum_{j}^{N} x_{ji}\\)\nOutdegree: the number of outgoing links per node \\(D_{i} = \\sum_{j}^{N} x_{ij}\\)"
  },
  {
    "objectID": "src/intro_networks.html#degree-centrality-for-weighted-networks",
    "href": "src/intro_networks.html#degree-centrality-for-weighted-networks",
    "title": "Networks",
    "section": "Degree centrality for weighted networks",
    "text": "Degree centrality for weighted networks\n\\[D_{i} = \\sum_{j}^{N} w_{ij} = \\sum_{j}^{N} w_{ji}\\]\n\\(w\\) denotes the weight of the links"
  },
  {
    "objectID": "src/intro_networks.html#degree-cenralities",
    "href": "src/intro_networks.html#degree-cenralities",
    "title": "Networks",
    "section": "Degree cenralities",
    "text": "Degree cenralities"
  },
  {
    "objectID": "src/intro_networks.html#degree-cenralities-1",
    "href": "src/intro_networks.html#degree-cenralities-1",
    "title": "Networks",
    "section": "Degree cenralities",
    "text": "Degree cenralities"
  },
  {
    "objectID": "src/intro_networks.html#degree-cenralities-2",
    "href": "src/intro_networks.html#degree-cenralities-2",
    "title": "Networks",
    "section": "Degree cenralities",
    "text": "Degree cenralities"
  },
  {
    "objectID": "src/intro_networks.html#degree-cenralities-3",
    "href": "src/intro_networks.html#degree-cenralities-3",
    "title": "Networks",
    "section": "Degree cenralities",
    "text": "Degree cenralities\n\n\n\n\nA\nB\nC\nD\nout-degree\n\n\n\n\nA\n0\n3\n1\n5\n9\n\n\nB\n3\n0\n1\n0\n4\n\n\nC\n2\n4\n0\n9\n15\n\n\nD\n7\n0\n5\n0\n12\n\n\nin-degree\n12\n7\n7\n14"
  },
  {
    "objectID": "src/intro_networks.html#closeness-centrality",
    "href": "src/intro_networks.html#closeness-centrality",
    "title": "Networks",
    "section": "Closeness centrality",
    "text": "Closeness centrality\n\nWhich node has the shortest distance to other nodes\nInstead of focusing on the number of links, the focus turns to the network distances\nDifferent definitions:\nCloseness, \\(c_{i} = 1/\\sum_{j} d_{ij}\\)\nFareness, \\(c_{i} = \\sum_{j} d_{ij}\\)\nigraph calculates closeness"
  },
  {
    "objectID": "src/intro_networks.html#betweenness-centrality",
    "href": "src/intro_networks.html#betweenness-centrality",
    "title": "Networks",
    "section": "Betweenness centrality",
    "text": "Betweenness centrality\n\nWhich nodes control information flows\nHow many geodesic links between actors \\(i\\) and \\(j\\) contain actor \\(k\\)?\n\n\\(B_{k} = \\sum_{i \\not=j \\not=k} \\frac{g_{ij}(k)}{g_{ij}}\\)"
  },
  {
    "objectID": "src/intro_networks.html#eigenvector-centrality",
    "href": "src/intro_networks.html#eigenvector-centrality",
    "title": "Networks",
    "section": "Eigenvector centrality",
    "text": "Eigenvector centrality\n\nNot all connections are equal\nConnections to more central vertices are more important than connections to less central ones\nIt is still important to have a large number of connections, but a node with fewer and more important connections will end up being more central than a node with more and less important links\nGlobal structure of the network: both direct links and shortest paths\nEigenvector of the adjacency matrix associated with the larger eigenvalue"
  },
  {
    "objectID": "src/intro_networks.html#pagerank-centrality",
    "href": "src/intro_networks.html#pagerank-centrality",
    "title": "Networks",
    "section": "PageRank centrality",
    "text": "PageRank centrality\n\nThe basis of Google search engine\nWebpages that link to \\(i\\), and have high PageRank scores themselves, should be given more weight.\nWebpages that link to \\(i\\), but link to a lot of other webpages in general, should be given less weight.\nDirected networks\nIterative algorithm"
  },
  {
    "objectID": "src/intro_networks.html#centralities",
    "href": "src/intro_networks.html#centralities",
    "title": "Networks",
    "section": "Centralities",
    "text": "Centralities\n\nWhile easy to identify in simple graphs, much more difficult in large, complex networks\nVarious other centrality measures exist (e.g. see igraph)\nHighlight different aspects of the distribution and sources of power"
  },
  {
    "objectID": "src/intro_networks.html#other-types-of-networks",
    "href": "src/intro_networks.html#other-types-of-networks",
    "title": "Networks",
    "section": "Other types of networks",
    "text": "Other types of networks\n\nTwo mode networks\nMultilayer\nDynamic\nSpatial\n\nSee also Light and Moody (2020)"
  },
  {
    "objectID": "src/intro_networks.html#references",
    "href": "src/intro_networks.html#references",
    "title": "Networks",
    "section": "References",
    "text": "References\n\n\n\n\n\n\nBlondel, Vincent D, Jean-Loup Guillaume, Renaud Lambiotte, and Etienne Lefebvre. 2008. “Fast Unfolding of Communities in Large Networks.” Journal of Statistical Mechanics: Theory and Experiment 2008 (10): P10008.\n\n\nChristaller, Walter. 1966. Central Places in Southern Germany. Vol. 10. Prentice-Hall.\n\n\nHanneman, Robert A, and Mark Riddle. 2005. “Introduction to Social Network Methods.” University of California Riverside. http://faculty.ucr.edu/~hanneman/nettext/.\n\n\nLight, Ryan, and James Moody. 2020. The Oxford Handbook of Social Networks. Oxford University Press.\n\n\nNeal, Zachary P, and Céline Rozenblat. 2021. Handbook of Cities and Networks. Edward Elgar Publishing.\n\n\nRatti, Carlo, Stanislav Sobolevsky, Francesco Calabrese, Clio Andris, Jonathan Reades, Mauro Martino, Rob Claxton, and Steven H Strogatz. 2010. “Redrawing the Map of Great Britain from a Network of Human Interactions.” PloS One 5 (12): e14248.\n\n\nTranos, Emmanouil, Masood Gheasi, and Peter Nijkamp. 2015. “International Migration: A Global Complex Network.” Environment and Planning B: Planning and Design 42 (1): 4–22."
  },
  {
    "objectID": "src/network_science.html#network-science-the-evolution-of-a-new-science",
    "href": "src/network_science.html#network-science-the-evolution-of-a-new-science",
    "title": "Network science, urban laws and scaling",
    "section": "Network Science: The Evolution of a ‘New’ Science",
    "text": "Network Science: The Evolution of a ‘New’ Science\n\nNot really new\nGraph Theory in the 18th century\nLeonhard Euler’s work on small graphs\nHigh degree of regularity: similar degree centrality among different nodes"
  },
  {
    "objectID": "src/network_science.html#regular-graphs",
    "href": "src/network_science.html#regular-graphs",
    "title": "Network science, urban laws and scaling",
    "section": "Regular graphs",
    "text": "Regular graphs"
  },
  {
    "objectID": "src/network_science.html#st-milestone-random-networks-rn",
    "href": "src/network_science.html#st-milestone-random-networks-rn",
    "title": "Network science, urban laws and scaling",
    "section": "1st milestone: Random networks (RN)",
    "text": "1st milestone: Random networks (RN)\n\n20th Century: advances in mathematics and statistics\nAlgorithmic network analysis\nErdős, Rényi, et al. (1960)\nLarge scale networks with no obvious structure\nNodes degree follows a Poisson distribution: similar degree, close to the average degree , rare exceptions\nRepresentative of real world network?"
  },
  {
    "objectID": "src/network_science.html#st-milestone-random-networks-rn-1",
    "href": "src/network_science.html#st-milestone-random-networks-rn-1",
    "title": "Network science, urban laws and scaling",
    "section": "1st milestone: Random networks (RN)",
    "text": "1st milestone: Random networks (RN)\n\n Source: Watts and Strogatz (1998)"
  },
  {
    "objectID": "src/network_science.html#st-milestone-random-networks-rn-2",
    "href": "src/network_science.html#st-milestone-random-networks-rn-2",
    "title": "Network science, urban laws and scaling",
    "section": "1st milestone: Random networks (RN)",
    "text": "1st milestone: Random networks (RN)\n\n Source: Torres et al. (2009)"
  },
  {
    "objectID": "src/network_science.html#networks-become-important",
    "href": "src/network_science.html#networks-become-important",
    "title": "Network science, urban laws and scaling",
    "section": "Networks become important…",
    "text": "Networks become important…\n\n… in different fields, from social science to biology\nDigitization of data in many different fields + large databases ➔ real world systems as networks\nAdvances in computer science and in computing\nLooseness between different disciplinary boundaries\nReductionist approaches lose ground in favor of holistic research approaches, which try to understand the system as a whole"
  },
  {
    "objectID": "src/network_science.html#nd-milestone-small-worlds",
    "href": "src/network_science.html#nd-milestone-small-worlds",
    "title": "Network science, urban laws and scaling",
    "section": "2nd milestone: Small-worlds",
    "text": "2nd milestone: Small-worlds\n\nSmall world effect\nMilgram’s six degrees of separation (1967)\nBacon number\nShort average distances, enabling nodes to reach each other within a few steps\nCharacteristic of numerous real world networks\nStructural characteristic rather than an organizing principle\nEven RN networks are characterized by short average distances"
  },
  {
    "objectID": "src/network_science.html#nd-milestone-small-worlds-1",
    "href": "src/network_science.html#nd-milestone-small-worlds-1",
    "title": "Network science, urban laws and scaling",
    "section": "2nd milestone: Small-worlds",
    "text": "2nd milestone: Small-worlds\n\nWatts and Strogatz (1998) Small-world (SW) model\nCoexistence of short average distance with high clustering coefficient\nSW networks are located between regular and random networks:\n\nHighly clustered like regular lattices\nSmall distances like random networks\nNode degree distribution is quite similar with the RN and decays exponentially"
  },
  {
    "objectID": "src/network_science.html#nd-milestone-small-worlds-2",
    "href": "src/network_science.html#nd-milestone-small-worlds-2",
    "title": "Network science, urban laws and scaling",
    "section": "2nd milestone: Small-worlds",
    "text": "2nd milestone: Small-worlds\n\nA set of intensively interconnected local clusters, which gain global connectivity via a few links, which span the entire network linking distant clusters\nNodes in SW networks benefit from the high local connectivity and easy distant communication with remote clusters using the intra-cluster links\nProbability of finding a highly connected node decreases exponentially as highly connected nodes are practically absent in RN and SW models"
  },
  {
    "objectID": "src/network_science.html#nd-milestone-small-worlds-3",
    "href": "src/network_science.html#nd-milestone-small-worlds-3",
    "title": "Network science, urban laws and scaling",
    "section": "2nd milestone: Small-worlds",
    "text": "2nd milestone: Small-worlds\n\n Source: Watts and Strogatz (1998)"
  },
  {
    "objectID": "src/network_science.html#nd-milestone-small-worlds-4",
    "href": "src/network_science.html#nd-milestone-small-worlds-4",
    "title": "Network science, urban laws and scaling",
    "section": "2nd milestone: Small-worlds",
    "text": "2nd milestone: Small-worlds\nPros and cons\n\nSocial capital (bridging and bonding)\nDisease spread\nReal world examples?"
  },
  {
    "objectID": "src/network_science.html#rd-milestone-scale-free-sf-networks",
    "href": "src/network_science.html#rd-milestone-scale-free-sf-networks",
    "title": "Network science, urban laws and scaling",
    "section": "3rd milestone: Scale-free (SF) networks",
    "text": "3rd milestone: Scale-free (SF) networks\n\n\nBarabási and Albert (1999)\nVery few super connected nodes and a vast majority of less connected nodes\nSF: nodes degree distribution follows a power law distribution regardless the scale of observation\n2 main formation mechanisms:\n\ngrowth: expansion of networks over time\npreferential attachment: growth is not equally dispersed across the nodes; highly connected nodes are more likely to receive new links than the lower degree nodes"
  },
  {
    "objectID": "src/network_science.html#rd-milestone-scale-free-sf-networks-1",
    "href": "src/network_science.html#rd-milestone-scale-free-sf-networks-1",
    "title": "Network science, urban laws and scaling",
    "section": "3rd milestone: Scale-free (SF) networks",
    "text": "3rd milestone: Scale-free (SF) networks\n\nAn initial difference in the connectivity between two nodes will increase further as the network grows\nThis is a cumulative — rich get richer — process\nThe probability \\(P(k)\\) that a node has a degree \\(k\\) decays following a power function, with usually \\(2 < \\gamma < 3\\)\n\\(P(k)≈𝑘^{−\\gamma}\\)\nPower laws in networks are related with the existence of both of the above two mechanisms\nLater versions of SF models included more realistic options for the network growth"
  },
  {
    "objectID": "src/network_science.html#rd-milestone-scale-free-sf-networks-2",
    "href": "src/network_science.html#rd-milestone-scale-free-sf-networks-2",
    "title": "Network science, urban laws and scaling",
    "section": "3rd milestone: Scale-free (SF) networks",
    "text": "3rd milestone: Scale-free (SF) networks\n\n Source: Albert, Jeong, and Barabási (2000)"
  },
  {
    "objectID": "src/network_science.html#rd-milestone-scale-free-sf-networks-3",
    "href": "src/network_science.html#rd-milestone-scale-free-sf-networks-3",
    "title": "Network science, urban laws and scaling",
    "section": "3rd milestone: Scale-free (SF) networks",
    "text": "3rd milestone: Scale-free (SF) networks"
  },
  {
    "objectID": "src/network_science.html#rd-milestone-scale-free-sf-networks-4",
    "href": "src/network_science.html#rd-milestone-scale-free-sf-networks-4",
    "title": "Network science, urban laws and scaling",
    "section": "3rd milestone: Scale-free (SF) networks",
    "text": "3rd milestone: Scale-free (SF) networks\nAnd finally the power law…"
  },
  {
    "objectID": "src/network_science.html#rd-milestone-scale-free-sf-networks-5",
    "href": "src/network_science.html#rd-milestone-scale-free-sf-networks-5",
    "title": "Network science, urban laws and scaling",
    "section": "3rd milestone: Scale-free (SF) networks",
    "text": "3rd milestone: Scale-free (SF) networks\nPros and cons?\n\nEfficiency\nResilience\nDisease spread prevention\nVulnerability towards targeted attacks\nReal world examples?"
  },
  {
    "objectID": "src/network_science.html#network-science-a-summary",
    "href": "src/network_science.html#network-science-a-summary",
    "title": "Network science, urban laws and scaling",
    "section": "Network Science: a summary",
    "text": "Network Science: a summary\n\nBoth RN and SW have short average distances\nRN cannot be included in SW because they lack the high clustering coefficient\nSF networks share the short average distance and the high cluster coefficient of SW ones, but the SW are not characterized by the scale-free distribution\nAll scale free networks display small world properties, while all small-world networks are not necessarily scale free"
  },
  {
    "objectID": "src/network_science.html#network-science-an-epistemological-discussion",
    "href": "src/network_science.html#network-science-an-epistemological-discussion",
    "title": "Network science, urban laws and scaling",
    "section": "Network science: An epistemological discussion",
    "text": "Network science: An epistemological discussion\n1. Complexity Science\n\nMost studies in the network science domain have a starting point in statistical physics\nStochastic approaches\nUnderlying probability model which usually follows a power law\nMain objective: identification of the underlying mechanisms using generative modeling and simulation\nPotential risk: the probability model might not follow a power law mechanism, which is a common assumption"
  },
  {
    "objectID": "src/network_science.html#network-science-an-epistemological-discussion-1",
    "href": "src/network_science.html#network-science-an-epistemological-discussion-1",
    "title": "Network science, urban laws and scaling",
    "section": "Network science: An epistemological discussion",
    "text": "Network science: An epistemological discussion\n2. Social Network Analysis\n\nSociology and graph theory\nFocus on social networks\nExtensive utilization of network metrics"
  },
  {
    "objectID": "src/network_science.html#network-science-an-epistemological-discussion-2",
    "href": "src/network_science.html#network-science-an-epistemological-discussion-2",
    "title": "Network science, urban laws and scaling",
    "section": "Network science: An epistemological discussion",
    "text": "Network science: An epistemological discussion\n3. Geography and Urban Analytics\n\nSofter’ approaches\nEx-post empirical modeling for identifying characteristics of theoretical network models in real world networks\nGlobal and local network statistics\nUse of network measures in mainstream statistical modeling\nEmpirical verification of the functions that better explain the node degree distribution (power vs. exponential functions)\nSpatial networks, but also dynamic networks"
  },
  {
    "objectID": "src/network_science.html#what-is-scale-and-scaling",
    "href": "src/network_science.html#what-is-scale-and-scaling",
    "title": "Network science, urban laws and scaling",
    "section": "What is scale and scaling",
    "text": "What is scale and scaling\n\n\nScale in geography\nScale in math:\n\n\\(y(x_i)\\) a function of \\(x_i\\) where \\(i\\) is a spatial unit\nIf we scale \\(x\\) by some scalar \\(\\lambda\\), the function scales if its scaled value is proportional to its previous value: \\(y(\\lambda x_i) \\propto y(x_i)\\)\n\\(y(x_i) = x_i^a\\)\n\\(y(\\lambda x_i) = (\\lambda x_i)^a = \\lambda^a x_i^a = \\lambda^a y(x_i)\\)\n➔ Power law"
  },
  {
    "objectID": "src/network_science.html#laws-of-urban-scaling",
    "href": "src/network_science.html#laws-of-urban-scaling",
    "title": "Network science, urban laws and scaling",
    "section": "Laws of urban scaling",
    "text": "Laws of urban scaling\n\nRegularities\nQuantitative revolution post WW2\nCultural turn\n… today …\n\n\nBased on Batty (2013). See also Bettencourt (2021)"
  },
  {
    "objectID": "src/network_science.html#metcalfes-law-moores-law",
    "href": "src/network_science.html#metcalfes-law-moores-law",
    "title": "Network science, urban laws and scaling",
    "section": "Metcalfe’s law / Moore’s law",
    "text": "Metcalfe’s law / Moore’s law\n\nAs cities grow…\n… the number of potential connections increases as the square of population.\n\\(C = p(p-1)/2 \\propto p^2\\)"
  },
  {
    "objectID": "src/network_science.html#von-thunens-law",
    "href": "src/network_science.html#von-thunens-law",
    "title": "Network science, urban laws and scaling",
    "section": "von Thunen’s law",
    "text": "von Thunen’s law\n\nAs cities grow in size …\nland values decline non-linearly from the centre\n\n\nSource: Coe, Kelly, and Yeung (2019)"
  },
  {
    "objectID": "src/network_science.html#law-of-gravitation-toblers-law",
    "href": "src/network_science.html#law-of-gravitation-toblers-law",
    "title": "Network science, urban laws and scaling",
    "section": "Law of gravitation / Tobler’s law",
    "text": "Law of gravitation / Tobler’s law\n\nAs cities grow…\n.. interactions between them decline with increasing distance\nNewton law of gravitation\n\n\nSource: I, Dennis Nilsson, CC BY 3.0, https://commons.wikimedia.org/w/index.php?curid=3455682"
  },
  {
    "objectID": "src/network_science.html#zipf-law",
    "href": "src/network_science.html#zipf-law",
    "title": "Network science, urban laws and scaling",
    "section": "Zipf law",
    "text": "Zipf law\n\nAs cities get larger…\n… there are less of them\nRegularity in the distribution of cities within a country\nEmpirical observation and quantification\nHierarchical urban systems:\n\none/a few big cities\nmore medium size cities\nlarge number of very small cities"
  },
  {
    "objectID": "src/network_science.html#zipf-law-1",
    "href": "src/network_science.html#zipf-law-1",
    "title": "Network science, urban laws and scaling",
    "section": "Zipf law",
    "text": "Zipf law"
  },
  {
    "objectID": "src/network_science.html#zipf-law-2",
    "href": "src/network_science.html#zipf-law-2",
    "title": "Network science, urban laws and scaling",
    "section": "Zipf law",
    "text": "Zipf law"
  },
  {
    "objectID": "src/network_science.html#zipf-law-3",
    "href": "src/network_science.html#zipf-law-3",
    "title": "Network science, urban laws and scaling",
    "section": "Zipf law",
    "text": "Zipf law\n\n\n\nSource: O’sullivan (2012) \n\nRank size rule\n\\(pop_i = pop_d r_i^{-a}\\)\nif \\(a=1\\): Zipf law\n\\(pop_i = pop_d / r_i\\)"
  },
  {
    "objectID": "src/network_science.html#zipf-law-4",
    "href": "src/network_science.html#zipf-law-4",
    "title": "Network science, urban laws and scaling",
    "section": "Zipf law",
    "text": "Zipf law\n\n\n\n\nRank size rule\n\\(pop_i = pop_d r_i^{-a}\\)\nif \\(a=1\\): Zipf law\n\\(pop_i = pop_d / r_i\\)"
  },
  {
    "objectID": "src/network_science.html#zipf-law-5",
    "href": "src/network_science.html#zipf-law-5",
    "title": "Network science, urban laws and scaling",
    "section": "Zipf law",
    "text": "Zipf law\n\nPrimary cities above what a Zipf law would predict\nNewly industrialised countries\nNo overall consensus why the rank-size rule holds\nStatistical regularity or an underpinning micro-economic process?"
  },
  {
    "objectID": "src/network_science.html#bettencourt-west-or-marshalls-law",
    "href": "src/network_science.html#bettencourt-west-or-marshalls-law",
    "title": "Network science, urban laws and scaling",
    "section": "Bettencourt-West or Marshall’s law",
    "text": "Bettencourt-West or Marshall’s law\n\nAs cities grow…\n… their average real income (and wealth) increases more than proportionately (Bettencourt et al. 2007)\n\n\\(Y_i = Y_0P_i^\\beta\\)\n\n\\(Y_i\\): material resources (energy or infrastructure) or social activity (wealth, patents, and pollution) in city \\(i\\)\n\\(Y_o\\): normalization constant\n\\(P_i\\): population of city i\n\\(\\beta\\): exponent"
  },
  {
    "objectID": "src/network_science.html#bettencourt-west-or-marshalls-law-1",
    "href": "src/network_science.html#bettencourt-west-or-marshalls-law-1",
    "title": "Network science, urban laws and scaling",
    "section": "Bettencourt-West or Marshall’s law",
    "text": "Bettencourt-West or Marshall’s law\n\n\n\nSource: Bettencourt et al. (2007) \n\n\nNot surprisingly another straight line\nAnother power law"
  },
  {
    "objectID": "src/network_science.html#bettencourt-west-or-marshalls-law-2",
    "href": "src/network_science.html#bettencourt-west-or-marshalls-law-2",
    "title": "Network science, urban laws and scaling",
    "section": "Bettencourt-West or Marshall’s law",
    "text": "Bettencourt-West or Marshall’s law\n\nSource: Bettencourt et al. (2007)"
  },
  {
    "objectID": "src/network_science.html#bettencourt-west-or-marshalls-law-3",
    "href": "src/network_science.html#bettencourt-west-or-marshalls-law-3",
    "title": "Network science, urban laws and scaling",
    "section": "Bettencourt-West or Marshall’s law",
    "text": "Bettencourt-West or Marshall’s law\n\n\n\n\n An average urban dweller in the capital, Lisbon, has approximately twice as many reciprocated mobile phone contacts, k, as an average individual in the rural town of Lixa.\nSource: Bettencourt (2021)"
  },
  {
    "objectID": "src/network_science.html#bettencourt-west-or-marshalls-law-4",
    "href": "src/network_science.html#bettencourt-west-or-marshalls-law-4",
    "title": "Network science, urban laws and scaling",
    "section": "Bettencourt-West or Marshall’s law",
    "text": "Bettencourt-West or Marshall’s law\n\n\n\n\n\n\n\\(Y=3P^b\\)\n300 random observation\nPlotting the results\nEconomies of scale\n\\(b<1\\) decreasing returns to scale\n\\(b=1\\) constant returns\n\\(b>1\\) increasing returns\nSF networks, economies of scale?"
  },
  {
    "objectID": "src/network_science.html#epilogue",
    "href": "src/network_science.html#epilogue",
    "title": "Network science, urban laws and scaling",
    "section": "Epilogue",
    "text": "Epilogue\nBettencourt (2021):\n\nCities, of course, do not really have their own dynamics; they depend on decisions made by people, corporations, governments, and others. The aggregate statistics of all their decisions will therefore emerge as key and provide another con- nection to the uses of information in urban science."
  },
  {
    "objectID": "src/network_science.html#references",
    "href": "src/network_science.html#references",
    "title": "Network science, urban laws and scaling",
    "section": "References",
    "text": "References\n\n\n\n\n\n\nAlbert, Réka, Hawoong Jeong, and Albert-László Barabási. 2000. “Error and Attack Tolerance of Complex Networks.” Nature 406 (6794): 378–82.\n\n\nBarabási, Albert-László, and Réka Albert. 1999. “Emergence of Scaling in Random Networks.” Science 286 (5439): 509–12.\n\n\nBatty, Michael. 2013. The New Science of Cities. MIT press.\n\n\nBettencourt, Luı́s MA. 2021. “Introduction to Urban Science: Evidence and Theory of Cities as Complex Systems.”\n\n\nBettencourt, Luı́s MA, José Lobo, Dirk Helbing, Christian Kühnert, and Geoffrey B West. 2007. “Growth, Innovation, Scaling, and the Pace of Life in Cities.” Proceedings of the National Academy of Sciences 104 (17): 7301–6.\n\n\nCoe, Neil M, Philip F Kelly, and Henry WC Yeung. 2019. Economic Geography: A Contemporary Introduction. John Wiley & Sons.\n\n\nErdős, Paul, Alfréd Rényi, et al. 1960. “On the Evolution of Random Graphs.” Publ. Math. Inst. Hung. Acad. Sci 5 (1): 17–60.\n\n\nO’sullivan, Arthur. 2012. “Urban Economics 8th Ed.”\n\n\nTorres, Sonia H, Marı́a Montes de Oca, Eduardo Loeb, Priva Zabner-Oziel, Valentina Wallis, and Noelina Hernández. 2009. “Isoenzimas de Lactatodeshidrogenasa En El músculo Esquelético de Pacientes Con EPOC.” Archivos de Bronconeumologı́a 45 (2): 75–80.\n\n\nWatts, Duncan J, and Steven H Strogatz. 1998. “Collective Dynamics of ‘Small-World’networks.” Nature 393 (6684): 440–42."
  },
  {
    "objectID": "src/diversity.html#economic-diversity",
    "href": "src/diversity.html#economic-diversity",
    "title": "Diversity in cities",
    "section": "Economic diversity",
    "text": "Economic diversity\n\nProduction, i.e. firms\nConsumption, i.e. product variety\nLabour pool, i.e. skills in labour market\n\nIn general is a good thing for:\n\nurban economies\nproductivity\nurban and industrial agglomeration"
  },
  {
    "objectID": "src/diversity.html#opposing-forces",
    "href": "src/diversity.html#opposing-forces",
    "title": "Diversity in cities",
    "section": "Opposing forces",
    "text": "Opposing forces\n\nWithin-sector or Marshall–Arrow–Romer (MAR) spillovers\nBetween-sector or Jacobs spillovers\nLarge empirical literature trying to identify the optimal ratio, e.g. Saviotti and Frenken (2008) and Caragliu, Dominicis, and Groot (2016)\nMAR externalities (or spillovers): good for productivity and short-term growth\nJacobean externalities: good for innovation and long-term growth"
  },
  {
    "objectID": "src/diversity.html#opposing-forces-1",
    "href": "src/diversity.html#opposing-forces-1",
    "title": "Diversity in cities",
    "section": "Opposing forces",
    "text": "Opposing forces\nUsing more clear economics terminology (Fujita et al. 1989):\n\nDiverse cities (heterogeneous agglomerations) enjoy economies of scope\nHomogeneous agglomeration enjoy increasing returns from economies of scale"
  },
  {
    "objectID": "src/diversity.html#on-the-ground",
    "href": "src/diversity.html#on-the-ground",
    "title": "Diversity in cities",
    "section": "On the ground",
    "text": "On the ground\n\nAmbiguous concepts\nVariety, diversity, difference: a relative concept of agglomeration and the clustering of activities\nNot only higher ‘abundance’, ‘difference’ or ‘number’, but also the degrees of ‘richness’, ‘concentration’ or ‘evenness’ (Yuo and Tseng 2021)\nDifferent ways to measure (Bettencourt 2021)"
  },
  {
    "objectID": "src/diversity.html#spieces-richness",
    "href": "src/diversity.html#spieces-richness",
    "title": "Diversity in cities",
    "section": "Spieces richness…",
    "text": "Spieces richness…\n\n… aka variety\n\\(D = \\sum_{i}^n p_{i}^0\\)\n\\(p_i\\) is the proportion of data points in the \\(i\\)th category\n\\(n\\) is the number of total categories\nA count of different species / categories / …\n\nInterpretation:\n\nPlurality\nAvailability of options"
  },
  {
    "objectID": "src/diversity.html#shannon-entropy",
    "href": "src/diversity.html#shannon-entropy",
    "title": "Diversity in cities",
    "section": "Shannon entropy",
    "text": "Shannon entropy\n\n\\(H = -\\sum_{i}^n p_{i} \\ln{p_{i}}\\)\n\\(n\\) is the number of total categories\n\\(p_i\\) is the proportion of data points in the \\(i\\)th category\nProbably the most common diversity index.\nInterpretation:\n\nIf one category dominates ➔ less surprise ➔ low entropy\nNo category dominates ➔ more surprise ➔ high entropy"
  },
  {
    "objectID": "src/diversity.html#herfindahl-hirschman-index",
    "href": "src/diversity.html#herfindahl-hirschman-index",
    "title": "Diversity in cities",
    "section": "Herfindahl-Hirschman index",
    "text": "Herfindahl-Hirschman index\n\n\\(HHI = \\sum_{i}^{n}(p_{i}^2)\\)\n\\(p_i\\) is the proportion of data points in the \\(i\\)th category\nConcentration of the market.\nInterpretation:\n\n\\(1/n \\leq HHI \\leq 1\\)\nTwo scenarios:\n\n\n\nHHI_1 = .8^2 + .05^2 + .05^2 + .1^2\nHHI_1\n\n[1] 0.655\n\nHHI_2 = .25^2 + .25^2 + .25^2 + .25^2\nHHI_2\n\n[1] 0.25"
  },
  {
    "objectID": "src/diversity.html#herfindahl-hirschman-index-1",
    "href": "src/diversity.html#herfindahl-hirschman-index-1",
    "title": "Diversity in cities",
    "section": "Herfindahl-Hirschman index",
    "text": "Herfindahl-Hirschman index\n\nCaution: alternative specification\n\\(HHI = 1- \\sum_{i}^{n}(p_{i}^2)\\)"
  },
  {
    "objectID": "src/diversity.html#relatedness",
    "href": "src/diversity.html#relatedness",
    "title": "Diversity in cities",
    "section": "Relatedness",
    "text": "Relatedness\n\nRelatedness spans the continuum between MAR and Jacobs (Hidalgo 2021)\nRelated activities are neither exactly the same nor completely different (Frenken, Van Oort, and Verburg 2007; Boschma et al. 2012)\nWhy? Because:\n\nidentical activities compete for customers and resources,\nno learning between very dissimilar economic activities"
  },
  {
    "objectID": "src/diversity.html#relatedness-1",
    "href": "src/diversity.html#relatedness-1",
    "title": "Diversity in cities",
    "section": "Relatedness",
    "text": "Relatedness\n\nAbsorptive capacity: a firm’s capacity to absorb new knowledge depends on its prior level of related knowledge (Cohen and Levinthal 1990)"
  },
  {
    "objectID": "src/diversity.html#economic-complexity",
    "href": "src/diversity.html#economic-complexity",
    "title": "Diversity in cities",
    "section": "Economic complexity",
    "text": "Economic complexity\n\nLarge scale fine-grained data on economic activities\nLearn about abstract factors of production and the way they combine into outputs\nDimensionality reduction techniques to data on the geography of activities, e.g. employment by industry or patents by technology\nMachine learning and network techniques to predict and explain the economic trajectories of countries, cities and regions\n\nFor a review, check Hidalgo (2021) and Balland et al. (2022)."
  },
  {
    "objectID": "src/diversity.html#measuring-diversity",
    "href": "src/diversity.html#measuring-diversity",
    "title": "Diversity in cities",
    "section": "Measuring diversity",
    "text": "Measuring diversity"
  },
  {
    "objectID": "src/diversity.html#measuring-diversity-1",
    "href": "src/diversity.html#measuring-diversity-1",
    "title": "Diversity in cities",
    "section": "Measuring diversity",
    "text": "Measuring diversity\n\nGo to data.london.gov.uk\nDownload and and save locally the Businesses-in-London.csv\nMake sure you know the file location!\nWe will use the REAT and entropy packages. Check what these packages do here and here.\nInstall them if needed with install.packages(\"packagename\")"
  },
  {
    "objectID": "src/diversity.html#measuring-diversity-2",
    "href": "src/diversity.html#measuring-diversity-2",
    "title": "Diversity in cities",
    "section": "Measuring diversity",
    "text": "Measuring diversity\n\nlibrary(tidyverse)  # for data wrangling\nlibrary(rprojroot)  # for relative paths\nlibrary(REAT)       # for diversity measures\nlibrary(entropy)    # for entropy\nlibrary(cluster)    # for cluster analysis\nlibrary(factoextra) # help functions for clustering \nlibrary(kableExtra) # for nice html tables\nlibrary(dbscan)     # for HDBSCAL\nlibrary(sf)         # for mapping\n\n# This is the project path\npath <- find_rstudio_root_file()\npath.data <- paste0(path, \"/data/businesses-in-london.csv\")\n\nlondon.firms <- read_csv(path.data) \n\nlondon.firms.sum <- london.firms %>% \n  filter(SICCode.SicText_1!=\"None Supplied\") %>% # dropping NAs in essence\n  group_by(oslaua, SICCode.SicText_1) %>%        # grouping by Local Authority and SIC code\n  summarise(n = n()) %>%                         # summarise: n is the number of firms per Local Authority and SIC code\n  mutate(total = sum(n),                         # total equal all firms\n         freq = n / total) %>%                   # just a frequency\n  group_by(oslaua) %>%                           # grouping again only by Local Authority\n  summarise(richness = n_distinct(SICCode.SicText_1), # the number of distinct SIC per Local Authority\n            entropy = entropy(freq, method = \"ML\"),   # entropy for each Local Authority, we did the first group_by() and mutate() to be                                                           able to calculate freq so we can calculate entropy\n            herf = herf(n)) %>%                       # HHI for each local authority\n  arrange(-herf)                                      # sort based on HHI (descending)\n\nlondon.firms.sum %>% kbl() %>%\n  kable_styling(full_width = F) %>%                   # A nice(r) table\n  scroll_box(width = \"800px\", height = \"300px\")\n\n\n\n \n  \n    oslaua \n    richness \n    entropy \n    herf \n  \n \n\n  \n    E09000013 \n    602 \n    4.637865 \n    0.0301165 \n  \n  \n    E09000001 \n    744 \n    4.520774 \n    0.0288396 \n  \n  \n    E09000033 \n    827 \n    4.607933 \n    0.0258339 \n  \n  \n    E09000003 \n    723 \n    4.671225 \n    0.0233361 \n  \n  \n    E09000008 \n    678 \n    4.786546 \n    0.0221182 \n  \n  \n    E09000027 \n    558 \n    4.712318 \n    0.0220274 \n  \n  \n    E09000015 \n    633 \n    4.730619 \n    0.0205194 \n  \n  \n    E09000010 \n    667 \n    4.790814 \n    0.0204714 \n  \n  \n    E09000007 \n    827 \n    4.829186 \n    0.0204085 \n  \n  \n    E09000020 \n    577 \n    4.774282 \n    0.0196181 \n  \n  \n    E09000030 \n    690 \n    4.802693 \n    0.0193494 \n  \n  \n    E09000025 \n    623 \n    4.816502 \n    0.0188794 \n  \n  \n    E09000032 \n    571 \n    4.831936 \n    0.0184425 \n  \n  \n    E09000026 \n    630 \n    4.806874 \n    0.0180738 \n  \n  \n    E09000012 \n    729 \n    4.915068 \n    0.0178886 \n  \n  \n    E09000014 \n    595 \n    4.830779 \n    0.0178559 \n  \n  \n    E09000019 \n    803 \n    4.904964 \n    0.0178424 \n  \n  \n    E09000006 \n    599 \n    4.833756 \n    0.0177523 \n  \n  \n    E09000021 \n    529 \n    4.856868 \n    0.0176720 \n  \n  \n    E09000004 \n    569 \n    4.849445 \n    0.0176348 \n  \n  \n    E09000024 \n    582 \n    4.860828 \n    0.0168338 \n  \n  \n    E09000018 \n    603 \n    4.906424 \n    0.0163947 \n  \n  \n    E09000029 \n    543 \n    4.879529 \n    0.0162662 \n  \n  \n    E09000022 \n    594 \n    4.925276 \n    0.0157286 \n  \n  \n    E09000017 \n    640 \n    4.960676 \n    0.0153900 \n  \n  \n    E09000005 \n    644 \n    4.958913 \n    0.0146799 \n  \n  \n    E09000016 \n    564 \n    4.936603 \n    0.0145663 \n  \n  \n    E09000028 \n    681 \n    4.996227 \n    0.0145643 \n  \n  \n    E09000002 \n    543 \n    4.916217 \n    0.0143203 \n  \n  \n    E09000009 \n    645 \n    4.992793 \n    0.0142574 \n  \n  \n    E09000031 \n    587 \n    4.977460 \n    0.0136438 \n  \n  \n    E09000011 \n    565 \n    4.995980 \n    0.0136430 \n  \n  \n    E09000023 \n    540 \n    5.008342 \n    0.0130329"
  },
  {
    "objectID": "src/diversity.html#measuring-diversity-3",
    "href": "src/diversity.html#measuring-diversity-3",
    "title": "Diversity in cities",
    "section": "Measuring diversity",
    "text": "Measuring diversity\n\n\n\n\n\n\nTip\n\n\nYou don’t know what local authorities these codes refer to. You should download the codes and names and join them with your data from here.\n\n\n\n\n\n\n\n\n\nTip\n\n\nDiscuss what we can learn from this exercise.\nCan you think of a way to understand how different these indices are among London’s Local Authorities?"
  },
  {
    "objectID": "src/diversity.html#measuring-diversity-4",
    "href": "src/diversity.html#measuring-diversity-4",
    "title": "Diversity in cities",
    "section": "Measuring diversity",
    "text": "Measuring diversity\npath.shape <- paste0(path, \"/data/Local_Authority_Districts_(May_2021)_UK_BFE.geojson\")\n\nlondon <- st_read(path.shape, quiet = T) %>%\n  dplyr::filter(LAD21CD %in% (london.firms$oslaua))\n\nlondon <- merge(london, london.firms.sum, by.x = \"LAD21CD\", by.y = \"oslaua\" )\n  \nggplot() +\n  geom_sf(data = london, aes(fill = entropy), color = NA) +\n  labs(\n    title = \"Business diversity in London' Local Autorities\",\n    fill = \"Entropy\") +\n  scale_fill_viridis_c() +\n  theme_void() +\n  theme(plot.title = element_text(hjust = 0.5)) # centres the title"
  },
  {
    "objectID": "src/diversity.html#clustering",
    "href": "src/diversity.html#clustering",
    "title": "Diversity in cities",
    "section": "Clustering",
    "text": "Clustering\n\nReducing the dimensions of the observation space\nClassification of observations into (exclusive) groups\nDistance or (dis)similarity between each pair of observations to create a distance or dissimilarity or matrix\nObservations within the same group are as similar as possible\nBased on Boehmke and Greenwell (2019) available here\nPlenty of other resources online and in textbooks"
  },
  {
    "objectID": "src/diversity.html#clustering-1",
    "href": "src/diversity.html#clustering-1",
    "title": "Diversity in cities",
    "section": "Clustering",
    "text": "Clustering\n\nk-means\nHierarchical clustering"
  },
  {
    "objectID": "src/diversity.html#k-means",
    "href": "src/diversity.html#k-means",
    "title": "Diversity in cities",
    "section": "k-means",
    "text": "k-means\n\n\nk is the number of clusters and is pre-defined\nThe algorithm selects k random observations (starting centres)\nThe remaining observations are assigned to the nearest centre\nRecalculates the new centres\nRe-check cluster assignment\nIterative process to minimise within-cluster variation until convergence\n\n\n\\(SS_{within} = \\sum_{k=1}^k W(C_{k}) = \\sum_{k=1}^k \\sum_{x_i\\in C_K}(x_i-\\mu_k)^2\\)"
  },
  {
    "objectID": "src/diversity.html#k-means-1",
    "href": "src/diversity.html#k-means-1",
    "title": "Diversity in cities",
    "section": "k-means",
    "text": "k-means\nFirst, create an appropriate data frame\n\nla.sic <- london.firms %>% \n  filter(SICCode.SicText_1!=\"None Supplied\") %>% # Drop firms which haven't declared SIC code\n  group_by(oslaua, SICCode.SicText_1) %>%        # Group by Local Authorities and SIC code\n  summarise(n = n()) %>%                         # Summarise; n = number of observations\n  mutate(total = sum(n),                         # New column: total number of observations\n         freq = n / total) %>%                   # New column: frequency\n  arrange(oslaua,-n) %>%                         # Just arrange by Local Authority and descenting order of n\n  select(-n, -total) %>%                         # Drop n and total, we don't need them any more.\n  pivot_wider(names_from = SICCode.SicText_1, values_from = freq) %>% # Data transformation: from long to wide. Have a look: https://tidyr.tidyverse.org/reference/pivot_wider.html\n  replace(is.na(.), 0)                          # Replace any missing values with 0 as missing value represent SIC codes with 0 frequency\n\nla.sic %>%  \n  select(1:20) %>%  # Select the first 20 columns as there 1037 in total\n  kbl() %>%\n  kable_styling()   # Nice(r) table\n\n\n\n \n  \n    oslaua \n    82990 - Other business support service activities n.e.c. \n    64209 - Activities of other holding companies n.e.c. \n    70229 - Management consultancy activities other than financial management \n    64999 - Financial intermediation not elsewhere classified \n    99999 - Dormant Company \n    74990 - Non-trading company \n    70100 - Activities of head offices \n    68209 - Other letting and operating of own or leased real estate \n    62020 - Information technology consultancy activities \n    68100 - Buying and selling of own real estate \n    65120 - Non-life insurance \n    96090 - Other service activities n.e.c. \n    41100 - Development of building projects \n    62012 - Business and domestic software development \n    62090 - Other information technology service activities \n    35110 - Production of electricity \n    64205 - Activities of financial services holding companies \n    74909 - Other professional, scientific and technical activities n.e.c. \n    65110 - Life insurance \n  \n \n\n  \n    E09000001 \n    0.1108145 \n    0.0606884 \n    0.0401823 \n    0.0379038 \n    0.0363252 \n    0.0361787 \n    0.0271462 \n    0.0261046 \n    0.0247376 \n    0.0239889 \n    0.0239238 \n    0.0232403 \n    0.0208642 \n    0.0198714 \n    0.0193018 \n    0.0183579 \n    0.0161282 \n    0.0155586 \n    0.0117829 \n  \n  \n    E09000002 \n    0.0270344 \n    0.0027363 \n    0.0241340 \n    0.0024626 \n    0.0061840 \n    0.0026816 \n    0.0013681 \n    0.0173480 \n    0.0254474 \n    0.0313030 \n    0.0001095 \n    0.0348602 \n    0.0163629 \n    0.0068954 \n    0.0107262 \n    0.0000547 \n    0.0004378 \n    0.0078258 \n    0.0000547 \n  \n  \n    E09000003 \n    0.0600694 \n    0.0131911 \n    0.0403222 \n    0.0081328 \n    0.0314536 \n    0.0152407 \n    0.0037313 \n    0.0658109 \n    0.0258041 \n    0.0686751 \n    0.0003942 \n    0.0442374 \n    0.0313223 \n    0.0093678 \n    0.0109181 \n    0.0010511 \n    0.0012876 \n    0.0106816 \n    0.0003022 \n  \n  \n    E09000004 \n    0.0714510 \n    0.0073915 \n    0.0429860 \n    0.0039316 \n    0.0150975 \n    0.0074963 \n    0.0025163 \n    0.0291466 \n    0.0347033 \n    0.0404173 \n    0.0004718 \n    0.0300377 \n    0.0214406 \n    0.0071818 \n    0.0114280 \n    0.0004194 \n    0.0004194 \n    0.0112183 \n    0.0001573 \n  \n  \n    E09000005 \n    0.0357725 \n    0.0060626 \n    0.0302829 \n    0.0057610 \n    0.0234964 \n    0.0061229 \n    0.0027749 \n    0.0451228 \n    0.0273572 \n    0.0451529 \n    0.0002111 \n    0.0339326 \n    0.0193039 \n    0.0080533 \n    0.0110394 \n    0.0003318 \n    0.0006937 \n    0.0120951 \n    0.0000603 \n  \n  \n    E09000006 \n    0.0475336 \n    0.0079285 \n    0.0482441 \n    0.0065073 \n    0.0258798 \n    0.0078537 \n    0.0035529 \n    0.0407644 \n    0.0376977 \n    0.0391937 \n    0.0012716 \n    0.0269270 \n    0.0253562 \n    0.0119675 \n    0.0129773 \n    0.0002618 \n    0.0007854 \n    0.0157448 \n    0.0001870 \n  \n  \n    E09000007 \n    0.0541925 \n    0.0147704 \n    0.0451042 \n    0.0091985 \n    0.0176188 \n    0.0095582 \n    0.0063354 \n    0.0248425 \n    0.0352450 \n    0.0353404 \n    0.0002790 \n    0.0431734 \n    0.0260612 \n    0.0269274 \n    0.0163561 \n    0.0019454 \n    0.0036706 \n    0.0121643 \n    0.0001688 \n  \n  \n    E09000008 \n    0.0358566 \n    0.0042869 \n    0.0328511 \n    0.0057082 \n    0.0886745 \n    0.0097621 \n    0.0027492 \n    0.0308940 \n    0.0316861 \n    0.0352275 \n    0.0002563 \n    0.0260246 \n    0.0205261 \n    0.0105543 \n    0.0156800 \n    0.0003728 \n    0.0027026 \n    0.0091098 \n    0.0002097 \n  \n  \n    E09000009 \n    0.0325698 \n    0.0062051 \n    0.0333419 \n    0.0044036 \n    0.0177290 \n    0.0084928 \n    0.0036602 \n    0.0394327 \n    0.0277087 \n    0.0445226 \n    0.0002002 \n    0.0352864 \n    0.0220468 \n    0.0095222 \n    0.0106374 \n    0.0002860 \n    0.0011152 \n    0.0100369 \n    0.0000858 \n  \n  \n    E09000010 \n    0.0361647 \n    0.0106993 \n    0.0303793 \n    0.0056159 \n    0.0855462 \n    0.0089807 \n    0.0024207 \n    0.0462347 \n    0.0218102 \n    0.0379076 \n    0.0004115 \n    0.0357532 \n    0.0213987 \n    0.0127811 \n    0.0115466 \n    0.0002421 \n    0.0017913 \n    0.0091501 \n    0.0002421 \n  \n  \n    E09000011 \n    0.0352018 \n    0.0036909 \n    0.0420300 \n    0.0038754 \n    0.0134717 \n    0.0044752 \n    0.0021223 \n    0.0251903 \n    0.0373702 \n    0.0333564 \n    0.0003691 \n    0.0352480 \n    0.0183622 \n    0.0120877 \n    0.0130104 \n    0.0004614 \n    0.0014302 \n    0.0120415 \n    0.0000923 \n  \n  \n    E09000012 \n    0.0512285 \n    0.0097657 \n    0.0496767 \n    0.0063622 \n    0.0329695 \n    0.0031242 \n    0.0022862 \n    0.0412559 \n    0.0384524 \n    0.0476801 \n    0.0002897 \n    0.0205038 \n    0.0148865 \n    0.0235245 \n    0.0167486 \n    0.0015621 \n    0.0025449 \n    0.0118450 \n    0.0000621 \n  \n  \n    E09000013 \n    0.0423722 \n    0.0123893 \n    0.0448190 \n    0.0076899 \n    0.0190306 \n    0.0101755 \n    0.0087774 \n    0.1304179 \n    0.0213220 \n    0.0310704 \n    0.0001554 \n    0.0332453 \n    0.0167780 \n    0.0116126 \n    0.0129719 \n    0.0013982 \n    0.0015147 \n    0.0148361 \n    0.0000388 \n  \n  \n    E09000014 \n    0.0339895 \n    0.0056534 \n    0.0407460 \n    0.0045848 \n    0.0256127 \n    0.0055500 \n    0.0031370 \n    0.0527423 \n    0.0272674 \n    0.0578096 \n    0.0001379 \n    0.0438829 \n    0.0167879 \n    0.0113758 \n    0.0085491 \n    0.0003792 \n    0.0009307 \n    0.0091696 \n    0.0000345 \n  \n  \n    E09000015 \n    0.0486010 \n    0.0124162 \n    0.0466257 \n    0.0083570 \n    0.0189498 \n    0.0074019 \n    0.0031692 \n    0.0576744 \n    0.0423495 \n    0.0634049 \n    0.0002605 \n    0.0342313 \n    0.0266123 \n    0.0127418 \n    0.0140876 \n    0.0002171 \n    0.0012373 \n    0.0184940 \n    0.0001954 \n  \n  \n    E09000016 \n    0.0449873 \n    0.0058253 \n    0.0335324 \n    0.0070981 \n    0.0186019 \n    0.0052379 \n    0.0017623 \n    0.0327981 \n    0.0270217 \n    0.0414137 \n    0.0008811 \n    0.0315743 \n    0.0251126 \n    0.0092520 \n    0.0097415 \n    0.0000979 \n    0.0009301 \n    0.0105248 \n    0.0000979 \n  \n  \n    E09000017 \n    0.0340671 \n    0.0094125 \n    0.0317595 \n    0.0047062 \n    0.0160012 \n    0.0068316 \n    0.0052528 \n    0.0389252 \n    0.0357674 \n    0.0526188 \n    0.0003036 \n    0.0352513 \n    0.0235616 \n    0.0123273 \n    0.0135722 \n    0.0002429 \n    0.0015181 \n    0.0123577 \n    0.0002429 \n  \n  \n    E09000018 \n    0.0348997 \n    0.0088552 \n    0.0347881 \n    0.0054322 \n    0.0130223 \n    0.0102690 \n    0.0069576 \n    0.0298396 \n    0.0549540 \n    0.0416341 \n    0.0002232 \n    0.0361275 \n    0.0193474 \n    0.0161848 \n    0.0141385 \n    0.0004093 \n    0.0013766 \n    0.0104178 \n    0.0001488 \n  \n  \n    E09000019 \n    0.0509646 \n    0.0133515 \n    0.0490896 \n    0.0090981 \n    0.0198825 \n    0.0094630 \n    0.0062919 \n    0.0248783 \n    0.0370846 \n    0.0317616 \n    0.0005537 \n    0.0470006 \n    0.0223615 \n    0.0277725 \n    0.0190771 \n    0.0017617 \n    0.0040646 \n    0.0131753 \n    0.0002139 \n  \n  \n    E09000020 \n    0.0499206 \n    0.0187149 \n    0.0547281 \n    0.0133494 \n    0.0227926 \n    0.0141649 \n    0.0104735 \n    0.0411641 \n    0.0188866 \n    0.0365712 \n    0.0002575 \n    0.0403056 \n    0.0202601 \n    0.0148517 \n    0.0121475 \n    0.0031335 \n    0.0041207 \n    0.0146371 \n    0.0000000 \n  \n  \n    E09000021 \n    0.0478516 \n    0.0081613 \n    0.0512695 \n    0.0039063 \n    0.0151367 \n    0.0095564 \n    0.0043248 \n    0.0353655 \n    0.0399693 \n    0.0358538 \n    0.0006975 \n    0.0272740 \n    0.0177176 \n    0.0142997 \n    0.0145787 \n    0.0002790 \n    0.0014648 \n    0.0150670 \n    0.0002790 \n  \n  \n    E09000022 \n    0.0335485 \n    0.0086577 \n    0.0420129 \n    0.0044448 \n    0.0180111 \n    0.0090055 \n    0.0052951 \n    0.0372976 \n    0.0252773 \n    0.0306497 \n    0.0001546 \n    0.0331620 \n    0.0143006 \n    0.0117497 \n    0.0112472 \n    0.0028215 \n    0.0009276 \n    0.0134890 \n    0.0000773 \n  \n  \n    E09000023 \n    0.0320543 \n    0.0035557 \n    0.0378921 \n    0.0041925 \n    0.0113570 \n    0.0044579 \n    0.0016982 \n    0.0268535 \n    0.0312583 \n    0.0294008 \n    0.0000531 \n    0.0311522 \n    0.0145412 \n    0.0110917 \n    0.0118877 \n    0.0001061 \n    0.0013268 \n    0.0110917 \n    0.0000531 \n  \n  \n    E09000024 \n    0.0354735 \n    0.0083443 \n    0.0490793 \n    0.0051381 \n    0.0251973 \n    0.0069878 \n    0.0037817 \n    0.0349803 \n    0.0517511 \n    0.0415571 \n    0.0005344 \n    0.0318563 \n    0.0206347 \n    0.0218267 \n    0.0152088 \n    0.0011098 \n    0.0009865 \n    0.0107284 \n    0.0001644 \n  \n  \n    E09000025 \n    0.0443489 \n    0.0029330 \n    0.0243489 \n    0.0040202 \n    0.0653097 \n    0.0060430 \n    0.0018710 \n    0.0201770 \n    0.0310999 \n    0.0305689 \n    0.0001517 \n    0.0287737 \n    0.0136030 \n    0.0141087 \n    0.0113780 \n    0.0001264 \n    0.0010619 \n    0.0068015 \n    0.0001517 \n  \n  \n    E09000026 \n    0.0483713 \n    0.0060341 \n    0.0313726 \n    0.0041454 \n    0.0177836 \n    0.0118475 \n    0.0019133 \n    0.0443240 \n    0.0351011 \n    0.0608320 \n    0.0003434 \n    0.0384615 \n    0.0226403 \n    0.0095418 \n    0.0106211 \n    0.0001962 \n    0.0008830 \n    0.0094192 \n    0.0001472 \n  \n  \n    E09000027 \n    0.0492061 \n    0.0080081 \n    0.0828589 \n    0.0082396 \n    0.0301810 \n    0.0121742 \n    0.0049067 \n    0.0392075 \n    0.0431422 \n    0.0453641 \n    0.0007406 \n    0.0244410 \n    0.0208767 \n    0.0152294 \n    0.0154145 \n    0.0006018 \n    0.0010647 \n    0.0200435 \n    0.0002314 \n  \n  \n    E09000028 \n    0.0530189 \n    0.0184414 \n    0.0437391 \n    0.0094275 \n    0.0362030 \n    0.0226084 \n    0.0137424 \n    0.0285782 \n    0.0310016 \n    0.0226084 \n    0.0004433 \n    0.0282235 \n    0.0125307 \n    0.0165204 \n    0.0143630 \n    0.0043148 \n    0.0039306 \n    0.0142152 \n    0.0001773 \n  \n  \n    E09000029 \n    0.0425879 \n    0.0045226 \n    0.0459799 \n    0.0059673 \n    0.0157663 \n    0.0069724 \n    0.0035176 \n    0.0339824 \n    0.0466080 \n    0.0415829 \n    0.0005025 \n    0.0298995 \n    0.0246859 \n    0.0138191 \n    0.0140704 \n    0.0002513 \n    0.0020101 \n    0.0120603 \n    0.0000628 \n  \n  \n    E09000030 \n    0.0652078 \n    0.0159285 \n    0.0484445 \n    0.0199271 \n    0.0342956 \n    0.0172467 \n    0.0089199 \n    0.0253977 \n    0.0509271 \n    0.0293084 \n    0.0007250 \n    0.0367343 \n    0.0160603 \n    0.0187187 \n    0.0393927 \n    0.0019554 \n    0.0097109 \n    0.0105457 \n    0.0001977 \n  \n  \n    E09000031 \n    0.0310170 \n    0.0067606 \n    0.0308121 \n    0.0036876 \n    0.0120052 \n    0.0036057 \n    0.0014750 \n    0.0304024 \n    0.0251168 \n    0.0375727 \n    0.0002049 \n    0.0402360 \n    0.0259772 \n    0.0095059 \n    0.0092190 \n    0.0006556 \n    0.0009424 \n    0.0093420 \n    0.0000410 \n  \n  \n    E09000032 \n    0.0381731 \n    0.0072472 \n    0.0655832 \n    0.0074624 \n    0.0180461 \n    0.0091845 \n    0.0041976 \n    0.0402540 \n    0.0311771 \n    0.0355900 \n    0.0003946 \n    0.0311771 \n    0.0202346 \n    0.0123417 \n    0.0119470 \n    0.0008969 \n    0.0018297 \n    0.0158935 \n    0.0000359 \n  \n  \n    E09000033 \n    0.0871492 \n    0.0369990 \n    0.0475242 \n    0.0180250 \n    0.0727706 \n    0.0228702 \n    0.0137720 \n    0.0385974 \n    0.0192951 \n    0.0375056 \n    0.0004424 \n    0.0307623 \n    0.0292781 \n    0.0150850 \n    0.0143358 \n    0.0047239 \n    0.0074997 \n    0.0153490 \n    0.0001570"
  },
  {
    "objectID": "src/diversity.html#k-means-2",
    "href": "src/diversity.html#k-means-2",
    "title": "Diversity in cities",
    "section": "k-means",
    "text": "k-means\n\nkclust = kmeans(la.sic[,-1], centers = 10, nstart = 10) # be aware of the [,-1]\nstr(kclust)\n\nList of 9\n $ cluster     : int [1:33] 6 4 7 8 4 1 5 2 4 2 ...\n $ centers     : num [1:10, 1:1036] 0.0444 0.036 0.0443 0.0361 0.0521 ...\n  ..- attr(*, \"dimnames\")=List of 2\n  .. ..$ : chr [1:10] \"1\" \"2\" \"3\" \"4\" ...\n  .. ..$ : chr [1:1036] \"82990 - Other business support service activities n.e.c.\" \"64209 - Activities of other holding companies n.e.c.\" \"70229 - Management consultancy activities other than financial management\" \"64999 - Financial intermediation not elsewhere classified\" ...\n $ totss       : num 0.0945\n $ withinss    : num [1:10] 0.0042 0.00182 0 0.00609 0.0019 ...\n $ tot.withinss: num 0.0235\n $ betweenss   : num 0.071\n $ size        : int [1:10] 6 2 1 8 3 2 3 5 2 1\n $ iter        : int 3\n $ ifault      : int 0\n - attr(*, \"class\")= chr \"kmeans\"\n\n\ncenters is 10 x 1036: 1036 is the number of SIC codes."
  },
  {
    "objectID": "src/diversity.html#choosing-k",
    "href": "src/diversity.html#choosing-k",
    "title": "Diversity in cities",
    "section": "Choosing k",
    "text": "Choosing k\n\nRule of thumb: \\(k = \\sqrt{n/2}\\)\nThe elbow method\n\nCompute k-means clustering for different values of k\nCalculate \\(SS_{within}\\)\nPlot and spot the loction of a bend"
  },
  {
    "objectID": "src/diversity.html#choosing-k-1",
    "href": "src/diversity.html#choosing-k-1",
    "title": "Diversity in cities",
    "section": "Choosing k",
    "text": "Choosing k\n\nfviz_nbclust(\n  la.sic[,-1], \n  kmeans, \n  k.max = 20,\n  method = \"wss\"\n)"
  },
  {
    "objectID": "src/diversity.html#hierarchical-clustering",
    "href": "src/diversity.html#hierarchical-clustering",
    "title": "Diversity in cities",
    "section": "Hierarchical clustering",
    "text": "Hierarchical clustering\n\n\n\n Source: @boehmke2019hands \n\n\nAgglomerative clustering (AGNES – AGglomerative NESting)\nDivisive hierarchical clustering (DIANA – DIvise ANAlysis)\n\nDissimilarity (distance) of observations"
  },
  {
    "objectID": "src/diversity.html#hierarchical-clustering-1",
    "href": "src/diversity.html#hierarchical-clustering-1",
    "title": "Diversity in cities",
    "section": "Hierarchical clustering",
    "text": "Hierarchical clustering\n\n# distances between observations\nd <- dist(la.sic)\n\n# creates labels for the dendrogam\nl <- london.firms %>% distinct(oslaua) %>% arrange(oslaua)\n\nhclust = hclust(d)\n\nplot(hclust, hang=-1, labels=l$oslaua, main='Default from hclust') \n\n#hang: the fraction of the plot height by which labels should hang below the rest of the plot. A negative value will cause the labels to hang down from 0."
  },
  {
    "objectID": "src/diversity.html#optimal-number-of-clusters",
    "href": "src/diversity.html#optimal-number-of-clusters",
    "title": "Diversity in cities",
    "section": "Optimal number of clusters",
    "text": "Optimal number of clusters"
  },
  {
    "objectID": "src/diversity.html#optimal-number-of-clusters-1",
    "href": "src/diversity.html#optimal-number-of-clusters-1",
    "title": "Diversity in cities",
    "section": "Optimal number of clusters",
    "text": "Optimal number of clusters\n\n\n\n\n\n\nTip\n\n\nExplore what the 2 cluster solution tells us about London?"
  },
  {
    "objectID": "src/diversity.html#clusters-in-space",
    "href": "src/diversity.html#clusters-in-space",
    "title": "Diversity in cities",
    "section": "Clusters in space",
    "text": "Clusters in space\n\nCreate a SIC frequency table\n\n\n# This will build an SIC frequency table\nlondon.firms %>% \n  group_by(SICCode.SicText_1) %>% \n  summarise(n=n()) %>% \n  arrange(-n) %>% \n  glimpse()\n\nRows: 1,037\nColumns: 2\n$ SICCode.SicText_1 <chr> \"82990 - Other business support service activities n…\n$ n                 <int> 72756, 58526, 55309, 52058, 46572, 45312, 44270, 439…"
  },
  {
    "objectID": "src/diversity.html#clusters-in-space-1",
    "href": "src/diversity.html#clusters-in-space-1",
    "title": "Diversity in cities",
    "section": "Clusters in space",
    "text": "Clusters in space\n\nFocus on, let’s say “70221 - Financial management”\n\n\nlondon.firms.sample <- london.firms %>% \n  filter(SICCode.SicText_1==\"70221 - Financial management\") %>% \n  select(oseast1m, osnrth1m) %>% \n  drop_na()"
  },
  {
    "objectID": "src/diversity.html#financial-management-in-london",
    "href": "src/diversity.html#financial-management-in-london",
    "title": "Diversity in cities",
    "section": "Financial management in London",
    "text": "Financial management in London\n\nplot(london.firms.sample)"
  },
  {
    "objectID": "src/diversity.html#clusters-in-space-k-means",
    "href": "src/diversity.html#clusters-in-space-k-means",
    "title": "Diversity in cities",
    "section": "Clusters in space, k-means",
    "text": "Clusters in space, k-means\n\nfviz_nbclust(\n  london.firms.sample, \n  kmeans, \n  k.max = 10,\n  method = \"wss\"\n)"
  },
  {
    "objectID": "src/diversity.html#clusters-in-space-k-means-1",
    "href": "src/diversity.html#clusters-in-space-k-means-1",
    "title": "Diversity in cities",
    "section": "Clusters in space, k-means",
    "text": "Clusters in space, k-means\n\nsp.cluster = kmeans(london.firms.sample, 6) \n\nplot(london.firms.sample, col = sp.cluster$cluster)"
  },
  {
    "objectID": "src/diversity.html#clusters-in-space-hdbscan",
    "href": "src/diversity.html#clusters-in-space-hdbscan",
    "title": "Diversity in cities",
    "section": "Clusters in space, hdbscan",
    "text": "Clusters in space, hdbscan\n\nTransform the space according to the density/sparsity\nBuild the minimum spanning tree of the distance weighted graph\nConstruct a cluster hierarchy of connected components\nCondense the cluster hierarchy based on minimum cluster size\nExtract the stable clusters from the condensed tree.\n\nResources: SciKit-learn docs and dbscan package"
  },
  {
    "objectID": "src/diversity.html#clusters-in-space-hdbscan-1",
    "href": "src/diversity.html#clusters-in-space-hdbscan-1",
    "title": "Diversity in cities",
    "section": "Clusters in space, hdbscan",
    "text": "Clusters in space, hdbscan\n\ncl <- hdbscan(london.firms.sample, \n              minPts = 10)         #minimum size of clusters\n\nplot(london.firms.sample, col=cl$cluster+1, pch=20)"
  },
  {
    "objectID": "src/diversity.html#references",
    "href": "src/diversity.html#references",
    "title": "Diversity in cities",
    "section": "References",
    "text": "References\n\n\n\n\n\n\nBalland, Pierre-Alexandre, Tom Broekel, Dario Diodato, Elisa Giuliani, Ricardo Hausmann, Neave O’Clery, and David Rigby. 2022. “The New Paradigm of Economic Complexity.” Research Policy 51 (3): 104450.\n\n\nBettencourt, Luı́s MA. 2021. “Introduction to Urban Science: Evidence and Theory of Cities as Complex Systems.”\n\n\nBoehmke, Brad, and Brandon Greenwell. 2019. Hands-on Machine Learning with r. Chapman; Hall/CRC.\n\n\nBoschma, Ron, Koen Frenken, H Bathelt, M Feldman, D Kogler, et al. 2012. “Technological Relatedness and Regional Branching.” Beyond Territory. Dynamic Geographies of Knowledge Creation, Diffusion and Innovation 29: 64–68.\n\n\nCaragliu, Andrea, Laura de Dominicis, and Henri LF de Groot. 2016. “Both Marshall and Jacobs Were Right!” Economic Geography 92 (1): 87–111.\n\n\nCohen, Wesley M, and Daniel A Levinthal. 1990. “Absorptive Capacity: A New Perspective on Learning and Innovation.” Administrative Science Quarterly, 128–52.\n\n\nFrenken, Koen, Frank Van Oort, and Thijs Verburg. 2007. “Related Variety, Unrelated Variety and Regional Economic Growth.” Regional Studies 41 (5): 685–97.\n\n\nFujita, Masahisa et al. 1989. “Urban Economic Theory.” Cambridge Books.\n\n\nHidalgo, César A. 2021. “Economic Complexity Theory and Applications.” Nature Reviews Physics 3 (2): 92–113.\n\n\nSaviotti, Pier Paolo, and Koen Frenken. 2008. “Export Variety and the Economic Performance of Countries.” Journal of Evolutionary Economics 18 (2): 201–18.\n\n\nYuo, Tony Shun-Te, and Tzuhui Angie Tseng. 2021. “The Environmental Product Variety and Retail Rents on Central Urban Shopping Areas: A Multi-Stage Spatial Data Mining Method.” Environment and Planning B: Urban Analytics and City Science 48 (8): 2167–87."
  },
  {
    "objectID": "src/apis.html",
    "href": "src/apis.html",
    "title": "APIs and urban data",
    "section": "",
    "text": "Understand the technicalities and the breadth of the urban data landscape\nUnderstand the messiness of real world (urban) data\nAccess programmatically urban data and understand the benefits of such data access practise."
  },
  {
    "objectID": "src/apis.html#apis",
    "href": "src/apis.html#apis",
    "title": "APIs and urban data",
    "section": "APIs",
    "text": "APIs\nApplication Programming Interface (APIs) represent a ‘gate’ or otherwise a platform that enables a client (that is you) to interact with a server (for example opendata.bristol.gov.uk. According to AWS (2022):\n\nIn the context of APIs, the word Application refers to any software with a distinct function. Interface can be thought of as a contract of service between two applications. This contract defines how the two communicate with each other using requests and responses. Their API documentation contains information on how developers are to structure those requests and responses.\n\nThe client’s software (this might be R for example) sends a request to the server requesting specific data. The response is the data the client asked.\nMore commonly, the client might be a mobile phone app (e.g. train network status app) and the server is the network operator’s server.\nAPIs can be private or public types. For more inthe description from AWS (2022) here"
  },
  {
    "objectID": "src/apis.html#json-file-format",
    "href": "src/apis.html#json-file-format",
    "title": "APIs and urban data",
    "section": "JSON file format",
    "text": "JSON file format\nAlthough some urban data can be downloaded as a tidy1 table in a .csv format, most APIs will ship data to you in a JSON format.\nAccording to the official JSON website (JSON), JSON\n\nis a lightweight data-interchange format. It is easy for humans to read and write. It is easy for machines to parse and generate. It is based on a subset of the JavaScript Programming Language Standard ECMA-262 3rd Edition - December 1999. JSON is a text format that is completely language independent but uses conventions that are familiar to programmers of the C-family of languages, including C, C++, C#, Java, JavaScript, Perl, Python, and many others. These properties make JSON an ideal data-interchange language.\n\nIt adopts a hierarchical structure such as attribute:value instead of the fixed structure of tidy data. Following Singleton, Spielman, and Folch (2017), such attribute:value pairs might be:\n\n“mean income”:“50000”\n“internet speed”:“35”\n“jobs”:“15000”\n\nThese attributes might be organised hierarchically:\n(“city”:“Bristol,”mean income”: “27000”, “internet speed”: “55”, “jobs”:(“2019”:“15000”, “2020”:“14000”)), (“city”:“Newcastle,”mean income”: “25000”, “internet speed”: “45”, “jobs”:(“2019”:“11000”, “2020”:“10000”))\nAlthough this format is more verbose (attribute names are repeated) it is more flexible (not all observations need to have all attributes) (Singleton, Spielman, and Folch 2017)"
  },
  {
    "objectID": "src/apis.html#practical-example-with-api",
    "href": "src/apis.html#practical-example-with-api",
    "title": "APIs and urban data",
    "section": "Practical example with API",
    "text": "Practical example with API\nopendata.bristol.gov.uk offers a lot of data about Bristol. For this example, let’s try to work with Jobs by Ward (by industry) in Bristol 2020. As you can see, this is a small data set with \\(35\\) observations representing Bristol’s \\(35\\) Wards. You can visualise these data with the Table tab and even download a .csv with these data. To begin with, do both of these things.\nThen, go to the API tab. Change the rows you want to include in you API request from 10, which is the default here to 35, which is the maximum as we already know. Then clink on the Submit button and below that you will see a new link. This URL is your API request. If you carefully read the URL from right to left you can easily recognise the fields you saw on the previous screen. The weird output on your screen is the data you requested in JSON format.\n\n\n\nQuestion: Why should you go through all these efforts to build an API request and download the data in JSON file format instead of just downloading a .csv file?\n\n\n\nSo, let’s try to access these data programmatically. First, we need to load the relevant R packages\n\nlibrary(tidyverse)\nlibrary(jsonlite)\n\nTo access the data, we are going to use the function fromJSON() from the jsonlite package. Please check the syntax of this function as well as the other function of this package.\n\ndat <- jsonlite::fromJSON(\"https://opendata.bristol.gov.uk/api/records/1.0/search/?dataset=jobs-by-ward-by-industry-in-bristol-2020&q=&rows=35&facet=ward\", flatten = TRUE)\n\nWe now have an R object called dat. Let’s try to see how it looks like\n\ntypeof(dat)\n\n[1] \"list\"\n\n\nSo, this is a list. If you need a reminder for what a list is, see here. Now the difficult part. Let’s try to figure out the structure of this JSON formated data.\n\nstr(dat)\n\nList of 4\n $ nhits       : int 35\n $ parameters  :List of 6\n  ..$ dataset : chr \"jobs-by-ward-by-industry-in-bristol-2020\"\n  ..$ rows    : int 35\n  ..$ start   : int 0\n  ..$ facet   : chr \"ward\"\n  ..$ format  : chr \"json\"\n  ..$ timezone: chr \"UTC\"\n $ records     :'data.frame':   35 obs. of  24 variables:\n  ..$ datasetid                                          : chr [1:35] \"jobs-by-ward-by-industry-in-bristol-2020\" \"jobs-by-ward-by-industry-in-bristol-2020\" \"jobs-by-ward-by-industry-in-bristol-2020\" \"jobs-by-ward-by-industry-in-bristol-2020\" ...\n  ..$ recordid                                           : chr [1:35] \"8f1ee37587a2233922bfa38b048879368059502e\" \"464799297e1d1af8bb980450d062c7eedb787042\" \"4cf81b7e8c57fc61c73eb40c4d4556446d20896c\" \"e034ff06e7c7d67f6f716c41e8ccd940a36d41fd\" ...\n  ..$ record_timestamp                                   : chr [1:35] \"2021-12-22T11:29:00.712Z\" \"2021-12-22T11:29:00.712Z\" \"2021-12-22T11:29:00.712Z\" \"2021-12-22T11:29:00.712Z\" ...\n  ..$ fields.mining_quarrying_utilities                  : int [1:35] 10 0 0 0 0 10 0 30 2250 0 ...\n  ..$ fields.transport_storage_inc_postal                : int [1:35] 20 0 350 15 200 50 100 600 1750 300 ...\n  ..$ fields.accommodation_food_services                 : int [1:35] 100 150 175 800 700 175 400 400 6000 300 ...\n  ..$ fields.public_administration_defence               : int [1:35] 0 0 0 10 50 0 0 400 9000 200 ...\n  ..$ fields.agriculture_forestry_fishing                : int [1:35] 0 0 0 0 0 0 0 0 0 0 ...\n  ..$ fields.business_administration_support_services    : int [1:35] 125 75 1250 1750 450 225 500 450 11000 125 ...\n  ..$ fields.retail                                      : int [1:35] 700 100 200 700 900 75 800 1500 4500 500 ...\n  ..$ fields.property                                    : int [1:35] 10 15 20 450 175 75 200 30 1750 30 ...\n  ..$ fields.health                                      : int [1:35] 150 125 125 450 500 500 2000 900 12000 1500 ...\n  ..$ fields.motor_trades                                : int [1:35] 125 30 300 30 350 20 40 600 200 40 ...\n  ..$ fields.manufacturing                               : int [1:35] 150 25 900 25 400 5 75 500 500 50 ...\n  ..$ fields.information_communication                   : int [1:35] 225 200 400 800 350 175 450 700 10000 50 ...\n  ..$ fields.education                                   : int [1:35] 350 250 400 200 350 175 1000 500 9000 800 ...\n  ..$ fields.ward_code                                   : chr [1:35] \"E05010889\" \"E05010918\" \"E05010890\" \"E05010894\" ...\n  ..$ fields.financial_insurance                         : int [1:35] 1500 10 10 600 50 10 75 15 8000 35 ...\n  ..$ fields.ward                                        : chr [1:35] \"Bishopsworth\" \"Windmill Hill\" \"Brislington East\" \"Clifton Down\" ...\n  ..$ fields.period                                      : chr [1:35] \"2020\" \"2020\" \"2020\" \"2020\" ...\n  ..$ fields.professional_scientific_technical           : int [1:35] 75 125 200 1000 600 250 800 600 22000 125 ...\n  ..$ fields.construction                                : int [1:35] 500 125 500 300 400 100 350 175 1250 125 ...\n  ..$ fields.arts_entertainment_recreation_other_services: int [1:35] 150 75 75 350 500 35 250 125 1750 100 ...\n  ..$ fields.wholesale                                   : int [1:35] 100 20 450 35 400 15 50 150 900 20 ...\n $ facet_groups:'data.frame':   1 obs. of  2 variables:\n  ..$ name  : chr \"ward\"\n  ..$ facets:List of 1\n  .. ..$ :'data.frame': 35 obs. of  4 variables:\n  .. .. ..$ name : chr [1:35] \"Ashley\" \"Avonmouth and Lawrence Weston\" \"Bedminster\" \"Bishopston and Ashley Down\" ...\n  .. .. ..$ count: int [1:35] 1 1 1 1 1 1 1 1 1 1 ...\n  .. .. ..$ state: chr [1:35] \"displayed\" \"displayed\" \"displayed\" \"displayed\" ...\n  .. .. ..$ path : chr [1:35] \"Ashley\" \"Avonmouth and Lawrence Weston\" \"Bedminster\" \"Bishopston and Ashley Down\" ...\n\n\nWell, it’s complicated. Looking on the above output of list() the object that looks most useful to us is the dat$records.\n\n\n\nQuestion: Based on the output of list(), why do you think is dat$records the most useful part of dat for us?\n\n\n\nAnd if you want to see how the dataframe dat$records looks like, the below function will show the first five rows.\n\nhead(dat$records)\n\n                                 datasetid\n1 jobs-by-ward-by-industry-in-bristol-2020\n2 jobs-by-ward-by-industry-in-bristol-2020\n3 jobs-by-ward-by-industry-in-bristol-2020\n4 jobs-by-ward-by-industry-in-bristol-2020\n5 jobs-by-ward-by-industry-in-bristol-2020\n6 jobs-by-ward-by-industry-in-bristol-2020\n                                  recordid         record_timestamp\n1 8f1ee37587a2233922bfa38b048879368059502e 2021-12-22T11:29:00.712Z\n2 464799297e1d1af8bb980450d062c7eedb787042 2021-12-22T11:29:00.712Z\n3 4cf81b7e8c57fc61c73eb40c4d4556446d20896c 2021-12-22T11:29:00.712Z\n4 e034ff06e7c7d67f6f716c41e8ccd940a36d41fd 2021-12-22T11:29:00.712Z\n5 88ce4a95ea29ef24f38ecd46b3a7e021d325991c 2021-12-22T11:29:00.712Z\n6 0576d71991a12a6102330e89a595d26fcc92fd32 2021-12-22T11:29:00.712Z\n  fields.mining_quarrying_utilities fields.transport_storage_inc_postal\n1                                10                                  20\n2                                 0                                   0\n3                                 0                                 350\n4                                 0                                  15\n5                                 0                                 200\n6                                10                                  50\n  fields.accommodation_food_services fields.public_administration_defence\n1                                100                                    0\n2                                150                                    0\n3                                175                                    0\n4                                800                                   10\n5                                700                                   50\n6                                175                                    0\n  fields.agriculture_forestry_fishing\n1                                   0\n2                                   0\n3                                   0\n4                                   0\n5                                   0\n6                                   0\n  fields.business_administration_support_services fields.retail fields.property\n1                                             125           700              10\n2                                              75           100              15\n3                                            1250           200              20\n4                                            1750           700             450\n5                                             450           900             175\n6                                             225            75              75\n  fields.health fields.motor_trades fields.manufacturing\n1           150                 125                  150\n2           125                  30                   25\n3           125                 300                  900\n4           450                  30                   25\n5           500                 350                  400\n6           500                  20                    5\n  fields.information_communication fields.education fields.ward_code\n1                              225              350        E05010889\n2                              200              250        E05010918\n3                              400              400        E05010890\n4                              800              200        E05010894\n5                              350              350        E05010914\n6                              175              175        E05010916\n  fields.financial_insurance      fields.ward fields.period\n1                       1500     Bishopsworth          2020\n2                         10    Windmill Hill          2020\n3                         10 Brislington East          2020\n4                        600     Clifton Down          2020\n5                         50       Southville          2020\n6                         10     Stoke Bishop          2020\n  fields.professional_scientific_technical fields.construction\n1                                       75                 500\n2                                      125                 125\n3                                      200                 500\n4                                     1000                 300\n5                                      600                 400\n6                                      250                 100\n  fields.arts_entertainment_recreation_other_services fields.wholesale\n1                                                 150              100\n2                                                  75               20\n3                                                  75              450\n4                                                 350               35\n5                                                 500              400\n6                                                  35               15\n\n\nLooking into the above, I can think of the the following necessary data cleaning and wrangling steps:\n\nremove the first three columns as they don’t include any useful data\nremove the string “fields.” from the column names\nalthough not necessary, it is common practice for the first columns to contain identification data such as the ward names and codes.\n\nTo do all the above, we will use the below functions from the dplyr package, which is part of the tidyverse ecosystem.\n\ndat <- dat$records %>% \n  select(-datasetid, -recordid, -record_timestamp) %>% # remove useless columns\n  rename_with(~sub(\"fields.\", \"\", .)) %>%              # ~ introduces a formula: function `sub` substitutes (in other words replaces) the string \"fields.\" with an empty sting \"\" for all columns (symbol .) \n  relocate(ward, ward_code, period) %>%                # looks better\n  glimpse()                                            # a glimpse of the output\n\nRows: 35\nColumns: 21\n$ ward                                         <chr> \"Bishopsworth\", \"Windmill~\n$ ward_code                                    <chr> \"E05010889\", \"E05010918\",~\n$ period                                       <chr> \"2020\", \"2020\", \"2020\", \"~\n$ mining_quarrying_utilities                   <int> 10, 0, 0, 0, 0, 10, 0, 30~\n$ transport_storage_inc_postal                 <int> 20, 0, 350, 15, 200, 50, ~\n$ accommodation_food_services                  <int> 100, 150, 175, 800, 700, ~\n$ public_administration_defence                <int> 0, 0, 0, 10, 50, 0, 0, 40~\n$ agriculture_forestry_fishing                 <int> 0, 0, 0, 0, 0, 0, 0, 0, 0~\n$ business_administration_support_services     <int> 125, 75, 1250, 1750, 450,~\n$ retail                                       <int> 700, 100, 200, 700, 900, ~\n$ property                                     <int> 10, 15, 20, 450, 175, 75,~\n$ health                                       <int> 150, 125, 125, 450, 500, ~\n$ motor_trades                                 <int> 125, 30, 300, 30, 350, 20~\n$ manufacturing                                <int> 150, 25, 900, 25, 400, 5,~\n$ information_communication                    <int> 225, 200, 400, 800, 350, ~\n$ education                                    <int> 350, 250, 400, 200, 350, ~\n$ financial_insurance                          <int> 1500, 10, 10, 600, 50, 10~\n$ professional_scientific_technical            <int> 75, 125, 200, 1000, 600, ~\n$ construction                                 <int> 500, 125, 500, 300, 400, ~\n$ arts_entertainment_recreation_other_services <int> 150, 75, 75, 350, 500, 35~\n$ wholesale                                    <int> 100, 20, 450, 35, 400, 15~\n\n\nLet’s try now to do some analysis based on these data and create some outputs.\n\ndat %>% mutate(total = rowSums(across(c(4:21))),           # total jobs in a ward\n               across(c(4:21),                             # select the columns you are interested in\n                      .names = \"{col}_share\") / total) %>% # divide these columns by total to create industry share within ward  \n                                                           # and name the new columns as oldname_share\n  select(1:2, 23:40) %>%\n  pivot_longer(!c(ward, ward_code),                        # These are the columns I am 'pivoting'\n               names_to = \"industry\",                      # This is how I will name the column with all the industries ...\n               values_to = \"jobs_share\") %>%               # ... and the column with the jobs percentage\n                                                           # Look https://tidyr.tidyverse.org/articles/pivot.html to \n                                                           # understand the long to wide / wide to long transformations.\n  filter(ward == \"Central\") %>%                            # Let's focus on Central Bristol\n  ggplot(aes(x=industry, y=jobs_share)) +                  # ... and create a bar chart for it jobs distribution\n    geom_bar(stat = \"identity\") +\n# to understand the \"identity part go on the Details section of the geom_bar documentation:\n# https://www.rdocumentation.org/packages/ggplot2/versions/1.0.1/topics/geom_bar\n    \n    scale_x_discrete(guide = guide_axis(angle = 90)) +     # This line rotates the x labels,\n    ylab(\"jobs %\")                                         # and here we rename the y axis. \n\n\n\n\nNow, let’s do something slightly more interesting. Let’s create two plots to compare the job distribution between two Bristol wards.\n\ndat %>% mutate(total = rowSums(across(c(4:21))),           # total jobs in a ward\n               across(c(4:21),                             # select the columns you are interested in\n                      .names = \"{col}_share\") / total) %>% # divide these columns by total to create industry share within ward  \n                                                           # and name the new columns as oldname_share\n  select(1:2, 23:40) %>%\n  pivot_longer(!c(ward, ward_code),                        # These are the columns I am 'pivoting'\n               names_to = \"industry\",                      # This is how I will name the column with all the industries ...\n               values_to = \"jobs_share\") %>%               # ... and the column with the jobs percentage\n                                                           # Look https://tidyr.tidyverse.org/articles/pivot.html to \n                                                           # understand the long to wide / wide to long transformations.\n  filter(ward == \"Central\" |\n         ward == \"Easton\") %>%                             # Let's focus on Easton and Central Bristol\n  ggplot(aes(x=industry, y=jobs_share)) +                  # ... and create a bar chart for it jobs distribution\n    geom_bar(stat = \"identity\") +\n    scale_x_discrete(guide = guide_axis(angle = 90)) +     # This line rotates the x labels,\n    ylab(\"jobs %\") +                                       # and here we rename the y axis. \n    facet_wrap(vars(ward), ncol = 2)                       # facet_wrap creates two graphs based on `ward` and puts one next to each other\n\n\n\n\nWell done! You’ve just utilised Bristol’s open data and became part of the urban open data revolution 😃.\nObviously the x labels are rather ugly.\n\n\n\nTask: using and tweaking the code provided here, can you rename these labels?\n\n\n\n\n\n\nNext task: Search for some other interesting data from opendata.bristol.gov.uk, access it programmatically, do the necessary data wrangling and produce some graphs in a new .Rmd document. Make sure to knit it as .html.\n\n\nIf this is to easy for you, why don’t you check the new Quarto format."
  },
  {
    "objectID": "src/apis.html#accessing-apis-using-existing-r-packages",
    "href": "src/apis.html#accessing-apis-using-existing-r-packages",
    "title": "APIs and urban data",
    "section": "Accessing APIs using existing R packages",
    "text": "Accessing APIs using existing R packages\nNow you might be lucky and somebody else has already done all the infrastructural / back-end work in order for you to easily interrogate an API and access their data. How would this look like? Like another R package. Here is a list with a few examples:\n\nnomisr is a package that allows you to access Nomis data with R. Find here an introduction.\ntidysencus is part of the tidyverse ecosystem and offers access to the US Census. This is the link. Pay extra attention to the spatial data option.\nThe city of Toronto offers an R package to access City of Toronto Open Data Portal.\nSee a relevant book by Bauer, Landesvatter, and Behrens (2022) available here.\n\n\n\n\nAnother task: On your own time, play with these packages and access some of the (urban) data they offer."
  },
  {
    "objectID": "src/network_analysis.html",
    "href": "src/network_analysis.html",
    "title": "Network analysis practical: networks of cities",
    "section": "",
    "text": "Some of the materials for this tutorial have been adapted from:\n\nthe Origin-destination data with stplanr manual,\nthe Modelling Population Flows Using Spatial Interaction Models tutorial, and\nOshan (2016)\nLovelace, Robin, Jakub Nowosad, and Jannes Muenchow. Geocomputation with R. CRC Press, 2019"
  },
  {
    "objectID": "src/network_analysis.html#philosophy-of-this-rmarkdown-document",
    "href": "src/network_analysis.html#philosophy-of-this-rmarkdown-document",
    "title": "Network analysis practical: networks of cities",
    "section": "Philosophy of this RMarkdown document",
    "text": "Philosophy of this RMarkdown document\nAs you can see this is a long .Rmd document, which has a dual objective. On one hand, it will help you achieve the unit learning outcomes as it provides an implementation of most of the concepts and ideas we discuss for this unit. On the other hand this is almost a representation of a ‘real world’ workflow. Instead of breaking the code in shorter and maybe more digestible .Rmd documents I decided to provide you with a working sequence of all actions I would have taken in order to analyse a network with spatial dimensions such as the network of commuting flows in \\(2011\\). You can use this workflow as the basis for building your own approach and, consequently, code in order to complete this session’s project. We will spend at least \\(2\\) sessions to go through this code.\nTo begin with, create a new RStudio Project as a new directory (File > New Project…) and within it create a source and data directory to store the code and the data accordingly. Instructions on how to create such a project, can be found here. Then, create a new RMarkdown document to implement all the below."
  },
  {
    "objectID": "src/network_analysis.html#install-and-load-packages",
    "href": "src/network_analysis.html#install-and-load-packages",
    "title": "Network analysis practical: networks of cities",
    "section": "Install and load packages",
    "text": "Install and load packages\nWe will use quite a few packages for this tutorial. Most of the code is based on the tidyverse logic – see here for more info. But the main package we will use for network data wrangling and analysis is igraph – more info here.\nImportant\nThe below code snippet assumes that all the packages are installed. If you are using a university PC they are probably not. If they are not installed, you need to do so by using install.packages(\"package.name\").\n\nlibrary(igraph)\nlibrary(knitr)\nlibrary(corrplot)\nlibrary(corrgram)\nlibrary(tidyverse)\nlibrary(geojsonio)\nlibrary(stplanr)\nlibrary(leaflet)\nlibrary(SpatialPosition)\nlibrary(stargazer)\nlibrary(DescTools)\nlibrary(patchwork)\nlibrary(caret)\nlibrary(rprojroot)\nlibrary(kableExtra)\nlibrary(sf)\n\nknitr::opts_chunk$set(echo = TRUE)\n\n# This is the project path\npath <- find_rstudio_root_file()"
  },
  {
    "objectID": "src/network_analysis.html#commuting-data-and-networks",
    "href": "src/network_analysis.html#commuting-data-and-networks",
    "title": "Network analysis practical: networks of cities",
    "section": "Commuting data and networks",
    "text": "Commuting data and networks\nFor this tutorial we will use travel to work data from the 2011 UK Census. The data is available online, but it requires an academic login. After you log in, download the WU03UK element, save the .csv on your working directory under a /data directory and unzip it. We will use the:\n\nLocation of usual residence and place of work by method of travel to work\n\nfor\n\nCensus Merged local authority districts in England and Wales, Council areas in Scotland, Local government districts in Northern Ireland.\n\nThe below code loads the data.\n\npath.data <- paste0(path, \"/data/wu03uk_v3/wu03uk_v3.csv\")\ncommuting <- read_csv(path.data)\nglimpse(commuting)\n\nAs you may have noticed, the commuting object includes only the codes for the local authorities. Let’s try to see these codes.\nFirst for the origins.\n\ncommuting %>% distinct(`Area of usual residence`)\n\n# A tibble: 404 x 1\n   `Area of usual residence`\n   <chr>                    \n 1 95AA                     \n 2 95BB                     \n 3 95CC                     \n 4 95DD                     \n 5 95EE                     \n 6 95FF                     \n 7 95GG                     \n 8 95HH                     \n 9 95II                     \n10 95JJ                     \n# ... with 394 more rows\n\n\nAnd the same for the destinations (results omitted).\n\ncommuting %>% distinct(`Area of workplace`)\n\n\n\n\nQuestion: Can you guess the countries these codes refer to?\n\n\n\nYou might have observe some weird codes (OD0000001, OD0000002, OD0000003 and OD0000004). With some simple Google searching we can find the 2011 Census Origin-Destination Data User Guide, which indicates that these codes do not refer to local authorities:\n\nOD0000001 = Mainly work at or from home\nOD0000002 = Offshore installation\nOD0000003 = No fixed place\nOD0000004 = Outside UK\n\nFor the sake of simplicity we will remove these non-geographical nodes.\nnon.la <- c(\"OD0000001\", \"OD0000002\", \"OD0000003\", \"OD0000004\")\ncommuting <- commuting %>% \n  filter(!`Area of workplace` %in% non.la)\ncheck the %in% operator.\nNow let’s do some clean-up of the commuting data frame. Let’s remind ourselves how the data look like\n\nglimpse(commuting)\n\nRows: 108,546\nColumns: 14\n$ `Area of usual residence`                  <chr> \"95AA\", \"95AA\", \"95AA\", \"95~\n$ `Area of workplace`                        <chr> \"95AA\", \"95BB\", \"95CC\", \"95~\n$ `All categories: Method of travel to work` <dbl> 9465, 107, 42, 1485, 35, 18~\n$ `Work mainly at or from home`              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, ~\n$ `Underground, metro, light rail, tram`     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, ~\n$ Train                                      <dbl> 12, 0, 0, 11, 0, 0, 165, 1,~\n$ `Bus, minibus or coach`                    <dbl> 243, 1, 1, 84, 1, 0, 434, 1~\n$ Taxi                                       <dbl> 421, 2, 0, 13, 0, 0, 14, 0,~\n$ `Motorcycle, scooter or moped`             <dbl> 58, 0, 0, 8, 0, 0, 23, 0, 0~\n$ `Driving a car or van`                     <dbl> 5376, 68, 29, 1111, 25, 12,~\n$ `Passenger in a car or van`                <dbl> 1721, 20, 9, 241, 9, 4, 830~\n$ Bicycle                                    <dbl> 196, 5, 0, 2, 0, 0, 11, 0, ~\n$ `On foot`                                  <dbl> 1403, 9, 3, 13, 0, 2, 46, 1~\n$ `Other method of travel to work`           <dbl> 35, 2, 0, 2, 0, 0, 6, 0, 1,~\n\n\nWe are keeping the English and Wales local authorities by keeping the observations with a local authority code starting from E (for England) and W (for Wales).\n\ncommuting <- commuting %>% filter(startsWith(`Area of usual residence`, \"E\") |\n                                  startsWith(`Area of usual residence`, \"W\")) %>% \n                           filter(startsWith(`Area of workplace`, \"E\") |\n                                  startsWith(`Area of workplace`, \"W\")) %>% \n  glimpse()\n\nRows: 93,034\nColumns: 14\n$ `Area of usual residence`                  <chr> \"E41000001\", \"E41000001\", \"~\n$ `Area of workplace`                        <chr> \"E41000001\", \"E41000002\", \"~\n$ `All categories: Method of travel to work` <dbl> 20777, 1591, 534, 3865, 433~\n$ `Work mainly at or from home`              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, ~\n$ `Underground, metro, light rail, tram`     <dbl> 6, 1, 0, 1, 0, 0, 0, 0, 0, ~\n$ Train                                      <dbl> 26, 32, 0, 49, 11, 0, 0, 0,~\n$ `Bus, minibus or coach`                    <dbl> 1922, 140, 21, 167, 7, 0, 0~\n$ Taxi                                       <dbl> 527, 11, 4, 20, 1, 0, 0, 0,~\n$ `Motorcycle, scooter or moped`             <dbl> 107, 6, 6, 23, 4, 0, 0, 0, ~\n$ `Driving a car or van`                     <dbl> 11788, 1225, 448, 3144, 360~\n$ `Passenger in a car or van`                <dbl> 1965, 99, 36, 365, 33, 0, 0~\n$ Bicycle                                    <dbl> 593, 13, 1, 29, 2, 0, 0, 0,~\n$ `On foot`                                  <dbl> 3789, 60, 16, 60, 15, 0, 0,~\n$ `Other method of travel to work`           <dbl> 54, 4, 2, 7, 0, 0, 0, 0, 0,~\n\n\nWe can also see we many rows we dropped with glimpse().\nIt is very important to distinguish between intra- and inter-local authority flows. In network analysis terms, these are the values we find on the diagonal of an adjacency matrix and refer to the commuting flows within a specific local authority or between different ones. For this exercise we are dropping the intra-local authority flows. Although not used here, we also create a new object with the intra-local authority flows.\n\ncommuting.intra <- commuting %>%\n  filter(`Area of usual residence` == `Area of workplace`)\ncommuting <- commuting %>%\n  filter(`Area of usual residence` != `Area of workplace`) %>% \n  glimpse()\n\nRows: 92,688\nColumns: 14\n$ `Area of usual residence`                  <chr> \"E41000001\", \"E41000001\", \"~\n$ `Area of workplace`                        <chr> \"E41000002\", \"E41000003\", \"~\n$ `All categories: Method of travel to work` <dbl> 1591, 534, 3865, 433, 5, 2,~\n$ `Work mainly at or from home`              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, ~\n$ `Underground, metro, light rail, tram`     <dbl> 1, 0, 1, 0, 0, 0, 0, 0, 0, ~\n$ Train                                      <dbl> 32, 0, 49, 11, 0, 0, 0, 0, ~\n$ `Bus, minibus or coach`                    <dbl> 140, 21, 167, 7, 0, 0, 0, 1~\n$ Taxi                                       <dbl> 11, 4, 20, 1, 0, 0, 0, 0, 0~\n$ `Motorcycle, scooter or moped`             <dbl> 6, 6, 23, 4, 0, 0, 0, 0, 0,~\n$ `Driving a car or van`                     <dbl> 1225, 448, 3144, 360, 5, 2,~\n$ `Passenger in a car or van`                <dbl> 99, 36, 365, 33, 0, 0, 0, 0~\n$ Bicycle                                    <dbl> 13, 1, 29, 2, 0, 0, 0, 0, 0~\n$ `On foot`                                  <dbl> 60, 16, 60, 15, 0, 0, 0, 0,~\n$ `Other method of travel to work`           <dbl> 4, 2, 7, 0, 0, 0, 0, 0, 0, ~\n\n\nPlease note the constant use of glimpse() to keep control of how many observations we have and check if we missed anything.\nAlso, take a note of the commuting object, which includes multiple types of commuting flows. Therefore, we will build \\(3\\) different networks:\n\none for all the commuting flows\none only for train flows\none only for bicycle flows.\n\n\ncommuting.all <- commuting %>%\n  select(`Area of usual residence`,\n                `Area of workplace`,\n                `All categories: Method of travel to work`) %>%\n  rename(o = `Area of usual residence`,     # Area of usual residence is annoyingly\n         d = `Area of workplace`,           # long, so I am renaiming theses columns\n         weight = `All categories: Method of travel to work`)\n\n# just FYI this is how you could have achieved the same output using base R\n# instead of dplyr of the tidyverse ecosystem\n# commuting.all <- commuting[,1:3]\n# names(commuting.all)[1] <- \"o\"\n# names(commuting.all)[2] <- \"d\"\n# names(commuting.all)[3] <- \"weight\"\n\ncommuting.train <- commuting %>%\n  select(`Area of usual residence`,\n         `Area of workplace`,\n         `All categories: Method of travel to work`,\n         `Train`) %>%\n  rename(o = `Area of usual residence`,\n         d = `Area of workplace`,\n         weight = `All categories: Method of travel to work`) %>%\n  # The below code drops all the lines with 0 train flows in order to exclude\n  # these edges from the network.\n  filter(Train!=0)\n\ncommuting.bicycle <- commuting %>%\n  select(`Area of usual residence`,\n                `Area of workplace`,\n                `All categories: Method of travel to work`,\n                `Bicycle`) %>%\n  rename(o = `Area of usual residence`,\n         d = `Area of workplace`,\n         weight = `All categories: Method of travel to work`) %>%\n  # The below code drops all the lines with 0 bicycle flows in order to exclude\n  # these edges from the network.\n  filter(Bicycle!=0)\n\nUnless you know the local authority codes by hard, it might be useful to also add the corresponding local authority names. These can be easily obtained from the ONS. The below code directly downloads a GeoJSON file with the local authorities in England and Wales. If you don’t know what a GeoJSON file is, have a look here. Boundary data can also be obtained by UK Data Service.\nFor the time being we are only interested in the local authority names and codes. We will use the spatial object later.\nTip: the below code downloads the GeoJSON file over the web. If you want to run the code multiple times, it might be faster to download the file ones, save it on your hard drive and the point this location to st_read().\n\nla <-st_read(\"https://opendata.arcgis.com/datasets/d54f953d633b45f5a82fdd3c89b4c955_0.geojson\")\nglimpse(la) \n\nla.names <- as.data.frame(la) %>% \n  select(cmlad11cd, cmlad11nm)    # all we need is the LA names and codes\n\nThe next step is to actually create the network objects. The below code creates the igraph network objects using the graph_from_data_frame() function as we already have all the necessary data in data frames (commuting.all, commuting.train and commuting.bicycle). We then attach the local authority names as an attribute to these networks.\n\nnet.all <-graph_from_data_frame(commuting.all, directed = TRUE, vertices = la.names)\n\nnet.train <-graph_from_data_frame(commuting.train, directed = TRUE, vertices = la.names)\n\nnet.bicycle <-graph_from_data_frame(commuting.bicycle, directed = TRUE, vertices = la.names)"
  },
  {
    "objectID": "src/network_analysis.html#network-attributes",
    "href": "src/network_analysis.html#network-attributes",
    "title": "Network analysis practical: networks of cities",
    "section": "Network attributes",
    "text": "Network attributes\nThe below igraph functions illustrate some attributes of the network with all the flows.\n\n# It provides information about the type of the net.all object. Not surprisingly,\n# it is an igraph network.\nclass(net.all)\n\n[1] \"igraph\"\n\n# It displays the network file, the number of nodes and edges (345 and 92,688\n# in this case).\nnet.all\n\nIGRAPH 1da3937 DNW- 346 92688 -- \n+ attr: name (v/c), cmlad11nm (v/c), weight (e/n)\n+ edges from 1da3937 (vertex names):\n [1] E41000001->E41000002 E41000001->E41000003 E41000001->E41000004\n [4] E41000001->E41000005 E41000001->E41000006 E41000001->E41000007\n [7] E41000001->E41000009 E41000001->E41000010 E41000001->E41000011\n[10] E41000001->E41000012 E41000001->E41000013 E41000001->E41000014\n[13] E41000001->E41000015 E41000001->E41000016 E41000001->E41000017\n[16] E41000001->E41000018 E41000001->E41000019 E41000001->E41000020\n[19] E41000001->E41000021 E41000001->E41000022 E41000001->E41000023\n[22] E41000001->E41000025 E41000001->E41000026 E41000001->E41000029\n+ ... omitted several edges\n\n# It displays the vertices (aka nodes)\nV(net.all)\n\n+ 346/346 vertices, named, from 1da3937:\n  [1] E41000001 E41000002 E41000003 E41000004 E41000005 E41000006 E41000007\n  [8] E41000008 E41000009 E41000010 E41000011 E41000012 E41000013 E41000014\n [15] E41000015 E41000016 E41000017 E41000018 E41000019 E41000020 E41000021\n [22] E41000022 E41000023 E41000024 E41000025 E41000026 E41000027 E41000028\n [29] E41000029 E41000030 E41000031 E41000032 E41000033 E41000034 E41000035\n [36] E41000036 E41000037 E41000038 E41000039 E41000040 E41000041 E41000042\n [43] E41000043 E41000044 E41000045 E41000046 E41000047 E41000048 E41000049\n [50] E41000050 E41000051 E41000052 E41000053 E41000054 E41000055 E41000056\n [57] E41000057 E41000058 E41000059 E41000060 E41000061 E41000062 E41000063\n [64] E41000064 E41000065 E41000066 E41000067 E41000068 E41000069 E41000070\n+ ... omitted several vertices\n\n# It displays the vertex attributes. In this case the local authority codes.\nvertex_attr(net.all) %>% glimpse()\n\nList of 2\n $ name     : chr [1:346] \"E41000001\" \"E41000002\" \"E41000003\" \"E41000004\" ...\n $ cmlad11nm: chr [1:346] \"Hartlepool\" \"Middlesbrough\" \"Redcar and Cleveland\" \"Stockton-on-Tees\" ...\n\n# the output of vertex_attr() is quite long, this is why I chained it with glimpse()\n\n# It displays the edges.\nE(net.all) %>% glimpse()\n\n 'igraph.es' int [1:92688] 1 2 3 4 5 6 7 8 9 10 ...\n - attr(*, \"vnames\")= chr [1:92688] \"E41000001|E41000002\" \"E41000001|E41000003\" \"E41000001|E41000004\" \"E41000001|E41000005\" ...\n - attr(*, \"env\")=<weakref> \n - attr(*, \"graph\")= chr \"1da39374-61c3-11ed-8858-9b10f99b5bca\"\n\n# the output of E() is quite long, this is why I chained it with glimpse()\n\n# It displays the weights for each edge. In our case the weights represent commuters.\nedge.attributes(net.all)$weight %>% glimpse()\n\n num [1:92688] 1591 534 3865 433 5 ...\n\n# as above re: glimpse()\n\n# Asks whether the network is weighted or not\nis.weighted(net.all)\n\n[1] TRUE\n\n\n\n\n\nQuestion: How many nodes and edges are there for the other types of networks? What do these differences mean?"
  },
  {
    "objectID": "src/network_analysis.html#network-measures",
    "href": "src/network_analysis.html#network-measures",
    "title": "Network analysis practical: networks of cities",
    "section": "Network measures",
    "text": "Network measures\nThe below igraph functions calculate some simple network measures. Have a look at the lecture slides and the reference list to remind yourselves.\n\n# Network diameter. We do not consider the weights because it affects the measurement.\nd.all <- diameter(net.all, directed = TRUE, weights = NA)\nd.all\n\n[1] 2\n\n# Average path length\nmean_ditst.all <- mean_distance(net.all)\nmean_ditst.all\n\n[1] 1.895552\n\n# Network density\ndens.all <- edge_density(net.all)\ndens.all\n\n[1] 0.7764765\n\n# Clustering Coefficient or Transitivity\ntrans.all <- transitivity(net.all)\ntrans.all\n\n[1] 0.9221811\n\n# Reciprocity\nrec.all <- reciprocity(net.all)\nrec.all\n\n[1] 0.8297298\n\n# Assortativity\nass.all <- assortativity_degree(net.all, directed = T)\nass.all\n\n[1] -0.08068428\n\n\n\n\n\nQuestion: Do the same for the other types of commuting networks and compare the different measures. Why do we observe these differences?"
  },
  {
    "objectID": "src/network_analysis.html#centralities",
    "href": "src/network_analysis.html#centralities",
    "title": "Network analysis practical: networks of cities",
    "section": "Centralities",
    "text": "Centralities\nNow we are moving from network-level measures to some node-level ones. Specifically, we will calculate different centrality measures.\n\n# Binary in-degree centrality\nin.degree <- degree(net.all, mode = \"in\")\nhead(in.degree)\n\nE41000001 E41000002 E41000003 E41000004 E41000005 E41000006 \n      111       214       118       216       237       275 \n\n# Binary out-degree centrality\nout.degree <- degree(net.all, mode = \"out\")\nhead(out.degree)\n\nE41000001 E41000002 E41000003 E41000004 E41000005 E41000006 \n      231       250       242       292       258       274 \n\n# Binary degree centrality\ndegree <- degree(net.all, mode = \"all\")\nhead(degree)\n\nE41000001 E41000002 E41000003 E41000004 E41000005 E41000006 \n      342       464       360       508       495       549 \n\n# The function graph.strength() calculates the weighted degree centrality\n\n# Weighed in-degree centrality\nw.in.degree <- graph.strength(net.all, mode = \"in\")\nhead(w.in.degree)\n\nE41000001 E41000002 E41000003 E41000004 E41000005 E41000006 \n     8360     30038     12786     29986     18445     23080 \n\n# Weighed out-degree centrality\nw.out.degree <- graph.strength(net.all, mode = \"out\")\nhead(w.out.degree)\n\nE41000001 E41000002 E41000003 E41000004 E41000005 E41000006 \n    11261     20664     21904     29329     15036     22981 \n\n# Weighed degree centrality\nw.degree <- graph.strength(net.all, mode = \"all\")\nhead(w.degree)\n\nE41000001 E41000002 E41000003 E41000004 E41000005 E41000006 \n    19621     50702     34690     59315     33481     46061 \n\n# The function betweenness() calculates betweenness centrality. As before\nbtwnss <- betweenness(net.all, weights = NA)\nhead(btwnss)\n\nE41000001 E41000002 E41000003 E41000004 E41000005 E41000006 \n 21.38152  53.13953  23.46728  65.89576  63.64096  82.81950 \n\n# Eigenvector centrality\neigen <- eigen_centrality(net.all)\n\n# Be careful, eigen has a more complicated structure. Use ?eigen_central to read more\nstr(eigen)\n\nList of 3\n $ vector : Named num [1:346] 0.00039 0.000679 0.000459 0.0011 0.000703 ...\n  ..- attr(*, \"names\")= chr [1:346] \"E41000001\" \"E41000002\" \"E41000003\" \"E41000004\" ...\n $ value  : num 2e+05\n $ options:List of 20\n  ..$ bmat   : chr \"I\"\n  ..$ n      : int 346\n  ..$ which  : chr \"LA\"\n  ..$ nev    : int 1\n  ..$ tol    : num 0\n  ..$ ncv    : int 0\n  ..$ ldv    : int 0\n  ..$ ishift : int 1\n  ..$ maxiter: int 1000\n  ..$ nb     : int 1\n  ..$ mode   : int 1\n  ..$ start  : int 1\n  ..$ sigma  : num 0\n  ..$ sigmai : num 0\n  ..$ info   : int 0\n  ..$ iter   : int 2\n  ..$ nconv  : int 1\n  ..$ numop  : int 30\n  ..$ numopb : int 0\n  ..$ numreo : int 21\n\n# We are interested in eigen$vector\nhead(eigen$vector)\n\n   E41000001    E41000002    E41000003    E41000004    E41000005    E41000006 \n0.0003901039 0.0006790253 0.0004593193 0.0010995296 0.0007032769 0.0012432240 \n\n# page rank centrality\nprank <- page_rank(net.all, directed = T)\nstr(prank) # as before\n\nList of 3\n $ vector : Named num [1:346] 0.00109 0.00296 0.00178 0.00318 0.00181 ...\n  ..- attr(*, \"names\")= chr [1:346] \"E41000001\" \"E41000002\" \"E41000003\" \"E41000004\" ...\n $ value  : num 1\n $ options: NULL\n\nhead(prank$vector)\n\n  E41000001   E41000002   E41000003   E41000004   E41000005   E41000006 \n0.001088677 0.002963743 0.001784703 0.003183087 0.001807346 0.002157680 \n\n\nNow that we understood how the above works, let’s chain them together to create a centralities tibble.\n\ncentralities <- tibble(\n  names = vertex_attr(net.all)[[2]],\n  # The above creates a vector with the nodes names (i.e. the local authority names).\n  # We are interested in the second elements of the vertex_attr() as the first one \n  # includes the local authority codes. Try str(vertex_attr(net.all)) to see why.\n  # the double squared brackets [[]] brings the vertex, while the single one []\n  # would have brought a list.\n  in.degree = degree(net.all, mode = \"in\"),\n  out.degree = degree(net.all, mode = \"out\"),\n  degree = degree(net.all, mode = \"in\"),\n  w.in.degree = graph.strength(net.all, mode = \"in\"),\n  w.out.degree = graph.strength(net.all, mode = \"out\"),\n  w.degree = graph.strength(net.all, mode = \"all\"),\n  btwnss = betweenness(net.all, weights = NA),\n  eigen = eigen_centrality(net.all)$vector,  # note the $vector\n  prank = page_rank(net.all, directed = T)$vector) %>% \n  glimpse()\n\nRows: 346\nColumns: 10\n$ names        <chr> \"Hartlepool\", \"Middlesbrough\", \"Redcar and Cleveland\", \"S~\n$ in.degree    <dbl> 111, 214, 118, 216, 237, 275, 326, 204, 178, 292, 292, 21~\n$ out.degree   <dbl> 231, 250, 242, 292, 258, 274, 302, 245, 246, 298, 326, 28~\n$ degree       <dbl> 111, 214, 118, 216, 237, 275, 326, 204, 178, 292, 292, 21~\n$ w.in.degree  <dbl> 8360, 30038, 12786, 29986, 18445, 23080, 49172, 23988, 19~\n$ w.out.degree <dbl> 11261, 20664, 21904, 29329, 15036, 22981, 34607, 19666, 1~\n$ w.degree     <dbl> 19621, 50702, 34690, 59315, 33481, 46061, 83779, 43654, 3~\n$ btwnss       <dbl> 21.38152, 53.13953, 23.46728, 65.89576, 63.64096, 82.8195~\n$ eigen        <dbl> 0.0003901039, 0.0006790253, 0.0004593193, 0.0010995296, 0~\n$ prank        <dbl> 0.001088677, 0.002963743, 0.001784703, 0.003183087, 0.001~\n\n\nOr, if you want a nicer table, you can use kable(). Tip check out the kableExtra package for more options\n\ncentralities %>% kable(caption = \"Centralities\") %>% \n  scroll_box(width = \"100%\", height = \"300px\")       #this `kableExtra` function introduces a scroll box\n\n\n\nCentralities\n \n  \n    names \n    in.degree \n    out.degree \n    degree \n    w.in.degree \n    w.out.degree \n    w.degree \n    btwnss \n    eigen \n    prank \n  \n \n\n  \n    Hartlepool \n    111 \n    231 \n    111 \n    8360 \n    11261 \n    19621 \n    21.38152 \n    0.0003901 \n    0.0010887 \n  \n  \n    Middlesbrough \n    214 \n    250 \n    214 \n    30038 \n    20664 \n    50702 \n    53.13953 \n    0.0006790 \n    0.0029637 \n  \n  \n    Redcar and Cleveland \n    118 \n    242 \n    118 \n    12786 \n    21904 \n    34690 \n    23.46728 \n    0.0004593 \n    0.0017847 \n  \n  \n    Stockton-on-Tees \n    216 \n    292 \n    216 \n    29986 \n    29329 \n    59315 \n    65.89576 \n    0.0010995 \n    0.0031831 \n  \n  \n    Darlington \n    237 \n    258 \n    237 \n    18445 \n    15036 \n    33481 \n    63.64096 \n    0.0007033 \n    0.0018073 \n  \n  \n    Halton \n    275 \n    274 \n    275 \n    23080 \n    22981 \n    46061 \n    82.81950 \n    0.0012432 \n    0.0021577 \n  \n  \n    Warrington \n    326 \n    302 \n    326 \n    49172 \n    34607 \n    83779 \n    124.18728 \n    0.0028033 \n    0.0038653 \n  \n  \n    Blackburn with Darwen \n    204 \n    245 \n    204 \n    23988 \n    19666 \n    43654 \n    46.17387 \n    0.0006750 \n    0.0024693 \n  \n  \n    Blackpool \n    178 \n    246 \n    178 \n    19835 \n    17775 \n    37610 \n    43.94347 \n    0.0005901 \n    0.0025846 \n  \n  \n    Kingston upon Hull, City of \n    292 \n    298 \n    292 \n    38602 \n    24199 \n    62801 \n    102.14345 \n    0.0012955 \n    0.0025353 \n  \n  \n    East Riding of Yorkshire \n    292 \n    326 \n    292 \n    30194 \n    54386 \n    84580 \n    120.56251 \n    0.0020021 \n    0.0031038 \n  \n  \n    North East Lincolnshire \n    219 \n    286 \n    219 \n    11562 \n    10600 \n    22162 \n    65.06108 \n    0.0007256 \n    0.0013687 \n  \n  \n    North Lincolnshire \n    249 \n    297 \n    249 \n    14755 \n    15493 \n    30248 \n    83.06742 \n    0.0007716 \n    0.0016239 \n  \n  \n    York \n    304 \n    310 \n    304 \n    25651 \n    21058 \n    46709 \n    117.86975 \n    0.0023097 \n    0.0026595 \n  \n  \n    Derby \n    316 \n    308 \n    316 \n    41670 \n    29802 \n    71472 \n    113.83201 \n    0.0029402 \n    0.0032790 \n  \n  \n    Leicester \n    328 \n    311 \n    328 \n    67191 \n    41007 \n    108198 \n    121.94219 \n    0.0045364 \n    0.0060454 \n  \n  \n    Rutland \n    223 \n    225 \n    223 \n    6776 \n    6446 \n    13222 \n    40.36699 \n    0.0012338 \n    0.0010011 \n  \n  \n    Nottingham \n    336 \n    315 \n    336 \n    89650 \n    38180 \n    127830 \n    134.64542 \n    0.0039334 \n    0.0059435 \n  \n  \n    Herefordshire, County of \n    306 \n    292 \n    306 \n    10786 \n    13434 \n    24220 \n    103.12522 \n    0.0019351 \n    0.0013338 \n  \n  \n    Telford and Wrekin \n    324 \n    296 \n    324 \n    23376 \n    18322 \n    41698 \n    109.90081 \n    0.0018745 \n    0.0020630 \n  \n  \n    Stoke-on-Trent \n    313 \n    309 \n    313 \n    40031 \n    33667 \n    73698 \n    114.84293 \n    0.0015778 \n    0.0029178 \n  \n  \n    Bath and North East Somerset \n    318 \n    289 \n    318 \n    29241 \n    23945 \n    53186 \n    106.11349 \n    0.0063148 \n    0.0031748 \n  \n  \n    Bristol, City of \n    338 \n    324 \n    338 \n    80907 \n    54120 \n    135027 \n    146.21380 \n    0.0085801 \n    0.0081482 \n  \n  \n    North Somerset \n    288 \n    309 \n    288 \n    18813 \n    32553 \n    51366 \n    106.51079 \n    0.0033370 \n    0.0024983 \n  \n  \n    South Gloucestershire \n    342 \n    315 \n    342 \n    59359 \n    53569 \n    112928 \n    143.90381 \n    0.0071708 \n    0.0067618 \n  \n  \n    Plymouth \n    332 \n    300 \n    332 \n    25793 \n    20138 \n    45931 \n    124.45365 \n    0.0015797 \n    0.0032944 \n  \n  \n    Torbay \n    191 \n    252 \n    191 \n    8569 \n    12764 \n    21333 \n    46.76698 \n    0.0007531 \n    0.0015136 \n  \n  \n    Bournemouth \n    248 \n    283 \n    248 \n    25210 \n    32998 \n    58208 \n    72.37210 \n    0.0044016 \n    0.0028426 \n  \n  \n    Poole \n    314 \n    276 \n    314 \n    32048 \n    24563 \n    56611 \n    87.92048 \n    0.0045316 \n    0.0030996 \n  \n  \n    Swindon \n    334 \n    293 \n    334 \n    23868 \n    24439 \n    48307 \n    112.57493 \n    0.0066072 \n    0.0024599 \n  \n  \n    Peterborough \n    337 \n    294 \n    337 \n    32552 \n    19136 \n    51688 \n    111.41706 \n    0.0080528 \n    0.0029620 \n  \n  \n    Luton \n    341 \n    293 \n    341 \n    34348 \n    33348 \n    67696 \n    117.08185 \n    0.0292726 \n    0.0026121 \n  \n  \n    Southend-on-Sea \n    247 \n    260 \n    247 \n    20661 \n    29749 \n    50410 \n    57.62656 \n    0.0460325 \n    0.0012049 \n  \n  \n    Thurrock \n    281 \n    268 \n    281 \n    21804 \n    34873 \n    56677 \n    75.03469 \n    0.0589668 \n    0.0013440 \n  \n  \n    Medway \n    308 \n    312 \n    308 \n    22710 \n    50453 \n    73163 \n    109.01019 \n    0.0533814 \n    0.0015706 \n  \n  \n    Bracknell Forest \n    336 \n    263 \n    336 \n    28503 \n    31002 \n    59505 \n    84.64837 \n    0.0181350 \n    0.0026867 \n  \n  \n    West Berkshire \n    340 \n    277 \n    340 \n    33558 \n    28003 \n    61561 \n    103.72536 \n    0.0157734 \n    0.0033439 \n  \n  \n    Reading \n    332 \n    289 \n    332 \n    42267 \n    32715 \n    74982 \n    112.58266 \n    0.0227425 \n    0.0040357 \n  \n  \n    Slough \n    335 \n    271 \n    335 \n    39282 \n    31753 \n    71035 \n    94.80244 \n    0.0380361 \n    0.0041691 \n  \n  \n    Windsor and Maidenhead \n    341 \n    273 \n    341 \n    36971 \n    34482 \n    71453 \n    99.72553 \n    0.0372343 \n    0.0038264 \n  \n  \n    Wokingham \n    340 \n    269 \n    340 \n    30764 \n    42810 \n    73574 \n    90.37405 \n    0.0237476 \n    0.0032668 \n  \n  \n    Milton Keynes \n    344 \n    307 \n    344 \n    44450 \n    27780 \n    72230 \n    122.22514 \n    0.0253813 \n    0.0035232 \n  \n  \n    Brighton and Hove \n    297 \n    287 \n    297 \n    31879 \n    36938 \n    68817 \n    88.44945 \n    0.0325543 \n    0.0022023 \n  \n  \n    Portsmouth \n    343 \n    288 \n    343 \n    41272 \n    27862 \n    69134 \n    115.85177 \n    0.0059324 \n    0.0032274 \n  \n  \n    Southampton \n    321 \n    300 \n    321 \n    41891 \n    41234 \n    83125 \n    115.21255 \n    0.0069496 \n    0.0036577 \n  \n  \n    Isle of Wight \n    219 \n    244 \n    219 \n    2083 \n    4544 \n    6627 \n    44.65755 \n    0.0019493 \n    0.0006276 \n  \n  \n    County Durham \n    316 \n    328 \n    316 \n    35081 \n    64602 \n    99683 \n    136.76168 \n    0.0025184 \n    0.0033631 \n  \n  \n    Northumberland \n    287 \n    310 \n    287 \n    22254 \n    43011 \n    65265 \n    105.96942 \n    0.0024251 \n    0.0023084 \n  \n  \n    Cheshire East \n    331 \n    334 \n    331 \n    53260 \n    51773 \n    105033 \n    153.00249 \n    0.0049410 \n    0.0044883 \n  \n  \n    Cheshire West and Chester \n    323 \n    324 \n    323 \n    50910 \n    51970 \n    102880 \n    141.77478 \n    0.0034742 \n    0.0039760 \n  \n  \n    Shropshire \n    336 \n    330 \n    336 \n    29111 \n    34424 \n    63535 \n    148.35300 \n    0.0036140 \n    0.0027990 \n  \n  \n    Cornwall,Isles of Scilly \n    341 \n    330 \n    341 \n    11163 \n    18567 \n    29730 \n    155.46166 \n    0.0032429 \n    0.0016854 \n  \n  \n    Wiltshire \n    345 \n    331 \n    345 \n    39717 \n    55625 \n    95342 \n    160.51941 \n    0.0150479 \n    0.0040658 \n  \n  \n    Bedford \n    314 \n    297 \n    314 \n    21392 \n    22483 \n    43875 \n    100.59431 \n    0.0154519 \n    0.0018139 \n  \n  \n    Central Bedfordshire \n    343 \n    312 \n    343 \n    32469 \n    66131 \n    98600 \n    129.24999 \n    0.0390917 \n    0.0028629 \n  \n  \n    Aylesbury Vale \n    330 \n    303 \n    330 \n    19831 \n    34981 \n    54812 \n    113.28702 \n    0.0227757 \n    0.0020113 \n  \n  \n    Chiltern \n    253 \n    234 \n    253 \n    13391 \n    22558 \n    35949 \n    44.70020 \n    0.0301093 \n    0.0015106 \n  \n  \n    South Bucks \n    310 \n    223 \n    310 \n    20603 \n    20381 \n    40984 \n    55.75605 \n    0.0262182 \n    0.0023714 \n  \n  \n    Wycombe \n    339 \n    283 \n    339 \n    27246 \n    32323 \n    59569 \n    100.06675 \n    0.0304376 \n    0.0027075 \n  \n  \n    Cambridge \n    312 \n    250 \n    312 \n    51240 \n    16062 \n    67302 \n    73.34194 \n    0.0134464 \n    0.0046020 \n  \n  \n    East Cambridgeshire \n    216 \n    247 \n    216 \n    8216 \n    20939 \n    29155 \n    41.75094 \n    0.0043745 \n    0.0012342 \n  \n  \n    Fenland \n    179 \n    265 \n    179 \n    10010 \n    16271 \n    26281 \n    41.16076 \n    0.0024054 \n    0.0013423 \n  \n  \n    Huntingdonshire \n    310 \n    302 \n    310 \n    20270 \n    31621 \n    51891 \n    102.90672 \n    0.0132382 \n    0.0023001 \n  \n  \n    South Cambridgeshire \n    328 \n    284 \n    328 \n    34916 \n    39466 \n    74382 \n    98.77528 \n    0.0143335 \n    0.0042710 \n  \n  \n    Allerdale \n    188 \n    203 \n    188 \n    6436 \n    11733 \n    18169 \n    33.91827 \n    0.0002556 \n    0.0019898 \n  \n  \n    Barrow-in-Furness \n    144 \n    173 \n    144 \n    5100 \n    4715 \n    9815 \n    20.75604 \n    0.0002271 \n    0.0014106 \n  \n  \n    Carlisle \n    306 \n    242 \n    306 \n    9904 \n    5953 \n    15857 \n    78.20939 \n    0.0005917 \n    0.0021074 \n  \n  \n    Copeland \n    162 \n    185 \n    162 \n    7919 \n    5986 \n    13905 \n    26.13944 \n    0.0001593 \n    0.0017038 \n  \n  \n    Eden \n    225 \n    187 \n    225 \n    6209 \n    4666 \n    10875 \n    41.29631 \n    0.0002394 \n    0.0016928 \n  \n  \n    South Lakeland \n    234 \n    235 \n    234 \n    9651 \n    8994 \n    18645 \n    56.17406 \n    0.0005490 \n    0.0020873 \n  \n  \n    Amber Valley \n    281 \n    271 \n    281 \n    21778 \n    25962 \n    47740 \n    77.94638 \n    0.0014457 \n    0.0019987 \n  \n  \n    Bolsover \n    242 \n    243 \n    242 \n    15315 \n    20347 \n    35662 \n    54.66120 \n    0.0006313 \n    0.0014976 \n  \n  \n    Chesterfield \n    242 \n    256 \n    242 \n    21349 \n    17107 \n    38456 \n    56.87320 \n    0.0007520 \n    0.0017426 \n  \n  \n    Derbyshire Dales \n    201 \n    251 \n    201 \n    13161 \n    11828 \n    24989 \n    42.88387 \n    0.0009256 \n    0.0013577 \n  \n  \n    Erewash \n    200 \n    275 \n    200 \n    16623 \n    28395 \n    45018 \n    50.97433 \n    0.0012799 \n    0.0017058 \n  \n  \n    High Peak \n    188 \n    255 \n    188 \n    7663 \n    17319 \n    24982 \n    45.93415 \n    0.0008832 \n    0.0009999 \n  \n  \n    North East Derbyshire \n    172 \n    274 \n    172 \n    13414 \n    28664 \n    42078 \n    42.70590 \n    0.0007958 \n    0.0014644 \n  \n  \n    South Derbyshire \n    216 \n    276 \n    216 \n    14306 \n    28077 \n    42383 \n    53.41385 \n    0.0011521 \n    0.0016710 \n  \n  \n    East Devon \n    315 \n    261 \n    315 \n    12430 \n    18130 \n    30560 \n    83.85873 \n    0.0015576 \n    0.0029037 \n  \n  \n    Exeter \n    248 \n    241 \n    248 \n    37151 \n    10809 \n    47960 \n    57.60331 \n    0.0011451 \n    0.0047422 \n  \n  \n    Mid Devon \n    163 \n    220 \n    163 \n    5569 \n    13667 \n    19236 \n    31.82063 \n    0.0007052 \n    0.0015827 \n  \n  \n    North Devon \n    261 \n    233 \n    261 \n    7735 \n    4645 \n    12380 \n    56.35792 \n    0.0007480 \n    0.0012730 \n  \n  \n    South Hams \n    282 \n    235 \n    282 \n    16938 \n    13322 \n    30260 \n    65.87841 \n    0.0012274 \n    0.0025189 \n  \n  \n    Teignbridge \n    232 \n    252 \n    232 \n    12250 \n    20987 \n    33237 \n    58.11052 \n    0.0010440 \n    0.0023279 \n  \n  \n    Torridge \n    116 \n    196 \n    116 \n    3575 \n    8288 \n    11863 \n    14.07664 \n    0.0003644 \n    0.0009993 \n  \n  \n    West Devon \n    125 \n    208 \n    125 \n    4593 \n    8149 \n    12742 \n    22.82693 \n    0.0005090 \n    0.0009780 \n  \n  \n    Christchurch \n    175 \n    192 \n    175 \n    10677 \n    10213 \n    20890 \n    24.36314 \n    0.0012017 \n    0.0012651 \n  \n  \n    East Dorset \n    197 \n    234 \n    197 \n    13531 \n    19487 \n    33018 \n    37.02858 \n    0.0023127 \n    0.0016371 \n  \n  \n    North Dorset \n    254 \n    216 \n    254 \n    6962 \n    9997 \n    16959 \n    47.73131 \n    0.0018001 \n    0.0011060 \n  \n  \n    Purbeck \n    226 \n    186 \n    226 \n    7634 \n    8732 \n    16366 \n    33.64330 \n    0.0010481 \n    0.0011865 \n  \n  \n    West Dorset \n    235 \n    238 \n    235 \n    18059 \n    11425 \n    29484 \n    49.90794 \n    0.0017699 \n    0.0020121 \n  \n  \n    Weymouth and Portland \n    206 \n    209 \n    206 \n    3447 \n    11981 \n    15428 \n    35.60819 \n    0.0005798 \n    0.0008754 \n  \n  \n    Eastbourne \n    204 \n    227 \n    204 \n    12373 \n    12830 \n    25203 \n    36.12422 \n    0.0054015 \n    0.0010266 \n  \n  \n    Hastings \n    164 \n    236 \n    164 \n    8006 \n    11732 \n    19738 \n    29.94627 \n    0.0049038 \n    0.0009044 \n  \n  \n    Lewes \n    202 \n    224 \n    202 \n    14403 \n    19800 \n    34203 \n    34.92845 \n    0.0104541 \n    0.0011926 \n  \n  \n    Rother \n    182 \n    215 \n    182 \n    9630 \n    15054 \n    24684 \n    27.26210 \n    0.0074697 \n    0.0010183 \n  \n  \n    Wealden \n    258 \n    261 \n    258 \n    14989 \n    30274 \n    45263 \n    58.96939 \n    0.0186274 \n    0.0013393 \n  \n  \n    Basildon \n    321 \n    282 \n    321 \n    36071 \n    36057 \n    72128 \n    92.09181 \n    0.0612035 \n    0.0019214 \n  \n  \n    Braintree \n    270 \n    277 \n    270 \n    15184 \n    31582 \n    46766 \n    74.27107 \n    0.0271398 \n    0.0013120 \n  \n  \n    Brentwood \n    289 \n    223 \n    289 \n    17745 \n    19995 \n    37740 \n    52.37953 \n    0.0409946 \n    0.0012340 \n  \n  \n    Castle Point \n    154 \n    236 \n    154 \n    7467 \n    23473 \n    30940 \n    28.09746 \n    0.0251378 \n    0.0007424 \n  \n  \n    Chelmsford \n    293 \n    275 \n    293 \n    30575 \n    34222 \n    64797 \n    83.33582 \n    0.0512377 \n    0.0018830 \n  \n  \n    Colchester \n    327 \n    270 \n    327 \n    22968 \n    24545 \n    47513 \n    94.70758 \n    0.0235711 \n    0.0016488 \n  \n  \n    Epping Forest \n    290 \n    251 \n    290 \n    21509 \n    35475 \n    56984 \n    68.68786 \n    0.0711352 \n    0.0015571 \n  \n  \n    Harlow \n    294 \n    232 \n    294 \n    15994 \n    16492 \n    32486 \n    57.74732 \n    0.0195485 \n    0.0013293 \n  \n  \n    Maldon \n    210 \n    210 \n    210 \n    6513 \n    13689 \n    20202 \n    33.49157 \n    0.0119064 \n    0.0007505 \n  \n  \n    Rochford \n    178 \n    239 \n    178 \n    10411 \n    24351 \n    34762 \n    35.41168 \n    0.0271557 \n    0.0008385 \n  \n  \n    Tendring \n    229 \n    257 \n    229 \n    6763 \n    17203 \n    23966 \n    51.10530 \n    0.0091833 \n    0.0008516 \n  \n  \n    Uttlesford \n    307 \n    240 \n    307 \n    17618 \n    17973 \n    35591 \n    63.70076 \n    0.0202609 \n    0.0014814 \n  \n  \n    Cheltenham \n    293 \n    272 \n    293 \n    24125 \n    19592 \n    43717 \n    85.00521 \n    0.0025958 \n    0.0030665 \n  \n  \n    Cotswold \n    293 \n    254 \n    293 \n    15685 \n    13651 \n    29336 \n    71.25964 \n    0.0041576 \n    0.0018831 \n  \n  \n    Forest of Dean \n    206 \n    248 \n    206 \n    6007 \n    14512 \n    20519 \n    48.05798 \n    0.0008705 \n    0.0010042 \n  \n  \n    Gloucester \n    290 \n    276 \n    290 \n    26099 \n    23463 \n    49562 \n    85.55168 \n    0.0014927 \n    0.0030158 \n  \n  \n    Stroud \n    289 \n    267 \n    289 \n    13241 \n    20326 \n    33567 \n    83.56128 \n    0.0024767 \n    0.0018481 \n  \n  \n    Tewkesbury \n    322 \n    249 \n    322 \n    25184 \n    20469 \n    45653 \n    87.05614 \n    0.0015420 \n    0.0030289 \n  \n  \n    Basingstoke and Deane \n    338 \n    280 \n    338 \n    25401 \n    30492 \n    55893 \n    101.39306 \n    0.0181075 \n    0.0025112 \n  \n  \n    East Hampshire \n    328 \n    268 \n    328 \n    15462 \n    25476 \n    40938 \n    93.84842 \n    0.0120776 \n    0.0016435 \n  \n  \n    Eastleigh \n    309 \n    260 \n    309 \n    32465 \n    33798 \n    66263 \n    81.90592 \n    0.0056096 \n    0.0029667 \n  \n  \n    Fareham \n    310 \n    264 \n    310 \n    24609 \n    29734 \n    54343 \n    76.99256 \n    0.0039958 \n    0.0022174 \n  \n  \n    Gosport \n    272 \n    237 \n    272 \n    7327 \n    20473 \n    27800 \n    58.39117 \n    0.0018505 \n    0.0010068 \n  \n  \n    Hart \n    328 \n    253 \n    328 \n    18470 \n    26300 \n    44770 \n    78.77749 \n    0.0156487 \n    0.0018362 \n  \n  \n    Havant \n    211 \n    248 \n    211 \n    17666 \n    26401 \n    44067 \n    43.23830 \n    0.0039611 \n    0.0018958 \n  \n  \n    New Forest \n    302 \n    279 \n    302 \n    22744 \n    29791 \n    52535 \n    86.90241 \n    0.0054670 \n    0.0022859 \n  \n  \n    Rushmoor \n    334 \n    258 \n    334 \n    25017 \n    26056 \n    51073 \n    89.27181 \n    0.0143124 \n    0.0022710 \n  \n  \n    Test Valley \n    318 \n    256 \n    318 \n    22956 \n    24789 \n    47745 \n    79.16895 \n    0.0075231 \n    0.0021833 \n  \n  \n    Winchester \n    327 \n    270 \n    327 \n    41929 \n    23369 \n    65298 \n    89.55948 \n    0.0114415 \n    0.0035121 \n  \n  \n    Broxbourne \n    317 \n    249 \n    317 \n    18151 \n    25440 \n    43591 \n    73.49505 \n    0.0391390 \n    0.0015310 \n  \n  \n    Dacorum \n    338 \n    286 \n    338 \n    23817 \n    30858 \n    54675 \n    104.58269 \n    0.0370314 \n    0.0020320 \n  \n  \n    East Hertfordshire \n    297 \n    274 \n    297 \n    22122 \n    35988 \n    58110 \n    79.93959 \n    0.0446914 \n    0.0018916 \n  \n  \n    Hertsmere \n    316 \n    242 \n    316 \n    25251 \n    28231 \n    53482 \n    69.43996 \n    0.0558631 \n    0.0022121 \n  \n  \n    North Hertfordshire \n    293 \n    273 \n    293 \n    20355 \n    32707 \n    53062 \n    77.54596 \n    0.0292122 \n    0.0018191 \n  \n  \n    St Albans \n    318 \n    271 \n    318 \n    26809 \n    36418 \n    63227 \n    81.85818 \n    0.0619411 \n    0.0023555 \n  \n  \n    Stevenage \n    314 \n    254 \n    314 \n    20748 \n    18525 \n    39273 \n    72.02250 \n    0.0171373 \n    0.0017124 \n  \n  \n    Three Rivers \n    322 \n    253 \n    322 \n    18584 \n    27115 \n    45699 \n    76.96263 \n    0.0380419 \n    0.0018902 \n  \n  \n    Watford \n    332 \n    248 \n    332 \n    28799 \n    24774 \n    53573 \n    78.54169 \n    0.0405963 \n    0.0024651 \n  \n  \n    Welwyn Hatfield \n    336 \n    271 \n    336 \n    38496 \n    22907 \n    61403 \n    90.64350 \n    0.0389517 \n    0.0029540 \n  \n  \n    Ashford \n    255 \n    254 \n    255 \n    15035 \n    17786 \n    32821 \n    59.60893 \n    0.0139988 \n    0.0012927 \n  \n  \n    Canterbury \n    234 \n    274 \n    234 \n    19479 \n    18121 \n    37600 \n    61.96377 \n    0.0115107 \n    0.0014501 \n  \n  \n    Dartford \n    306 \n    248 \n    306 \n    32588 \n    27117 \n    59705 \n    69.01172 \n    0.0545483 \n    0.0016458 \n  \n  \n    Dover \n    234 \n    249 \n    234 \n    9959 \n    16669 \n    26628 \n    48.35895 \n    0.0045037 \n    0.0010274 \n  \n  \n    Gravesham \n    212 \n    258 \n    212 \n    10155 \n    25676 \n    35831 \n    42.33955 \n    0.0298471 \n    0.0008559 \n  \n  \n    Maidstone \n    296 \n    278 \n    296 \n    29979 \n    31058 \n    61037 \n    76.04405 \n    0.0296875 \n    0.0018485 \n  \n  \n    Sevenoaks \n    274 \n    246 \n    274 \n    20929 \n    30420 \n    51349 \n    58.51716 \n    0.0566217 \n    0.0013925 \n  \n  \n    Shepway \n    232 \n    250 \n    232 \n    10992 \n    14806 \n    25798 \n    48.02087 \n    0.0065689 \n    0.0010662 \n  \n  \n    Swale \n    237 \n    274 \n    237 \n    12599 \n    22875 \n    35474 \n    59.86629 \n    0.0186895 \n    0.0010335 \n  \n  \n    Thanet \n    188 \n    242 \n    188 \n    5846 \n    13348 \n    19194 \n    36.05674 \n    0.0056380 \n    0.0007948 \n  \n  \n    Tonbridge and Malling \n    270 \n    254 \n    270 \n    30765 \n    30473 \n    61238 \n    56.01878 \n    0.0379614 \n    0.0018185 \n  \n  \n    Tunbridge Wells \n    227 \n    240 \n    227 \n    20116 \n    22147 \n    42263 \n    47.12165 \n    0.0336823 \n    0.0014347 \n  \n  \n    Burnley \n    159 \n    222 \n    159 \n    14595 \n    15150 \n    29745 \n    33.54753 \n    0.0003922 \n    0.0016247 \n  \n  \n    Chorley \n    168 \n    261 \n    168 \n    14994 \n    26851 \n    41845 \n    43.70430 \n    0.0007779 \n    0.0016512 \n  \n  \n    Fylde \n    230 \n    223 \n    230 \n    21711 \n    13080 \n    34791 \n    52.67556 \n    0.0005238 \n    0.0027609 \n  \n  \n    Hyndburn \n    130 \n    203 \n    130 \n    12702 \n    17380 \n    30082 \n    20.42098 \n    0.0002830 \n    0.0015889 \n  \n  \n    Lancaster \n    209 \n    274 \n    209 \n    8091 \n    11592 \n    19683 \n    59.97534 \n    0.0006400 \n    0.0015040 \n  \n  \n    Pendle \n    178 \n    212 \n    178 \n    10432 \n    15013 \n    25445 \n    34.52029 \n    0.0003655 \n    0.0013588 \n  \n  \n    Preston \n    288 \n    270 \n    288 \n    44352 \n    21146 \n    65498 \n    84.42626 \n    0.0011831 \n    0.0042716 \n  \n  \n    Ribble Valley \n    187 \n    190 \n    187 \n    14075 \n    12870 \n    26945 \n    29.07366 \n    0.0004309 \n    0.0018088 \n  \n  \n    Rossendale \n    152 \n    218 \n    152 \n    7571 \n    16019 \n    23590 \n    28.52086 \n    0.0004274 \n    0.0010012 \n  \n  \n    South Ribble \n    233 \n    256 \n    233 \n    23544 \n    30099 \n    53643 \n    59.66094 \n    0.0007475 \n    0.0026508 \n  \n  \n    West Lancashire \n    214 \n    266 \n    214 \n    19805 \n    21733 \n    41538 \n    56.65700 \n    0.0009294 \n    0.0015818 \n  \n  \n    Wyre \n    157 \n    226 \n    157 \n    10819 \n    21156 \n    31975 \n    33.40469 \n    0.0005131 \n    0.0018022 \n  \n  \n    Blaby \n    304 \n    264 \n    304 \n    31649 \n    27848 \n    59497 \n    78.31709 \n    0.0018932 \n    0.0034461 \n  \n  \n    Charnwood \n    292 \n    317 \n    292 \n    23040 \n    34580 \n    57620 \n    107.91161 \n    0.0024076 \n    0.0026228 \n  \n  \n    Harborough \n    273 \n    265 \n    273 \n    19547 \n    21344 \n    40891 \n    64.82323 \n    0.0026586 \n    0.0022494 \n  \n  \n    Hinckley and Bosworth \n    256 \n    283 \n    256 \n    15677 \n    26835 \n    42512 \n    75.05241 \n    0.0014834 \n    0.0018541 \n  \n  \n    Melton \n    175 \n    223 \n    175 \n    6142 \n    10160 \n    16302 \n    26.91873 \n    0.0009008 \n    0.0009814 \n  \n  \n    North West Leicestershire \n    331 \n    267 \n    331 \n    26666 \n    19081 \n    45747 \n    95.63833 \n    0.0013247 \n    0.0024521 \n  \n  \n    Oadby and Wigston \n    162 \n    215 \n    162 \n    11870 \n    17102 \n    28972 \n    20.71941 \n    0.0010987 \n    0.0016922 \n  \n  \n    Boston \n    144 \n    211 \n    144 \n    7495 \n    7088 \n    14583 \n    23.15199 \n    0.0004174 \n    0.0010821 \n  \n  \n    East Lindsey \n    272 \n    280 \n    272 \n    8351 \n    12695 \n    21046 \n    85.42615 \n    0.0007084 \n    0.0012323 \n  \n  \n    Lincoln \n    229 \n    261 \n    229 \n    25583 \n    14947 \n    40530 \n    51.75565 \n    0.0008666 \n    0.0022827 \n  \n  \n    North Kesteven \n    308 \n    295 \n    308 \n    16326 \n    22631 \n    38957 \n    103.67317 \n    0.0014144 \n    0.0020627 \n  \n  \n    South Holland \n    212 \n    265 \n    212 \n    8955 \n    11472 \n    20427 \n    50.29864 \n    0.0015531 \n    0.0013288 \n  \n  \n    South Kesteven \n    275 \n    303 \n    275 \n    14185 \n    23275 \n    37460 \n    94.80642 \n    0.0039822 \n    0.0018098 \n  \n  \n    West Lindsey \n    180 \n    265 \n    180 \n    9169 \n    19863 \n    29032 \n    46.25926 \n    0.0006861 \n    0.0013060 \n  \n  \n    Breckland \n    246 \n    281 \n    246 \n    12378 \n    23016 \n    35394 \n    65.43999 \n    0.0018253 \n    0.0015886 \n  \n  \n    Broadland \n    181 \n    251 \n    181 \n    18858 \n    32823 \n    51681 \n    39.50570 \n    0.0019036 \n    0.0026217 \n  \n  \n    Great Yarmouth \n    198 \n    220 \n    198 \n    9250 \n    9511 \n    18761 \n    38.18528 \n    0.0007335 \n    0.0012681 \n  \n  \n    King's Lynn and West Norfolk \n    299 \n    290 \n    299 \n    11047 \n    14664 \n    25711 \n    94.66804 \n    0.0025603 \n    0.0013157 \n  \n  \n    North Norfolk \n    187 \n    238 \n    187 \n    8506 \n    11750 \n    20256 \n    34.85599 \n    0.0013520 \n    0.0011684 \n  \n  \n    Norwich \n    283 \n    259 \n    283 \n    48392 \n    21251 \n    69643 \n    63.73725 \n    0.0026206 \n    0.0041001 \n  \n  \n    South Norfolk \n    263 \n    258 \n    263 \n    22671 \n    28315 \n    50986 \n    60.76567 \n    0.0026761 \n    0.0027300 \n  \n  \n    Corby \n    202 \n    239 \n    202 \n    9176 \n    8734 \n    17910 \n    38.33096 \n    0.0013677 \n    0.0012179 \n  \n  \n    Daventry \n    269 \n    284 \n    269 \n    17275 \n    18078 \n    35353 \n    79.04507 \n    0.0033339 \n    0.0020310 \n  \n  \n    East Northamptonshire \n    244 \n    274 \n    244 \n    10043 \n    22265 \n    32308 \n    68.11886 \n    0.0038892 \n    0.0013554 \n  \n  \n    Kettering \n    268 \n    284 \n    268 \n    13980 \n    18491 \n    32471 \n    70.87864 \n    0.0030991 \n    0.0016957 \n  \n  \n    Northampton \n    337 \n    307 \n    337 \n    39498 \n    27141 \n    66639 \n    118.08045 \n    0.0088677 \n    0.0036166 \n  \n  \n    South Northamptonshire \n    289 \n    293 \n    289 \n    13977 \n    25354 \n    39331 \n    92.12130 \n    0.0062021 \n    0.0017508 \n  \n  \n    Wellingborough \n    318 \n    262 \n    318 \n    14948 \n    16857 \n    31805 \n    80.21191 \n    0.0036900 \n    0.0016290 \n  \n  \n    Craven \n    163 \n    202 \n    163 \n    8901 \n    9015 \n    17916 \n    30.47052 \n    0.0005107 \n    0.0011944 \n  \n  \n    Hambleton \n    275 \n    248 \n    275 \n    17621 \n    13906 \n    31527 \n    74.05896 \n    0.0009081 \n    0.0022288 \n  \n  \n    Harrogate \n    325 \n    282 \n    325 \n    19366 \n    18342 \n    37708 \n    110.93138 \n    0.0023168 \n    0.0024481 \n  \n  \n    Richmondshire \n    324 \n    234 \n    324 \n    7255 \n    7057 \n    14312 \n    93.34512 \n    0.0007768 \n    0.0011037 \n  \n  \n    Ryedale \n    168 \n    188 \n    168 \n    7047 \n    6445 \n    13492 \n    28.82552 \n    0.0004876 \n    0.0011190 \n  \n  \n    Scarborough \n    184 \n    244 \n    184 \n    5058 \n    6783 \n    11841 \n    46.02664 \n    0.0005090 \n    0.0008944 \n  \n  \n    Selby \n    213 \n    264 \n    213 \n    13235 \n    20848 \n    34083 \n    52.54992 \n    0.0010276 \n    0.0015011 \n  \n  \n    Ashfield \n    273 \n    272 \n    273 \n    25763 \n    27847 \n    53610 \n    76.99274 \n    0.0010518 \n    0.0022554 \n  \n  \n    Bassetlaw \n    251 \n    280 \n    251 \n    16161 \n    16975 \n    33136 \n    73.46786 \n    0.0009655 \n    0.0015236 \n  \n  \n    Broxtowe \n    251 \n    280 \n    251 \n    18998 \n    33183 \n    52181 \n    68.09294 \n    0.0015889 \n    0.0019933 \n  \n  \n    Gedling \n    178 \n    275 \n    178 \n    15434 \n    34039 \n    49473 \n    46.03025 \n    0.0014039 \n    0.0018589 \n  \n  \n    Mansfield \n    200 \n    267 \n    200 \n    15911 \n    23109 \n    39020 \n    47.93428 \n    0.0008000 \n    0.0015661 \n  \n  \n    Newark and Sherwood \n    226 \n    288 \n    226 \n    17327 \n    20763 \n    38090 \n    62.46194 \n    0.0015555 \n    0.0017440 \n  \n  \n    Rushcliffe \n    256 \n    288 \n    256 \n    20897 \n    30122 \n    51019 \n    76.63440 \n    0.0020342 \n    0.0022778 \n  \n  \n    Cherwell \n    332 \n    298 \n    332 \n    23167 \n    26000 \n    49167 \n    111.31845 \n    0.0082417 \n    0.0026410 \n  \n  \n    Oxford \n    333 \n    287 \n    333 \n    45775 \n    15693 \n    61468 \n    107.32489 \n    0.0113616 \n    0.0045709 \n  \n  \n    South Oxfordshire \n    337 \n    268 \n    337 \n    23589 \n    31775 \n    55364 \n    88.07716 \n    0.0151645 \n    0.0028817 \n  \n  \n    Vale of White Horse \n    336 \n    272 \n    336 \n    24697 \n    25427 \n    50124 \n    98.46835 \n    0.0082747 \n    0.0030820 \n  \n  \n    West Oxfordshire \n    333 \n    260 \n    333 \n    11768 \n    19990 \n    31758 \n    83.83685 \n    0.0051550 \n    0.0017197 \n  \n  \n    Mendip \n    250 \n    247 \n    250 \n    11450 \n    15842 \n    27292 \n    64.75602 \n    0.0021761 \n    0.0015764 \n  \n  \n    Sedgemoor \n    232 \n    259 \n    232 \n    9209 \n    16894 \n    26103 \n    60.36191 \n    0.0010367 \n    0.0015783 \n  \n  \n    South Somerset \n    321 \n    277 \n    321 \n    15164 \n    15892 \n    31056 \n    101.23392 \n    0.0020952 \n    0.0022205 \n  \n  \n    Taunton Deane \n    277 \n    243 \n    277 \n    15713 \n    9820 \n    25533 \n    66.05293 \n    0.0012006 \n    0.0022342 \n  \n  \n    West Somerset \n    165 \n    153 \n    165 \n    2780 \n    3167 \n    5947 \n    18.02491 \n    0.0004053 \n    0.0007693 \n  \n  \n    Cannock Chase \n    239 \n    267 \n    239 \n    14864 \n    23408 \n    38272 \n    57.70909 \n    0.0009774 \n    0.0013914 \n  \n  \n    East Staffordshire \n    294 \n    291 \n    294 \n    23275 \n    18822 \n    42097 \n    101.32347 \n    0.0012667 \n    0.0020181 \n  \n  \n    Lichfield \n    292 \n    277 \n    292 \n    20396 \n    24559 \n    44955 \n    84.24212 \n    0.0020662 \n    0.0019028 \n  \n  \n    Newcastle-under-Lyme \n    261 \n    285 \n    261 \n    21455 \n    29382 \n    50837 \n    79.24630 \n    0.0011395 \n    0.0019857 \n  \n  \n    South Staffordshire \n    240 \n    290 \n    240 \n    17575 \n    34347 \n    51922 \n    72.56398 \n    0.0015476 \n    0.0015857 \n  \n  \n    Stafford \n    314 \n    294 \n    314 \n    23835 \n    20934 \n    44769 \n    105.13228 \n    0.0018028 \n    0.0020109 \n  \n  \n    Staffordshire Moorlands \n    200 \n    270 \n    200 \n    10201 \n    22847 \n    33048 \n    49.71024 \n    0.0007831 \n    0.0011897 \n  \n  \n    Tamworth \n    272 \n    268 \n    272 \n    11312 \n    19185 \n    30497 \n    75.84114 \n    0.0011977 \n    0.0014167 \n  \n  \n    Babergh \n    237 \n    243 \n    237 \n    11616 \n    18040 \n    29656 \n    49.49746 \n    0.0069612 \n    0.0013146 \n  \n  \n    Forest Heath \n    224 \n    206 \n    224 \n    13035 \n    11543 \n    24578 \n    33.10973 \n    0.0015872 \n    0.0014177 \n  \n  \n    Ipswich \n    236 \n    255 \n    236 \n    27497 \n    21192 \n    48689 \n    53.76366 \n    0.0057598 \n    0.0023529 \n  \n  \n    Mid Suffolk \n    273 \n    247 \n    273 \n    13930 \n    20713 \n    34643 \n    63.35687 \n    0.0042169 \n    0.0016024 \n  \n  \n    St Edmundsbury \n    313 \n    271 \n    313 \n    19511 \n    17447 \n    36958 \n    88.32277 \n    0.0039806 \n    0.0018960 \n  \n  \n    Suffolk Coastal \n    285 \n    239 \n    285 \n    15143 \n    18880 \n    34023 \n    59.27719 \n    0.0052585 \n    0.0016880 \n  \n  \n    Waveney \n    193 \n    239 \n    193 \n    8325 \n    11675 \n    20000 \n    39.78191 \n    0.0012538 \n    0.0012324 \n  \n  \n    Elmbridge \n    305 \n    245 \n    305 \n    27029 \n    35122 \n    62151 \n    62.72055 \n    0.0685952 \n    0.0024269 \n  \n  \n    Epsom and Ewell \n    254 \n    224 \n    254 \n    15227 \n    22939 \n    38166 \n    43.36186 \n    0.0395024 \n    0.0013033 \n  \n  \n    Guildford \n    334 \n    258 \n    334 \n    38372 \n    30423 \n    68795 \n    85.17198 \n    0.0361713 \n    0.0030977 \n  \n  \n    Mole Valley \n    315 \n    217 \n    315 \n    23768 \n    19616 \n    43384 \n    53.14222 \n    0.0298856 \n    0.0020016 \n  \n  \n    Reigate and Banstead \n    333 \n    262 \n    333 \n    32483 \n    35696 \n    68179 \n    89.77510 \n    0.0537983 \n    0.0024743 \n  \n  \n    Runnymede \n    335 \n    250 \n    335 \n    30604 \n    21324 \n    51928 \n    82.53407 \n    0.0279868 \n    0.0027531 \n  \n  \n    Spelthorne \n    309 \n    235 \n    309 \n    21043 \n    30107 \n    51150 \n    57.35777 \n    0.0369474 \n    0.0021774 \n  \n  \n    Surrey Heath \n    328 \n    243 \n    328 \n    23260 \n    24154 \n    47414 \n    70.25703 \n    0.0172171 \n    0.0021745 \n  \n  \n    Tandridge \n    246 \n    240 \n    246 \n    13937 \n    22538 \n    36475 \n    59.01705 \n    0.0367740 \n    0.0011585 \n  \n  \n    Waverley \n    283 \n    258 \n    283 \n    20886 \n    27655 \n    48541 \n    68.70357 \n    0.0272366 \n    0.0019656 \n  \n  \n    Woking \n    321 \n    232 \n    321 \n    20273 \n    27207 \n    47480 \n    59.27815 \n    0.0340234 \n    0.0020659 \n  \n  \n    North Warwickshire \n    277 \n    248 \n    277 \n    25282 \n    16883 \n    42165 \n    58.55078 \n    0.0017477 \n    0.0024229 \n  \n  \n    Nuneaton and Bedworth \n    246 \n    269 \n    246 \n    15037 \n    29798 \n    44835 \n    52.50267 \n    0.0019273 \n    0.0018603 \n  \n  \n    Rugby \n    320 \n    280 \n    320 \n    17523 \n    20443 \n    37966 \n    101.36753 \n    0.0031786 \n    0.0020217 \n  \n  \n    Stratford-on-Avon \n    323 \n    296 \n    323 \n    25409 \n    22594 \n    48003 \n    113.24263 \n    0.0043159 \n    0.0028345 \n  \n  \n    Warwick \n    341 \n    290 \n    341 \n    33726 \n    25353 \n    59079 \n    112.36995 \n    0.0056245 \n    0.0035936 \n  \n  \n    Adur \n    179 \n    194 \n    179 \n    9348 \n    16454 \n    25802 \n    20.54255 \n    0.0046602 \n    0.0009409 \n  \n  \n    Arun \n    221 \n    276 \n    221 \n    8962 \n    27174 \n    36136 \n    58.30258 \n    0.0058173 \n    0.0010559 \n  \n  \n    Chichester \n    300 \n    253 \n    300 \n    24254 \n    16115 \n    40369 \n    73.41119 \n    0.0088457 \n    0.0017499 \n  \n  \n    Crawley \n    335 \n    246 \n    335 \n    43108 \n    18998 \n    62106 \n    72.56600 \n    0.0248586 \n    0.0029446 \n  \n  \n    Horsham \n    297 \n    265 \n    297 \n    16707 \n    26654 \n    43361 \n    75.17375 \n    0.0180015 \n    0.0015769 \n  \n  \n    Mid Sussex \n    306 \n    263 \n    306 \n    20393 \n    31709 \n    52102 \n    80.30516 \n    0.0306906 \n    0.0017534 \n  \n  \n    Worthing \n    218 \n    236 \n    218 \n    16690 \n    17756 \n    34446 \n    42.16681 \n    0.0062165 \n    0.0012322 \n  \n  \n    Bromsgrove \n    252 \n    274 \n    252 \n    18870 \n    25995 \n    44865 \n    66.89830 \n    0.0023463 \n    0.0020102 \n  \n  \n    Malvern Hills \n    199 \n    255 \n    199 \n    10947 \n    14054 \n    25001 \n    46.11698 \n    0.0010464 \n    0.0013943 \n  \n  \n    Redditch \n    262 \n    259 \n    262 \n    13741 \n    17512 \n    31253 \n    61.69639 \n    0.0013303 \n    0.0016096 \n  \n  \n    Worcester \n    277 \n    269 \n    277 \n    21134 \n    17845 \n    38979 \n    75.86830 \n    0.0012321 \n    0.0020818 \n  \n  \n    Wychavon \n    264 \n    290 \n    264 \n    20602 \n    24629 \n    45231 \n    83.46586 \n    0.0017334 \n    0.0021899 \n  \n  \n    Wyre Forest \n    168 \n    266 \n    168 \n    8628 \n    17456 \n    26084 \n    40.84484 \n    0.0008476 \n    0.0010503 \n  \n  \n    Bolton \n    291 \n    302 \n    291 \n    33985 \n    42018 \n    76003 \n    106.68833 \n    0.0021221 \n    0.0027325 \n  \n  \n    Bury \n    261 \n    290 \n    261 \n    26895 \n    41317 \n    68212 \n    83.76982 \n    0.0021060 \n    0.0024213 \n  \n  \n    Manchester \n    345 \n    333 \n    345 \n    179517 \n    72365 \n    251882 \n    161.42941 \n    0.0081722 \n    0.0134337 \n  \n  \n    Oldham \n    241 \n    296 \n    241 \n    29113 \n    36102 \n    65215 \n    80.47174 \n    0.0019906 \n    0.0025758 \n  \n  \n    Rochdale \n    258 \n    286 \n    258 \n    25139 \n    36507 \n    61646 \n    81.99142 \n    0.0017133 \n    0.0022337 \n  \n  \n    Salford \n    327 \n    304 \n    327 \n    59144 \n    51900 \n    111044 \n    118.37394 \n    0.0039354 \n    0.0053232 \n  \n  \n    Stockport \n    320 \n    314 \n    320 \n    47968 \n    58798 \n    106766 \n    127.30501 \n    0.0044807 \n    0.0047446 \n  \n  \n    Tameside \n    243 \n    299 \n    243 \n    23571 \n    45702 \n    69273 \n    84.14139 \n    0.0023514 \n    0.0023393 \n  \n  \n    Trafford \n    316 \n    299 \n    316 \n    70188 \n    50717 \n    120905 \n    113.06647 \n    0.0048473 \n    0.0068569 \n  \n  \n    Wigan \n    311 \n    316 \n    311 \n    27578 \n    59356 \n    86934 \n    126.87502 \n    0.0023235 \n    0.0024079 \n  \n  \n    Knowsley \n    221 \n    273 \n    221 \n    30613 \n    34820 \n    65433 \n    60.35691 \n    0.0015454 \n    0.0025930 \n  \n  \n    Liverpool \n    301 \n    333 \n    301 \n    91162 \n    50759 \n    141921 \n    130.03027 \n    0.0042335 \n    0.0055228 \n  \n  \n    St. Helens \n    259 \n    283 \n    259 \n    22077 \n    35479 \n    57556 \n    81.68252 \n    0.0013260 \n    0.0018928 \n  \n  \n    Sefton \n    217 \n    316 \n    217 \n    28443 \n    46950 \n    75393 \n    77.79284 \n    0.0022610 \n    0.0025645 \n  \n  \n    Wirral \n    241 \n    324 \n    241 \n    17244 \n    44072 \n    61316 \n    97.57457 \n    0.0024890 \n    0.0017127 \n  \n  \n    Barnsley \n    242 \n    302 \n    242 \n    17314 \n    37625 \n    54939 \n    78.98661 \n    0.0015289 \n    0.0016357 \n  \n  \n    Doncaster \n    291 \n    314 \n    291 \n    26494 \n    32298 \n    58792 \n    105.97681 \n    0.0019361 \n    0.0022314 \n  \n  \n    Rotherham \n    287 \n    312 \n    287 \n    36886 \n    43598 \n    80484 \n    110.48375 \n    0.0018907 \n    0.0027850 \n  \n  \n    Sheffield \n    337 \n    337 \n    337 \n    63693 \n    45426 \n    109119 \n    160.95208 \n    0.0033646 \n    0.0042047 \n  \n  \n    Gateshead \n    200 \n    279 \n    200 \n    42942 \n    42399 \n    85341 \n    51.61637 \n    0.0017757 \n    0.0035313 \n  \n  \n    Newcastle upon Tyne \n    320 \n    292 \n    320 \n    89811 \n    38300 \n    128111 \n    104.36164 \n    0.0030717 \n    0.0057526 \n  \n  \n    North Tyneside \n    256 \n    283 \n    256 \n    32439 \n    43079 \n    75518 \n    78.16212 \n    0.0019184 \n    0.0030158 \n  \n  \n    South Tyneside \n    149 \n    271 \n    149 \n    14369 \n    27022 \n    41391 \n    39.24558 \n    0.0009407 \n    0.0014669 \n  \n  \n    Sunderland \n    254 \n    294 \n    254 \n    40830 \n    34827 \n    75657 \n    81.87235 \n    0.0018640 \n    0.0028891 \n  \n  \n    Birmingham \n    345 \n    343 \n    345 \n    166056 \n    100223 \n    266279 \n    174.73617 \n    0.0144646 \n    0.0127334 \n  \n  \n    Coventry \n    339 \n    321 \n    339 \n    50577 \n    39493 \n    90070 \n    145.23539 \n    0.0058079 \n    0.0048386 \n  \n  \n    Dudley \n    318 \n    318 \n    318 \n    38796 \n    57172 \n    95968 \n    126.70449 \n    0.0042945 \n    0.0031201 \n  \n  \n    Sandwell \n    330 \n    322 \n    330 \n    58716 \n    61446 \n    120162 \n    138.97124 \n    0.0058632 \n    0.0045497 \n  \n  \n    Solihull \n    333 \n    320 \n    333 \n    51374 \n    49120 \n    100494 \n    133.30159 \n    0.0075356 \n    0.0053752 \n  \n  \n    Walsall \n    333 \n    313 \n    333 \n    41782 \n    48755 \n    90537 \n    130.19952 \n    0.0039666 \n    0.0033192 \n  \n  \n    Wolverhampton \n    314 \n    305 \n    314 \n    44388 \n    40094 \n    84482 \n    112.57007 \n    0.0032852 \n    0.0030924 \n  \n  \n    Bradford \n    337 \n    318 \n    337 \n    50336 \n    55040 \n    105376 \n    142.38026 \n    0.0043787 \n    0.0048884 \n  \n  \n    Calderdale \n    319 \n    293 \n    319 \n    26978 \n    28593 \n    55571 \n    123.10999 \n    0.0019020 \n    0.0022845 \n  \n  \n    Kirklees \n    318 \n    323 \n    318 \n    34538 \n    59527 \n    94065 \n    133.83505 \n    0.0034612 \n    0.0032210 \n  \n  \n    Leeds \n    340 \n    340 \n    340 \n    121087 \n    65369 \n    186456 \n    166.23405 \n    0.0072535 \n    0.0092803 \n  \n  \n    Wakefield \n    297 \n    322 \n    297 \n    45101 \n    45316 \n    90417 \n    120.17849 \n    0.0029064 \n    0.0038373 \n  \n  \n    Barking and Dagenham \n    259 \n    278 \n    259 \n    28989 \n    45584 \n    74573 \n    74.07906 \n    0.0947743 \n    0.0016538 \n  \n  \n    Barnet \n    335 \n    295 \n    335 \n    53143 \n    94328 \n    147471 \n    107.29323 \n    0.2678205 \n    0.0053627 \n  \n  \n    Bexley \n    297 \n    282 \n    297 \n    28684 \n    63899 \n    92583 \n    81.72835 \n    0.1419983 \n    0.0016966 \n  \n  \n    Brent \n    324 \n    306 \n    324 \n    54353 \n    86120 \n    140473 \n    115.73294 \n    0.2552967 \n    0.0066587 \n  \n  \n    Bromley \n    322 \n    288 \n    322 \n    40897 \n    80537 \n    121434 \n    104.05368 \n    0.2233553 \n    0.0022546 \n  \n  \n    Camden \n    345 \n    282 \n    345 \n    227171 \n    62784 \n    289955 \n    116.18251 \n    0.4715192 \n    0.0277070 \n  \n  \n    Croydon \n    306 \n    302 \n    306 \n    39884 \n    92094 \n    131978 \n    100.31073 \n    0.2122394 \n    0.0026456 \n  \n  \n    Ealing \n    342 \n    296 \n    342 \n    63429 \n    95217 \n    158646 \n    121.88623 \n    0.2424303 \n    0.0072984 \n  \n  \n    Enfield \n    314 \n    294 \n    314 \n    41313 \n    73140 \n    114453 \n    105.61314 \n    0.1777036 \n    0.0031087 \n  \n  \n    Greenwich \n    316 \n    289 \n    316 \n    39593 \n    70802 \n    110395 \n    97.80635 \n    0.1959638 \n    0.0024311 \n  \n  \n    Hackney \n    325 \n    282 \n    325 \n    60542 \n    75197 \n    135739 \n    104.27664 \n    0.2704059 \n    0.0068321 \n  \n  \n    Hammersmith and Fulham \n    340 \n    273 \n    340 \n    90212 \n    64765 \n    154977 \n    103.70858 \n    0.3005236 \n    0.0118080 \n  \n  \n    Haringey \n    300 \n    286 \n    300 \n    37279 \n    80177 \n    117456 \n    93.22087 \n    0.2386431 \n    0.0032502 \n  \n  \n    Harrow \n    311 \n    287 \n    311 \n    28680 \n    68538 \n    97218 \n    92.42766 \n    0.1476876 \n    0.0030209 \n  \n  \n    Havering \n    286 \n    283 \n    286 \n    31769 \n    59870 \n    91639 \n    80.88612 \n    0.1240316 \n    0.0018851 \n  \n  \n    Hillingdon \n    345 \n    303 \n    345 \n    96119 \n    61002 \n    157121 \n    123.20678 \n    0.1448890 \n    0.0086205 \n  \n  \n    Hounslow \n    339 \n    298 \n    339 \n    73977 \n    71624 \n    145601 \n    113.12328 \n    0.1694069 \n    0.0072375 \n  \n  \n    Islington \n    342 \n    277 \n    342 \n    132028 \n    70981 \n    203009 \n    102.43241 \n    0.3661235 \n    0.0151687 \n  \n  \n    Kensington and Chelsea \n    334 \n    256 \n    334 \n    86860 \n    50799 \n    137659 \n    87.89829 \n    0.3011796 \n    0.0144531 \n  \n  \n    Kingston upon Thames \n    317 \n    272 \n    317 \n    35923 \n    45101 \n    81024 \n    88.78187 \n    0.1066740 \n    0.0027264 \n  \n  \n    Lambeth \n    339 \n    295 \n    339 \n    87037 \n    115419 \n    202456 \n    120.60327 \n    0.4329508 \n    0.0086193 \n  \n  \n    Lewisham \n    273 \n    288 \n    273 \n    32829 \n    89663 \n    122492 \n    81.85742 \n    0.2550396 \n    0.0023540 \n  \n  \n    Merton \n    309 \n    280 \n    309 \n    38381 \n    67646 \n    106027 \n    87.42231 \n    0.1894013 \n    0.0028738 \n  \n  \n    Newham \n    331 \n    305 \n    331 \n    49198 \n    77274 \n    126472 \n    118.87240 \n    0.2181891 \n    0.0037221 \n  \n  \n    Redbridge \n    266 \n    289 \n    266 \n    32064 \n    77588 \n    109652 \n    80.78754 \n    0.1798939 \n    0.0020014 \n  \n  \n    Richmond upon Thames \n    316 \n    273 \n    316 \n    38600 \n    58964 \n    97564 \n    87.93170 \n    0.1564364 \n    0.0037355 \n  \n  \n    Southwark \n    343 \n    297 \n    343 \n    132137 \n    95381 \n    227518 \n    120.54708 \n    0.4190788 \n    0.0124909 \n  \n  \n    Sutton \n    323 \n    268 \n    323 \n    29841 \n    55030 \n    84871 \n    82.50370 \n    0.1105433 \n    0.0019988 \n  \n  \n    Tower Hamlets \n    340 \n    296 \n    340 \n    185467 \n    70808 \n    256275 \n    119.14147 \n    0.4108055 \n    0.0210011 \n  \n  \n    Waltham Forest \n    300 \n    284 \n    300 \n    30367 \n    71912 \n    102279 \n    87.15664 \n    0.1866278 \n    0.0023823 \n  \n  \n    Wandsworth \n    327 \n    305 \n    327 \n    63894 \n    124029 \n    187923 \n    121.44261 \n    0.4178796 \n    0.0058755 \n  \n  \n    Westminster,City of London \n    345 \n    289 \n    345 \n    866007 \n    42018 \n    908025 \n    109.10666 \n    1.0000000 \n    0.0736260 \n  \n  \n    Isle of Anglesey \n    156 \n    203 \n    156 \n    3104 \n    8796 \n    11900 \n    31.56061 \n    0.0002621 \n    0.0008721 \n  \n  \n    Gwynedd \n    198 \n    256 \n    198 \n    11022 \n    7125 \n    18147 \n    50.38462 \n    0.0004746 \n    0.0014136 \n  \n  \n    Conwy \n    144 \n    244 \n    144 \n    7404 \n    12011 \n    19415 \n    30.74925 \n    0.0005230 \n    0.0012531 \n  \n  \n    Denbighshire \n    168 \n    231 \n    168 \n    11688 \n    11327 \n    23015 \n    36.51620 \n    0.0004665 \n    0.0014354 \n  \n  \n    Flintshire \n    284 \n    278 \n    284 \n    23770 \n    25459 \n    49229 \n    87.62641 \n    0.0012318 \n    0.0021949 \n  \n  \n    Wrexham \n    263 \n    264 \n    263 \n    13956 \n    16546 \n    30502 \n    73.76438 \n    0.0008075 \n    0.0014989 \n  \n  \n    Ceredigion \n    119 \n    211 \n    119 \n    4114 \n    4008 \n    8122 \n    21.56446 \n    0.0003086 \n    0.0009089 \n  \n  \n    Pembrokeshire \n    242 \n    245 \n    242 \n    4107 \n    4992 \n    9099 \n    63.15133 \n    0.0005744 \n    0.0008883 \n  \n  \n    Carmarthenshire \n    169 \n    269 \n    169 \n    10881 \n    17404 \n    28285 \n    44.90724 \n    0.0008303 \n    0.0017942 \n  \n  \n    Swansea \n    279 \n    300 \n    279 \n    27777 \n    19589 \n    47366 \n    98.91703 \n    0.0014553 \n    0.0027418 \n  \n  \n    Neath Port Talbot \n    146 \n    248 \n    146 \n    15691 \n    22974 \n    38665 \n    32.14387 \n    0.0006626 \n    0.0020202 \n  \n  \n    Bridgend \n    192 \n    261 \n    192 \n    17241 \n    17783 \n    35024 \n    49.79841 \n    0.0007512 \n    0.0018916 \n  \n  \n    The Vale of Glamorgan \n    250 \n    276 \n    250 \n    13263 \n    26340 \n    39603 \n    77.19142 \n    0.0014653 \n    0.0018653 \n  \n  \n    Cardiff \n    321 \n    310 \n    321 \n    73041 \n    32252 \n    105293 \n    126.18715 \n    0.0032443 \n    0.0056728 \n  \n  \n    Rhondda Cynon Taf \n    239 \n    289 \n    239 \n    19349 \n    36305 \n    55654 \n    72.07335 \n    0.0012933 \n    0.0023061 \n  \n  \n    Caerphilly \n    244 \n    278 \n    244 \n    15975 \n    34600 \n    50575 \n    73.20084 \n    0.0010057 \n    0.0019126 \n  \n  \n    Blaenau Gwent \n    122 \n    185 \n    122 \n    5439 \n    11664 \n    17103 \n    18.05921 \n    0.0002741 \n    0.0008538 \n  \n  \n    Torfaen \n    149 \n    222 \n    149 \n    13902 \n    15181 \n    29083 \n    27.77521 \n    0.0005208 \n    0.0016802 \n  \n  \n    Monmouthshire \n    199 \n    262 \n    199 \n    12988 \n    17540 \n    30528 \n    50.15730 \n    0.0012077 \n    0.0015550 \n  \n  \n    Newport \n    251 \n    264 \n    251 \n    30393 \n    21238 \n    51631 \n    68.26980 \n    0.0012649 \n    0.0030589 \n  \n  \n    Powys \n    225 \n    274 \n    225 \n    8116 \n    11453 \n    19569 \n    63.48931 \n    0.0009664 \n    0.0011444 \n  \n  \n    Merthyr Tydfil \n    93 \n    179 \n    93 \n    8549 \n    8716 \n    17265 \n    14.11701 \n    0.0003200 \n    0.0010095 \n  \n\n\n\n\n\n\n\n\nQuestion: Can you try to interpret these different centrality measures in the context of our data?\n\n\n\nThis is helpful, but we might also be interested in discussing the rankings: Which one is the most central local authority in the commuting network? Instead of reading from the table, we can just calculate the ranks.\nTo begin with, let’s do a test.\n\ntest <- centralities %>%\n  mutate(rank.test = dense_rank(desc(in.degree))) %>% # we are interested in dense ranking:\n                                                      # i.e. two lines with the same value have\n                                                      # will the same ranking,\n                                                      # desc stands for descending order\n  arrange(rank.test) %>%                              # arranges the data frame based on rank.test\n  glimpse()\n\nRows: 346\nColumns: 11\n$ names        <chr> \"Wiltshire\", \"Manchester\", \"Birmingham\", \"Camden\", \"Hilli~\n$ in.degree    <dbl> 345, 345, 345, 345, 345, 345, 344, 343, 343, 343, 342, 34~\n$ out.degree   <dbl> 331, 333, 343, 282, 303, 289, 307, 288, 312, 297, 315, 29~\n$ degree       <dbl> 345, 345, 345, 345, 345, 345, 344, 343, 343, 343, 342, 34~\n$ w.in.degree  <dbl> 39717, 179517, 166056, 227171, 96119, 866007, 44450, 4127~\n$ w.out.degree <dbl> 55625, 72365, 100223, 62784, 61002, 42018, 27780, 27862, ~\n$ w.degree     <dbl> 95342, 251882, 266279, 289955, 157121, 908025, 72230, 691~\n$ btwnss       <dbl> 160.51941, 161.42941, 174.73617, 116.18251, 123.20678, 10~\n$ eigen        <dbl> 0.015047862, 0.008172246, 0.014464632, 0.471519182, 0.144~\n$ prank        <dbl> 0.004065817, 0.013433702, 0.012733372, 0.027707044, 0.008~\n$ rank.test    <int> 1, 1, 1, 1, 1, 1, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 5, 6, 6, ~\n\n\n\nranks <- centralities %>%\n  mutate_at(vars(in.degree:prank), \n            funs(dense_rank(desc(.)))) # . for all the selected variables\n\nWarning: `funs()` was deprecated in dplyr 0.8.0.\nPlease use a list of either functions or lambdas: \n\n  # Simple named list: \n  list(mean = mean, median = median)\n\n  # Auto named with `tibble::lst()`: \n  tibble::lst(mean, median)\n\n  # Using lambdas\n  list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))\nThis warning is displayed once every 8 hours.\nCall `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.\n\n# Adds a prefix r_ before each column name to indicate the ranks\ncolnames(ranks) <- paste(\"r\", colnames(ranks), sep = \"_\")\n\n\n\n\nQuestion: Can you quickly compare the ranks with the cetrnalities object based on the rankings?\n\n\n\n\nhead(centralities)\n\n# A tibble: 6 x 10\n  names    in.de~1 out.d~2 degree w.in.~3 w.out~4 w.deg~5 btwnss   eigen   prank\n  <chr>      <dbl>   <dbl>  <dbl>   <dbl>   <dbl>   <dbl>  <dbl>   <dbl>   <dbl>\n1 Hartlep~     111     231    111    8360   11261   19621   21.4 3.90e-4 0.00109\n2 Middles~     214     250    214   30038   20664   50702   53.1 6.79e-4 0.00296\n3 Redcar ~     118     242    118   12786   21904   34690   23.5 4.59e-4 0.00178\n4 Stockto~     216     292    216   29986   29329   59315   65.9 1.10e-3 0.00318\n5 Darling~     237     258    237   18445   15036   33481   63.6 7.03e-4 0.00181\n6 Halton       275     274    275   23080   22981   46061   82.8 1.24e-3 0.00216\n# ... with abbreviated variable names 1: in.degree, 2: out.degree,\n#   3: w.in.degree, 4: w.out.degree, 5: w.degree\n\nhead(ranks)\n\n# A tibble: 6 x 10\n  r_names        r_in.~1 r_out~2 r_deg~3 r_w.i~4 r_w.o~5 r_w.d~6 r_btw~7 r_eigen\n  <chr>            <int>   <int>   <int>   <int>   <int>   <int>   <int>   <int>\n1 Hartlepool         160     101     160     308     315     313     338     335\n2 Middlesbrough      113      82     113     101     215     154     254     309\n3 Redcar and Cl~     158      90     158     263     199     240     334     329\n4 Stockton-on-T~     112      40     112     102     132     114     207     269\n5 Darlington          95      74      95     200     282     247     215     307\n6 Halton              64      58      64     154     186     175     142     256\n# ... with 1 more variable: r_prank <int>, and abbreviated variable names\n#   1: r_in.degree, 2: r_out.degree, 3: r_degree, 4: r_w.in.degree,\n#   5: r_w.out.degree, 6: r_w.degree, 7: r_btwnss\n\n# So, because both dataframes have the same structure and order we can just use\n# cbind().\n\ncentralities <- cbind(centralities, ranks) %>% \n  arrange(w.in.degree) %>% \n  select(-r_names) %>% \n  glimpse()\n\nRows: 346\nColumns: 19\n$ names          <chr> \"Isle of Wight\", \"West Somerset\", \"Isle of Anglesey\", \"~\n$ in.degree      <dbl> 219, 165, 156, 206, 116, 242, 119, 125, 184, 144, 122, ~\n$ out.degree     <dbl> 244, 153, 203, 209, 196, 245, 211, 208, 244, 173, 185, ~\n$ degree         <dbl> 219, 165, 156, 206, 116, 242, 119, 125, 184, 144, 122, ~\n$ w.in.degree    <dbl> 2083, 2780, 3104, 3447, 3575, 4107, 4114, 4593, 5058, 5~\n$ w.out.degree   <dbl> 4544, 3167, 8796, 11981, 8288, 4992, 4008, 8149, 6783, ~\n$ w.degree       <dbl> 6627, 5947, 11900, 15428, 11863, 9099, 8122, 12742, 118~\n$ btwnss         <dbl> 44.65755, 18.02491, 31.56061, 35.60819, 14.07664, 63.15~\n$ eigen          <dbl> 0.0019493428, 0.0004052957, 0.0002620964, 0.0005797550,~\n$ prank          <dbl> 0.0006276137, 0.0007693002, 0.0008720594, 0.0008753942,~\n$ r_in.degree    <int> 109, 142, 148, 119, 159, 91, 157, 155, 132, 153, 156, 1~\n$ r_out.degree   <int> 88, 131, 119, 116, 121, 87, 114, 117, 88, 130, 128, 108~\n$ r_degree       <int> 109, 142, 148, 119, 159, 91, 157, 155, 132, 153, 156, 1~\n$ r_w.in.degree  <int> 346, 345, 344, 343, 342, 341, 340, 339, 338, 337, 336, ~\n$ r_w.out.degree <int> 343, 345, 325, 302, 329, 339, 344, 330, 334, 340, 308, ~\n$ r_w.degree     <int> 345, 346, 338, 330, 339, 343, 344, 336, 340, 342, 325, ~\n$ r_btwnss       <int> 285, 344, 321, 308, 346, 218, 337, 336, 281, 339, 343, ~\n$ r_eigen        <int> 207, 333, 342, 316, 337, 317, 339, 324, 325, 345, 341, ~\n$ r_prank        <int> 346, 343, 337, 336, 328, 335, 332, 330, 334, 272, 339, ~\n\n# It combines the centralities (centralities) and ranks (ranks) objects by columns.\n# You can imagine it as stacking the columns of ranks after the columns of centralities.\n# Since both objects refer to the same observations (i.e. the same rows), we can\n# just combine them.\n\n\n# And this is a nicer table of centralities:\ncentralities %>% kable(caption = \"Centralities\") %>% \n  scroll_box(width = \"100%\", height = \"300px\")       #Again the `kableExtra` function\n\n\n\nCentralities\n \n  \n    names \n    in.degree \n    out.degree \n    degree \n    w.in.degree \n    w.out.degree \n    w.degree \n    btwnss \n    eigen \n    prank \n    r_in.degree \n    r_out.degree \n    r_degree \n    r_w.in.degree \n    r_w.out.degree \n    r_w.degree \n    r_btwnss \n    r_eigen \n    r_prank \n  \n \n\n  \n    Isle of Wight \n    219 \n    244 \n    219 \n    2083 \n    4544 \n    6627 \n    44.65755 \n    0.0019493 \n    0.0006276 \n    109 \n    88 \n    109 \n    346 \n    343 \n    345 \n    285 \n    207 \n    346 \n  \n  \n    West Somerset \n    165 \n    153 \n    165 \n    2780 \n    3167 \n    5947 \n    18.02491 \n    0.0004053 \n    0.0007693 \n    142 \n    131 \n    142 \n    345 \n    345 \n    346 \n    344 \n    333 \n    343 \n  \n  \n    Isle of Anglesey \n    156 \n    203 \n    156 \n    3104 \n    8796 \n    11900 \n    31.56061 \n    0.0002621 \n    0.0008721 \n    148 \n    119 \n    148 \n    344 \n    325 \n    338 \n    321 \n    342 \n    337 \n  \n  \n    Weymouth and Portland \n    206 \n    209 \n    206 \n    3447 \n    11981 \n    15428 \n    35.60819 \n    0.0005798 \n    0.0008754 \n    119 \n    116 \n    119 \n    343 \n    302 \n    330 \n    308 \n    316 \n    336 \n  \n  \n    Torridge \n    116 \n    196 \n    116 \n    3575 \n    8288 \n    11863 \n    14.07664 \n    0.0003644 \n    0.0009993 \n    159 \n    121 \n    159 \n    342 \n    329 \n    339 \n    346 \n    337 \n    328 \n  \n  \n    Pembrokeshire \n    242 \n    245 \n    242 \n    4107 \n    4992 \n    9099 \n    63.15133 \n    0.0005744 \n    0.0008883 \n    91 \n    87 \n    91 \n    341 \n    339 \n    343 \n    218 \n    317 \n    335 \n  \n  \n    Ceredigion \n    119 \n    211 \n    119 \n    4114 \n    4008 \n    8122 \n    21.56446 \n    0.0003086 \n    0.0009089 \n    157 \n    114 \n    157 \n    340 \n    344 \n    344 \n    337 \n    339 \n    332 \n  \n  \n    West Devon \n    125 \n    208 \n    125 \n    4593 \n    8149 \n    12742 \n    22.82693 \n    0.0005090 \n    0.0009780 \n    155 \n    117 \n    155 \n    339 \n    330 \n    336 \n    336 \n    324 \n    330 \n  \n  \n    Scarborough \n    184 \n    244 \n    184 \n    5058 \n    6783 \n    11841 \n    46.02664 \n    0.0005090 \n    0.0008944 \n    132 \n    88 \n    132 \n    338 \n    334 \n    340 \n    281 \n    325 \n    334 \n  \n  \n    Barrow-in-Furness \n    144 \n    173 \n    144 \n    5100 \n    4715 \n    9815 \n    20.75604 \n    0.0002271 \n    0.0014106 \n    153 \n    130 \n    153 \n    337 \n    340 \n    342 \n    339 \n    345 \n    272 \n  \n  \n    Blaenau Gwent \n    122 \n    185 \n    122 \n    5439 \n    11664 \n    17103 \n    18.05921 \n    0.0002741 \n    0.0008538 \n    156 \n    128 \n    156 \n    336 \n    308 \n    325 \n    343 \n    341 \n    339 \n  \n  \n    Mid Devon \n    163 \n    220 \n    163 \n    5569 \n    13667 \n    19236 \n    31.82063 \n    0.0007052 \n    0.0015827 \n    144 \n    108 \n    144 \n    335 \n    291 \n    316 \n    320 \n    306 \n    246 \n  \n  \n    Thanet \n    188 \n    242 \n    188 \n    5846 \n    13348 \n    19194 \n    36.05674 \n    0.0056380 \n    0.0007948 \n    130 \n    90 \n    130 \n    334 \n    294 \n    317 \n    307 \n    134 \n    342 \n  \n  \n    Forest of Dean \n    206 \n    248 \n    206 \n    6007 \n    14512 \n    20519 \n    48.05798 \n    0.0008705 \n    0.0010042 \n    119 \n    84 \n    119 \n    333 \n    287 \n    306 \n    271 \n    287 \n    324 \n  \n  \n    Melton \n    175 \n    223 \n    175 \n    6142 \n    10160 \n    16302 \n    26.91873 \n    0.0009008 \n    0.0009814 \n    138 \n    106 \n    138 \n    332 \n    319 \n    328 \n    331 \n    285 \n    329 \n  \n  \n    Eden \n    225 \n    187 \n    225 \n    6209 \n    4666 \n    10875 \n    41.29631 \n    0.0002394 \n    0.0016928 \n    105 \n    126 \n    105 \n    331 \n    341 \n    341 \n    295 \n    344 \n    225 \n  \n  \n    Allerdale \n    188 \n    203 \n    188 \n    6436 \n    11733 \n    18169 \n    33.91827 \n    0.0002556 \n    0.0019898 \n    130 \n    119 \n    130 \n    330 \n    305 \n    320 \n    313 \n    343 \n    182 \n  \n  \n    Maldon \n    210 \n    210 \n    210 \n    6513 \n    13689 \n    20202 \n    33.49157 \n    0.0119064 \n    0.0007505 \n    117 \n    115 \n    117 \n    329 \n    290 \n    309 \n    316 \n    104 \n    344 \n  \n  \n    Tendring \n    229 \n    257 \n    229 \n    6763 \n    17203 \n    23966 \n    51.10530 \n    0.0091833 \n    0.0008516 \n    102 \n    75 \n    102 \n    328 \n    260 \n    299 \n    261 \n    109 \n    340 \n  \n  \n    Rutland \n    223 \n    225 \n    223 \n    6776 \n    6446 \n    13222 \n    40.36699 \n    0.0012338 \n    0.0010011 \n    107 \n    104 \n    107 \n    327 \n    335 \n    335 \n    298 \n    257 \n    326 \n  \n  \n    North Dorset \n    254 \n    216 \n    254 \n    6962 \n    9997 \n    16959 \n    47.73131 \n    0.0018001 \n    0.0011060 \n    80 \n    111 \n    80 \n    326 \n    320 \n    326 \n    274 \n    221 \n    311 \n  \n  \n    Ryedale \n    168 \n    188 \n    168 \n    7047 \n    6445 \n    13492 \n    28.82552 \n    0.0004876 \n    0.0011190 \n    141 \n    125 \n    141 \n    325 \n    336 \n    334 \n    326 \n    326 \n    310 \n  \n  \n    Richmondshire \n    324 \n    234 \n    324 \n    7255 \n    7057 \n    14312 \n    93.34512 \n    0.0007768 \n    0.0011037 \n    21 \n    98 \n    21 \n    324 \n    333 \n    332 \n    105 \n    296 \n    312 \n  \n  \n    Gosport \n    272 \n    237 \n    272 \n    7327 \n    20473 \n    27800 \n    58.39117 \n    0.0018505 \n    0.0010068 \n    67 \n    95 \n    67 \n    323 \n    216 \n    280 \n    236 \n    218 \n    323 \n  \n  \n    Conwy \n    144 \n    244 \n    144 \n    7404 \n    12011 \n    19415 \n    30.74925 \n    0.0005230 \n    0.0012531 \n    153 \n    88 \n    153 \n    322 \n    301 \n    315 \n    322 \n    320 \n    295 \n  \n  \n    Castle Point \n    154 \n    236 \n    154 \n    7467 \n    23473 \n    30940 \n    28.09746 \n    0.0251378 \n    0.0007424 \n    149 \n    96 \n    149 \n    321 \n    179 \n    262 \n    328 \n    77 \n    345 \n  \n  \n    Boston \n    144 \n    211 \n    144 \n    7495 \n    7088 \n    14583 \n    23.15199 \n    0.0004174 \n    0.0010821 \n    153 \n    114 \n    153 \n    320 \n    332 \n    331 \n    335 \n    332 \n    314 \n  \n  \n    Rossendale \n    152 \n    218 \n    152 \n    7571 \n    16019 \n    23590 \n    28.52086 \n    0.0004274 \n    0.0010012 \n    150 \n    109 \n    150 \n    319 \n    274 \n    300 \n    327 \n    331 \n    325 \n  \n  \n    Purbeck \n    226 \n    186 \n    226 \n    7634 \n    8732 \n    16366 \n    33.64330 \n    0.0010481 \n    0.0011865 \n    104 \n    127 \n    104 \n    318 \n    327 \n    327 \n    314 \n    272 \n    306 \n  \n  \n    High Peak \n    188 \n    255 \n    188 \n    7663 \n    17319 \n    24982 \n    45.93415 \n    0.0008832 \n    0.0009999 \n    130 \n    77 \n    130 \n    317 \n    259 \n    295 \n    282 \n    286 \n    327 \n  \n  \n    North Devon \n    261 \n    233 \n    261 \n    7735 \n    4645 \n    12380 \n    56.35792 \n    0.0007480 \n    0.0012730 \n    75 \n    99 \n    75 \n    316 \n    342 \n    337 \n    246 \n    301 \n    292 \n  \n  \n    Copeland \n    162 \n    185 \n    162 \n    7919 \n    5986 \n    13905 \n    26.13944 \n    0.0001593 \n    0.0017038 \n    145 \n    128 \n    145 \n    315 \n    337 \n    333 \n    332 \n    346 \n    222 \n  \n  \n    Hastings \n    164 \n    236 \n    164 \n    8006 \n    11732 \n    19738 \n    29.94627 \n    0.0049038 \n    0.0009044 \n    143 \n    96 \n    143 \n    314 \n    306 \n    311 \n    324 \n    142 \n    333 \n  \n  \n    Lancaster \n    209 \n    274 \n    209 \n    8091 \n    11592 \n    19683 \n    59.97534 \n    0.0006400 \n    0.0015040 \n    118 \n    58 \n    118 \n    313 \n    309 \n    312 \n    226 \n    312 \n    259 \n  \n  \n    Powys \n    225 \n    274 \n    225 \n    8116 \n    11453 \n    19569 \n    63.48931 \n    0.0009664 \n    0.0011444 \n    105 \n    58 \n    105 \n    312 \n    312 \n    314 \n    216 \n    279 \n    309 \n  \n  \n    East Cambridgeshire \n    216 \n    247 \n    216 \n    8216 \n    20939 \n    29155 \n    41.75094 \n    0.0043745 \n    0.0012342 \n    112 \n    85 \n    112 \n    311 \n    210 \n    275 \n    294 \n    151 \n    296 \n  \n  \n    Waveney \n    193 \n    239 \n    193 \n    8325 \n    11675 \n    20000 \n    39.78191 \n    0.0012538 \n    0.0012324 \n    127 \n    93 \n    127 \n    310 \n    307 \n    310 \n    299 \n    255 \n    298 \n  \n  \n    East Lindsey \n    272 \n    280 \n    272 \n    8351 \n    12695 \n    21046 \n    85.42615 \n    0.0007084 \n    0.0012323 \n    67 \n    52 \n    67 \n    309 \n    300 \n    304 \n    128 \n    305 \n    299 \n  \n  \n    Hartlepool \n    111 \n    231 \n    111 \n    8360 \n    11261 \n    19621 \n    21.38152 \n    0.0003901 \n    0.0010887 \n    160 \n    101 \n    160 \n    308 \n    315 \n    313 \n    338 \n    335 \n    313 \n  \n  \n    North Norfolk \n    187 \n    238 \n    187 \n    8506 \n    11750 \n    20256 \n    34.85599 \n    0.0013520 \n    0.0011684 \n    131 \n    94 \n    131 \n    307 \n    304 \n    308 \n    311 \n    246 \n    307 \n  \n  \n    Merthyr Tydfil \n    93 \n    179 \n    93 \n    8549 \n    8716 \n    17265 \n    14.11701 \n    0.0003200 \n    0.0010095 \n    161 \n    129 \n    161 \n    306 \n    328 \n    324 \n    345 \n    338 \n    322 \n  \n  \n    Torbay \n    191 \n    252 \n    191 \n    8569 \n    12764 \n    21333 \n    46.76698 \n    0.0007531 \n    0.0015136 \n    129 \n    80 \n    129 \n    305 \n    299 \n    303 \n    276 \n    298 \n    257 \n  \n  \n    Wyre Forest \n    168 \n    266 \n    168 \n    8628 \n    17456 \n    26084 \n    40.84484 \n    0.0008476 \n    0.0010503 \n    141 \n    66 \n    141 \n    304 \n    255 \n    286 \n    297 \n    289 \n    317 \n  \n  \n    Craven \n    163 \n    202 \n    163 \n    8901 \n    9015 \n    17916 \n    30.47052 \n    0.0005107 \n    0.0011944 \n    144 \n    120 \n    144 \n    303 \n    323 \n    322 \n    323 \n    323 \n    303 \n  \n  \n    South Holland \n    212 \n    265 \n    212 \n    8955 \n    11472 \n    20427 \n    50.29864 \n    0.0015531 \n    0.0013288 \n    115 \n    67 \n    115 \n    302 \n    311 \n    307 \n    264 \n    233 \n    285 \n  \n  \n    Arun \n    221 \n    276 \n    221 \n    8962 \n    27174 \n    36136 \n    58.30258 \n    0.0058173 \n    0.0010559 \n    108 \n    56 \n    108 \n    301 \n    146 \n    229 \n    237 \n    131 \n    316 \n  \n  \n    West Lindsey \n    180 \n    265 \n    180 \n    9169 \n    19863 \n    29032 \n    46.25926 \n    0.0006861 \n    0.0013060 \n    135 \n    67 \n    135 \n    300 \n    225 \n    277 \n    277 \n    308 \n    289 \n  \n  \n    Corby \n    202 \n    239 \n    202 \n    9176 \n    8734 \n    17910 \n    38.33096 \n    0.0013677 \n    0.0012179 \n    121 \n    93 \n    121 \n    299 \n    326 \n    323 \n    302 \n    245 \n    301 \n  \n  \n    Sedgemoor \n    232 \n    259 \n    232 \n    9209 \n    16894 \n    26103 \n    60.36191 \n    0.0010367 \n    0.0015783 \n    100 \n    73 \n    100 \n    298 \n    264 \n    285 \n    224 \n    275 \n    248 \n  \n  \n    Great Yarmouth \n    198 \n    220 \n    198 \n    9250 \n    9511 \n    18761 \n    38.18528 \n    0.0007335 \n    0.0012681 \n    125 \n    108 \n    125 \n    297 \n    322 \n    318 \n    303 \n    303 \n    293 \n  \n  \n    Adur \n    179 \n    194 \n    179 \n    9348 \n    16454 \n    25802 \n    20.54255 \n    0.0046602 \n    0.0009409 \n    136 \n    122 \n    136 \n    296 \n    270 \n    287 \n    341 \n    144 \n    331 \n  \n  \n    Rother \n    182 \n    215 \n    182 \n    9630 \n    15054 \n    24684 \n    27.26210 \n    0.0074697 \n    0.0010183 \n    133 \n    112 \n    133 \n    295 \n    281 \n    296 \n    330 \n    119 \n    321 \n  \n  \n    South Lakeland \n    234 \n    235 \n    234 \n    9651 \n    8994 \n    18645 \n    56.17406 \n    0.0005490 \n    0.0020873 \n    98 \n    97 \n    98 \n    294 \n    324 \n    319 \n    247 \n    318 \n    163 \n  \n  \n    Carlisle \n    306 \n    242 \n    306 \n    9904 \n    5953 \n    15857 \n    78.20939 \n    0.0005917 \n    0.0021074 \n    39 \n    90 \n    39 \n    293 \n    338 \n    329 \n    165 \n    314 \n    162 \n  \n  \n    Dover \n    234 \n    249 \n    234 \n    9959 \n    16669 \n    26628 \n    48.35895 \n    0.0045037 \n    0.0010274 \n    98 \n    83 \n    98 \n    292 \n    267 \n    283 \n    270 \n    147 \n    319 \n  \n  \n    Fenland \n    179 \n    265 \n    179 \n    10010 \n    16271 \n    26281 \n    41.16076 \n    0.0024054 \n    0.0013423 \n    136 \n    67 \n    136 \n    291 \n    271 \n    284 \n    296 \n    191 \n    281 \n  \n  \n    East Northamptonshire \n    244 \n    274 \n    244 \n    10043 \n    22265 \n    32308 \n    68.11886 \n    0.0038892 \n    0.0013554 \n    89 \n    58 \n    89 \n    290 \n    197 \n    255 \n    203 \n    164 \n    279 \n  \n  \n    Gravesham \n    212 \n    258 \n    212 \n    10155 \n    25676 \n    35831 \n    42.33955 \n    0.0298471 \n    0.0008559 \n    115 \n    74 \n    115 \n    289 \n    161 \n    231 \n    292 \n    67 \n    338 \n  \n  \n    Staffordshire Moorlands \n    200 \n    270 \n    200 \n    10201 \n    22847 \n    33048 \n    49.71024 \n    0.0007831 \n    0.0011897 \n    123 \n    62 \n    123 \n    288 \n    191 \n    250 \n    268 \n    294 \n    305 \n  \n  \n    Rochford \n    178 \n    239 \n    178 \n    10411 \n    24351 \n    34762 \n    35.41168 \n    0.0271557 \n    0.0008385 \n    137 \n    93 \n    137 \n    287 \n    175 \n    239 \n    309 \n    73 \n    341 \n  \n  \n    Pendle \n    178 \n    212 \n    178 \n    10432 \n    15013 \n    25445 \n    34.52029 \n    0.0003655 \n    0.0013588 \n    137 \n    113 \n    137 \n    286 \n    283 \n    291 \n    312 \n    336 \n    277 \n  \n  \n    Christchurch \n    175 \n    192 \n    175 \n    10677 \n    10213 \n    20890 \n    24.36314 \n    0.0012017 \n    0.0012651 \n    138 \n    123 \n    138 \n    285 \n    318 \n    305 \n    333 \n    262 \n    294 \n  \n  \n    Herefordshire, County of \n    306 \n    292 \n    306 \n    10786 \n    13434 \n    24220 \n    103.12522 \n    0.0019351 \n    0.0013338 \n    39 \n    40 \n    39 \n    284 \n    293 \n    298 \n    82 \n    209 \n    283 \n  \n  \n    Wyre \n    157 \n    226 \n    157 \n    10819 \n    21156 \n    31975 \n    33.40469 \n    0.0005131 \n    0.0018022 \n    147 \n    103 \n    147 \n    283 \n    206 \n    256 \n    317 \n    322 \n    210 \n  \n  \n    Carmarthenshire \n    169 \n    269 \n    169 \n    10881 \n    17404 \n    28285 \n    44.90724 \n    0.0008303 \n    0.0017942 \n    140 \n    63 \n    140 \n    282 \n    257 \n    279 \n    283 \n    290 \n    211 \n  \n  \n    Malvern Hills \n    199 \n    255 \n    199 \n    10947 \n    14054 \n    25001 \n    46.11698 \n    0.0010464 \n    0.0013943 \n    124 \n    77 \n    124 \n    281 \n    288 \n    293 \n    279 \n    273 \n    273 \n  \n  \n    Shepway \n    232 \n    250 \n    232 \n    10992 \n    14806 \n    25798 \n    48.02087 \n    0.0065689 \n    0.0010662 \n    100 \n    82 \n    100 \n    280 \n    285 \n    288 \n    272 \n    125 \n    315 \n  \n  \n    Gwynedd \n    198 \n    256 \n    198 \n    11022 \n    7125 \n    18147 \n    50.38462 \n    0.0004746 \n    0.0014136 \n    125 \n    76 \n    125 \n    279 \n    331 \n    321 \n    263 \n    327 \n    271 \n  \n  \n    King's Lynn and West Norfolk \n    299 \n    290 \n    299 \n    11047 \n    14664 \n    25711 \n    94.66804 \n    0.0025603 \n    0.0013157 \n    45 \n    42 \n    45 \n    278 \n    286 \n    289 \n    103 \n    185 \n    286 \n  \n  \n    Cornwall,Isles of Scilly \n    341 \n    330 \n    341 \n    11163 \n    18567 \n    29730 \n    155.46166 \n    0.0032429 \n    0.0016854 \n    5 \n    7 \n    5 \n    277 \n    238 \n    271 \n    6 \n    174 \n    228 \n  \n  \n    Tamworth \n    272 \n    268 \n    272 \n    11312 \n    19185 \n    30497 \n    75.84114 \n    0.0011977 \n    0.0014167 \n    67 \n    64 \n    67 \n    276 \n    232 \n    266 \n    177 \n    264 \n    270 \n  \n  \n    Mendip \n    250 \n    247 \n    250 \n    11450 \n    15842 \n    27292 \n    64.75602 \n    0.0021761 \n    0.0015764 \n    84 \n    85 \n    84 \n    275 \n    276 \n    281 \n    212 \n    199 \n    250 \n  \n  \n    North East Lincolnshire \n    219 \n    286 \n    219 \n    11562 \n    10600 \n    22162 \n    65.06108 \n    0.0007256 \n    0.0013687 \n    109 \n    46 \n    109 \n    274 \n    317 \n    302 \n    210 \n    304 \n    276 \n  \n  \n    Babergh \n    237 \n    243 \n    237 \n    11616 \n    18040 \n    29656 \n    49.49746 \n    0.0069612 \n    0.0013146 \n    95 \n    89 \n    95 \n    273 \n    246 \n    272 \n    269 \n    122 \n    287 \n  \n  \n    Denbighshire \n    168 \n    231 \n    168 \n    11688 \n    11327 \n    23015 \n    36.51620 \n    0.0004665 \n    0.0014354 \n    141 \n    101 \n    141 \n    272 \n    314 \n    301 \n    305 \n    328 \n    267 \n  \n  \n    West Oxfordshire \n    333 \n    260 \n    333 \n    11768 \n    19990 \n    31758 \n    83.83685 \n    0.0051550 \n    0.0017197 \n    13 \n    72 \n    13 \n    271 \n    224 \n    258 \n    136 \n    140 \n    218 \n  \n  \n    Oadby and Wigston \n    162 \n    215 \n    162 \n    11870 \n    17102 \n    28972 \n    20.71941 \n    0.0010987 \n    0.0016922 \n    145 \n    112 \n    145 \n    270 \n    262 \n    278 \n    340 \n    270 \n    226 \n  \n  \n    Teignbridge \n    232 \n    252 \n    232 \n    12250 \n    20987 \n    33237 \n    58.11052 \n    0.0010440 \n    0.0023279 \n    100 \n    80 \n    100 \n    269 \n    209 \n    248 \n    238 \n    274 \n    136 \n  \n  \n    Eastbourne \n    204 \n    227 \n    204 \n    12373 \n    12830 \n    25203 \n    36.12422 \n    0.0054015 \n    0.0010266 \n    120 \n    102 \n    120 \n    268 \n    298 \n    292 \n    306 \n    138 \n    320 \n  \n  \n    Breckland \n    246 \n    281 \n    246 \n    12378 \n    23016 \n    35394 \n    65.43999 \n    0.0018253 \n    0.0015886 \n    88 \n    51 \n    88 \n    267 \n    185 \n    235 \n    209 \n    219 \n    244 \n  \n  \n    East Devon \n    315 \n    261 \n    315 \n    12430 \n    18130 \n    30560 \n    83.85873 \n    0.0015576 \n    0.0029037 \n    30 \n    71 \n    30 \n    266 \n    243 \n    263 \n    135 \n    231 \n    87 \n  \n  \n    Swale \n    237 \n    274 \n    237 \n    12599 \n    22875 \n    35474 \n    59.86629 \n    0.0186895 \n    0.0010335 \n    95 \n    58 \n    95 \n    265 \n    190 \n    234 \n    227 \n    85 \n    318 \n  \n  \n    Hyndburn \n    130 \n    203 \n    130 \n    12702 \n    17380 \n    30082 \n    20.42098 \n    0.0002830 \n    0.0015889 \n    154 \n    119 \n    154 \n    264 \n    258 \n    269 \n    342 \n    340 \n    243 \n  \n  \n    Redcar and Cleveland \n    118 \n    242 \n    118 \n    12786 \n    21904 \n    34690 \n    23.46728 \n    0.0004593 \n    0.0017847 \n    158 \n    90 \n    158 \n    263 \n    199 \n    240 \n    334 \n    329 \n    212 \n  \n  \n    Monmouthshire \n    199 \n    262 \n    199 \n    12988 \n    17540 \n    30528 \n    50.15730 \n    0.0012077 \n    0.0015550 \n    124 \n    70 \n    124 \n    262 \n    253 \n    264 \n    265 \n    261 \n    254 \n  \n  \n    Forest Heath \n    224 \n    206 \n    224 \n    13035 \n    11543 \n    24578 \n    33.10973 \n    0.0015872 \n    0.0014177 \n    106 \n    118 \n    106 \n    261 \n    310 \n    297 \n    318 \n    228 \n    269 \n  \n  \n    Derbyshire Dales \n    201 \n    251 \n    201 \n    13161 \n    11828 \n    24989 \n    42.88387 \n    0.0009256 \n    0.0013577 \n    122 \n    81 \n    122 \n    260 \n    303 \n    294 \n    290 \n    283 \n    278 \n  \n  \n    Selby \n    213 \n    264 \n    213 \n    13235 \n    20848 \n    34083 \n    52.54992 \n    0.0010276 \n    0.0015011 \n    114 \n    68 \n    114 \n    259 \n    212 \n    244 \n    256 \n    276 \n    260 \n  \n  \n    Stroud \n    289 \n    267 \n    289 \n    13241 \n    20326 \n    33567 \n    83.56128 \n    0.0024767 \n    0.0018481 \n    53 \n    65 \n    53 \n    258 \n    221 \n    246 \n    138 \n    188 \n    202 \n  \n  \n    The Vale of Glamorgan \n    250 \n    276 \n    250 \n    13263 \n    26340 \n    39603 \n    77.19142 \n    0.0014653 \n    0.0018653 \n    84 \n    56 \n    84 \n    257 \n    155 \n    210 \n    170 \n    240 \n    197 \n  \n  \n    Chiltern \n    253 \n    234 \n    253 \n    13391 \n    22558 \n    35949 \n    44.70020 \n    0.0301093 \n    0.0015106 \n    81 \n    98 \n    81 \n    256 \n    194 \n    230 \n    284 \n    65 \n    258 \n  \n  \n    North East Derbyshire \n    172 \n    274 \n    172 \n    13414 \n    28664 \n    42078 \n    42.70590 \n    0.0007958 \n    0.0014644 \n    139 \n    58 \n    139 \n    255 \n    133 \n    200 \n    291 \n    293 \n    265 \n  \n  \n    East Dorset \n    197 \n    234 \n    197 \n    13531 \n    19487 \n    33018 \n    37.02858 \n    0.0023127 \n    0.0016371 \n    126 \n    98 \n    126 \n    254 \n    231 \n    251 \n    304 \n    196 \n    236 \n  \n  \n    Redditch \n    262 \n    259 \n    262 \n    13741 \n    17512 \n    31253 \n    61.69639 \n    0.0013303 \n    0.0016096 \n    74 \n    73 \n    74 \n    253 \n    254 \n    260 \n    222 \n    247 \n    241 \n  \n  \n    Torfaen \n    149 \n    222 \n    149 \n    13902 \n    15181 \n    29083 \n    27.77521 \n    0.0005208 \n    0.0016802 \n    151 \n    107 \n    151 \n    252 \n    279 \n    276 \n    329 \n    321 \n    229 \n  \n  \n    Mid Suffolk \n    273 \n    247 \n    273 \n    13930 \n    20713 \n    34643 \n    63.35687 \n    0.0042169 \n    0.0016024 \n    66 \n    85 \n    66 \n    251 \n    214 \n    241 \n    217 \n    155 \n    242 \n  \n  \n    Tandridge \n    246 \n    240 \n    246 \n    13937 \n    22538 \n    36475 \n    59.01705 \n    0.0367740 \n    0.0011585 \n    88 \n    92 \n    88 \n    250 \n    195 \n    228 \n    232 \n    58 \n    308 \n  \n  \n    Wrexham \n    263 \n    264 \n    263 \n    13956 \n    16546 \n    30502 \n    73.76438 \n    0.0008075 \n    0.0014989 \n    73 \n    68 \n    73 \n    249 \n    268 \n    265 \n    184 \n    291 \n    261 \n  \n  \n    South Northamptonshire \n    289 \n    293 \n    289 \n    13977 \n    25354 \n    39331 \n    92.12130 \n    0.0062021 \n    0.0017508 \n    53 \n    39 \n    53 \n    248 \n    166 \n    211 \n    108 \n    128 \n    214 \n  \n  \n    Kettering \n    268 \n    284 \n    268 \n    13980 \n    18491 \n    32471 \n    70.87864 \n    0.0030991 \n    0.0016957 \n    70 \n    48 \n    70 \n    247 \n    240 \n    254 \n    196 \n    176 \n    224 \n  \n  \n    Ribble Valley \n    187 \n    190 \n    187 \n    14075 \n    12870 \n    26945 \n    29.07366 \n    0.0004309 \n    0.0018088 \n    131 \n    124 \n    131 \n    246 \n    297 \n    282 \n    325 \n    330 \n    208 \n  \n  \n    South Kesteven \n    275 \n    303 \n    275 \n    14185 \n    23275 \n    37460 \n    94.80642 \n    0.0039822 \n    0.0018098 \n    64 \n    30 \n    64 \n    245 \n    183 \n    226 \n    100 \n    158 \n    207 \n  \n  \n    South Derbyshire \n    216 \n    276 \n    216 \n    14306 \n    28077 \n    42383 \n    53.41385 \n    0.0011521 \n    0.0016710 \n    112 \n    56 \n    112 \n    244 \n    138 \n    196 \n    252 \n    266 \n    230 \n  \n  \n    South Tyneside \n    149 \n    271 \n    149 \n    14369 \n    27022 \n    41391 \n    39.24558 \n    0.0009407 \n    0.0014669 \n    151 \n    61 \n    151 \n    243 \n    150 \n    204 \n    301 \n    281 \n    264 \n  \n  \n    Lewes \n    202 \n    224 \n    202 \n    14403 \n    19800 \n    34203 \n    34.92845 \n    0.0104541 \n    0.0011926 \n    121 \n    105 \n    121 \n    242 \n    226 \n    243 \n    310 \n    108 \n    304 \n  \n  \n    Burnley \n    159 \n    222 \n    159 \n    14595 \n    15150 \n    29745 \n    33.54753 \n    0.0003922 \n    0.0016247 \n    146 \n    107 \n    146 \n    241 \n    280 \n    270 \n    315 \n    334 \n    239 \n  \n  \n    North Lincolnshire \n    249 \n    297 \n    249 \n    14755 \n    15493 \n    30248 \n    83.06742 \n    0.0007716 \n    0.0016239 \n    85 \n    35 \n    85 \n    240 \n    278 \n    268 \n    141 \n    297 \n    240 \n  \n  \n    Cannock Chase \n    239 \n    267 \n    239 \n    14864 \n    23408 \n    38272 \n    57.70909 \n    0.0009774 \n    0.0013914 \n    94 \n    65 \n    94 \n    239 \n    181 \n    218 \n    240 \n    278 \n    275 \n  \n  \n    Wellingborough \n    318 \n    262 \n    318 \n    14948 \n    16857 \n    31805 \n    80.21191 \n    0.0036900 \n    0.0016290 \n    27 \n    70 \n    27 \n    238 \n    266 \n    257 \n    156 \n    165 \n    238 \n  \n  \n    Wealden \n    258 \n    261 \n    258 \n    14989 \n    30274 \n    45263 \n    58.96939 \n    0.0186274 \n    0.0013393 \n    77 \n    71 \n    77 \n    237 \n    122 \n    180 \n    233 \n    86 \n    282 \n  \n  \n    Chorley \n    168 \n    261 \n    168 \n    14994 \n    26851 \n    41845 \n    43.70430 \n    0.0007779 \n    0.0016512 \n    141 \n    71 \n    141 \n    236 \n    151 \n    201 \n    287 \n    295 \n    232 \n  \n  \n    Ashford \n    255 \n    254 \n    255 \n    15035 \n    17786 \n    32821 \n    59.60893 \n    0.0139988 \n    0.0012927 \n    79 \n    78 \n    79 \n    235 \n    249 \n    252 \n    229 \n    100 \n    291 \n  \n  \n    Nuneaton and Bedworth \n    246 \n    269 \n    246 \n    15037 \n    29798 \n    44835 \n    52.50267 \n    0.0019273 \n    0.0018603 \n    88 \n    63 \n    88 \n    234 \n    127 \n    185 \n    257 \n    210 \n    198 \n  \n  \n    Suffolk Coastal \n    285 \n    239 \n    285 \n    15143 \n    18880 \n    34023 \n    59.27719 \n    0.0052585 \n    0.0016880 \n    57 \n    93 \n    57 \n    233 \n    236 \n    245 \n    231 \n    139 \n    227 \n  \n  \n    South Somerset \n    321 \n    277 \n    321 \n    15164 \n    15892 \n    31056 \n    101.23392 \n    0.0020952 \n    0.0022205 \n    24 \n    55 \n    24 \n    232 \n    275 \n    261 \n    89 \n    202 \n    152 \n  \n  \n    Braintree \n    270 \n    277 \n    270 \n    15184 \n    31582 \n    46766 \n    74.27107 \n    0.0271398 \n    0.0013120 \n    68 \n    55 \n    68 \n    231 \n    114 \n    173 \n    181 \n    74 \n    288 \n  \n  \n    Epsom and Ewell \n    254 \n    224 \n    254 \n    15227 \n    22939 \n    38166 \n    43.36186 \n    0.0395024 \n    0.0013033 \n    80 \n    105 \n    80 \n    230 \n    188 \n    219 \n    288 \n    48 \n    290 \n  \n  \n    Bolsover \n    242 \n    243 \n    242 \n    15315 \n    20347 \n    35662 \n    54.66120 \n    0.0006313 \n    0.0014976 \n    91 \n    89 \n    91 \n    229 \n    220 \n    232 \n    250 \n    313 \n    262 \n  \n  \n    Gedling \n    178 \n    275 \n    178 \n    15434 \n    34039 \n    49473 \n    46.03025 \n    0.0014039 \n    0.0018589 \n    137 \n    57 \n    137 \n    228 \n    97 \n    159 \n    280 \n    244 \n    199 \n  \n  \n    East Hampshire \n    328 \n    268 \n    328 \n    15462 \n    25476 \n    40938 \n    93.84842 \n    0.0120776 \n    0.0016435 \n    17 \n    64 \n    17 \n    227 \n    162 \n    206 \n    104 \n    103 \n    235 \n  \n  \n    Hinckley and Bosworth \n    256 \n    283 \n    256 \n    15677 \n    26835 \n    42512 \n    75.05241 \n    0.0014834 \n    0.0018541 \n    78 \n    49 \n    78 \n    226 \n    152 \n    195 \n    179 \n    239 \n    200 \n  \n  \n    Cotswold \n    293 \n    254 \n    293 \n    15685 \n    13651 \n    29336 \n    71.25964 \n    0.0041576 \n    0.0018831 \n    49 \n    78 \n    49 \n    225 \n    292 \n    274 \n    195 \n    156 \n    195 \n  \n  \n    Neath Port Talbot \n    146 \n    248 \n    146 \n    15691 \n    22974 \n    38665 \n    32.14387 \n    0.0006626 \n    0.0020202 \n    152 \n    84 \n    152 \n    224 \n    187 \n    216 \n    319 \n    311 \n    171 \n  \n  \n    Taunton Deane \n    277 \n    243 \n    277 \n    15713 \n    9820 \n    25533 \n    66.05293 \n    0.0012006 \n    0.0022342 \n    63 \n    89 \n    63 \n    223 \n    321 \n    290 \n    206 \n    263 \n    148 \n  \n  \n    Mansfield \n    200 \n    267 \n    200 \n    15911 \n    23109 \n    39020 \n    47.93428 \n    0.0008000 \n    0.0015661 \n    123 \n    65 \n    123 \n    222 \n    184 \n    213 \n    273 \n    292 \n    252 \n  \n  \n    Caerphilly \n    244 \n    278 \n    244 \n    15975 \n    34600 \n    50575 \n    73.20084 \n    0.0010057 \n    0.0019126 \n    89 \n    54 \n    89 \n    221 \n    91 \n    155 \n    189 \n    277 \n    186 \n  \n  \n    Harlow \n    294 \n    232 \n    294 \n    15994 \n    16492 \n    32486 \n    57.74732 \n    0.0195485 \n    0.0013293 \n    48 \n    100 \n    48 \n    220 \n    269 \n    253 \n    239 \n    84 \n    284 \n  \n  \n    Bassetlaw \n    251 \n    280 \n    251 \n    16161 \n    16975 \n    33136 \n    73.46786 \n    0.0009655 \n    0.0015236 \n    83 \n    52 \n    83 \n    219 \n    263 \n    249 \n    186 \n    280 \n    256 \n  \n  \n    North Kesteven \n    308 \n    295 \n    308 \n    16326 \n    22631 \n    38957 \n    103.67317 \n    0.0014144 \n    0.0020627 \n    37 \n    37 \n    37 \n    218 \n    192 \n    215 \n    81 \n    243 \n    167 \n  \n  \n    Erewash \n    200 \n    275 \n    200 \n    16623 \n    28395 \n    45018 \n    50.97433 \n    0.0012799 \n    0.0017058 \n    123 \n    57 \n    123 \n    217 \n    135 \n    182 \n    262 \n    252 \n    221 \n  \n  \n    Worthing \n    218 \n    236 \n    218 \n    16690 \n    17756 \n    34446 \n    42.16681 \n    0.0062165 \n    0.0012322 \n    110 \n    96 \n    110 \n    216 \n    252 \n    242 \n    293 \n    127 \n    300 \n  \n  \n    Horsham \n    297 \n    265 \n    297 \n    16707 \n    26654 \n    43361 \n    75.17375 \n    0.0180015 \n    0.0015769 \n    46 \n    67 \n    46 \n    215 \n    153 \n    194 \n    178 \n    89 \n    249 \n  \n  \n    South Hams \n    282 \n    235 \n    282 \n    16938 \n    13322 \n    30260 \n    65.87841 \n    0.0012274 \n    0.0025189 \n    60 \n    97 \n    60 \n    214 \n    295 \n    267 \n    208 \n    260 \n    116 \n  \n  \n    Bridgend \n    192 \n    261 \n    192 \n    17241 \n    17783 \n    35024 \n    49.79841 \n    0.0007512 \n    0.0018916 \n    128 \n    71 \n    128 \n    213 \n    250 \n    237 \n    267 \n    300 \n    192 \n  \n  \n    Wirral \n    241 \n    324 \n    241 \n    17244 \n    44072 \n    61316 \n    97.57457 \n    0.0024890 \n    0.0017127 \n    92 \n    10 \n    92 \n    212 \n    59 \n    107 \n    98 \n    187 \n    219 \n  \n  \n    Daventry \n    269 \n    284 \n    269 \n    17275 \n    18078 \n    35353 \n    79.04507 \n    0.0033339 \n    0.0020310 \n    69 \n    48 \n    69 \n    211 \n    245 \n    236 \n    160 \n    171 \n    169 \n  \n  \n    Barnsley \n    242 \n    302 \n    242 \n    17314 \n    37625 \n    54939 \n    78.98661 \n    0.0015289 \n    0.0016357 \n    91 \n    31 \n    91 \n    210 \n    74 \n    128 \n    161 \n    237 \n    237 \n  \n  \n    Newark and Sherwood \n    226 \n    288 \n    226 \n    17327 \n    20763 \n    38090 \n    62.46194 \n    0.0015555 \n    0.0017440 \n    104 \n    44 \n    104 \n    209 \n    213 \n    220 \n    220 \n    232 \n    216 \n  \n  \n    Rugby \n    320 \n    280 \n    320 \n    17523 \n    20443 \n    37966 \n    101.36753 \n    0.0031786 \n    0.0020217 \n    25 \n    52 \n    25 \n    208 \n    218 \n    221 \n    87 \n    175 \n    170 \n  \n  \n    South Staffordshire \n    240 \n    290 \n    240 \n    17575 \n    34347 \n    51922 \n    72.56398 \n    0.0015476 \n    0.0015857 \n    93 \n    42 \n    93 \n    207 \n    95 \n    142 \n    191 \n    234 \n    245 \n  \n  \n    Uttlesford \n    307 \n    240 \n    307 \n    17618 \n    17973 \n    35591 \n    63.70076 \n    0.0202609 \n    0.0014814 \n    38 \n    92 \n    38 \n    206 \n    247 \n    233 \n    214 \n    83 \n    263 \n  \n  \n    Hambleton \n    275 \n    248 \n    275 \n    17621 \n    13906 \n    31527 \n    74.05896 \n    0.0009081 \n    0.0022288 \n    64 \n    84 \n    64 \n    205 \n    289 \n    259 \n    183 \n    284 \n    151 \n  \n  \n    Havant \n    211 \n    248 \n    211 \n    17666 \n    26401 \n    44067 \n    43.23830 \n    0.0039611 \n    0.0018958 \n    116 \n    84 \n    116 \n    204 \n    154 \n    188 \n    289 \n    161 \n    189 \n  \n  \n    Brentwood \n    289 \n    223 \n    289 \n    17745 \n    19995 \n    37740 \n    52.37953 \n    0.0409946 \n    0.0012340 \n    53 \n    106 \n    53 \n    203 \n    223 \n    222 \n    258 \n    46 \n    297 \n  \n  \n    West Dorset \n    235 \n    238 \n    235 \n    18059 \n    11425 \n    29484 \n    49.90794 \n    0.0017699 \n    0.0020121 \n    97 \n    94 \n    97 \n    202 \n    313 \n    273 \n    266 \n    223 \n    173 \n  \n  \n    Broxbourne \n    317 \n    249 \n    317 \n    18151 \n    25440 \n    43591 \n    73.49505 \n    0.0391390 \n    0.0015310 \n    28 \n    83 \n    28 \n    201 \n    164 \n    192 \n    185 \n    49 \n    255 \n  \n  \n    Darlington \n    237 \n    258 \n    237 \n    18445 \n    15036 \n    33481 \n    63.64096 \n    0.0007033 \n    0.0018073 \n    95 \n    74 \n    95 \n    200 \n    282 \n    247 \n    215 \n    307 \n    209 \n  \n  \n    Hart \n    328 \n    253 \n    328 \n    18470 \n    26300 \n    44770 \n    78.77749 \n    0.0156487 \n    0.0018362 \n    17 \n    79 \n    17 \n    199 \n    156 \n    186 \n    162 \n    93 \n    203 \n  \n  \n    Three Rivers \n    322 \n    253 \n    322 \n    18584 \n    27115 \n    45699 \n    76.96263 \n    0.0380419 \n    0.0018902 \n    23 \n    79 \n    23 \n    198 \n    149 \n    178 \n    173 \n    52 \n    193 \n  \n  \n    North Somerset \n    288 \n    309 \n    288 \n    18813 \n    32553 \n    51366 \n    106.51079 \n    0.0033370 \n    0.0024983 \n    54 \n    24 \n    54 \n    197 \n    106 \n    147 \n    69 \n    170 \n    118 \n  \n  \n    Broadland \n    181 \n    251 \n    181 \n    18858 \n    32823 \n    51681 \n    39.50570 \n    0.0019036 \n    0.0026217 \n    134 \n    81 \n    134 \n    196 \n    103 \n    145 \n    300 \n    212 \n    109 \n  \n  \n    Bromsgrove \n    252 \n    274 \n    252 \n    18870 \n    25995 \n    44865 \n    66.89830 \n    0.0023463 \n    0.0020102 \n    82 \n    58 \n    82 \n    195 \n    159 \n    184 \n    205 \n    193 \n    176 \n  \n  \n    Broxtowe \n    251 \n    280 \n    251 \n    18998 \n    33183 \n    52181 \n    68.09294 \n    0.0015889 \n    0.0019933 \n    83 \n    52 \n    83 \n    194 \n    101 \n    139 \n    204 \n    227 \n    181 \n  \n  \n    Rhondda Cynon Taf \n    239 \n    289 \n    239 \n    19349 \n    36305 \n    55654 \n    72.07335 \n    0.0012933 \n    0.0023061 \n    94 \n    43 \n    94 \n    193 \n    78 \n    125 \n    193 \n    251 \n    138 \n  \n  \n    Harrogate \n    325 \n    282 \n    325 \n    19366 \n    18342 \n    37708 \n    110.93138 \n    0.0023168 \n    0.0024481 \n    20 \n    50 \n    20 \n    192 \n    241 \n    223 \n    60 \n    195 \n    124 \n  \n  \n    Canterbury \n    234 \n    274 \n    234 \n    19479 \n    18121 \n    37600 \n    61.96377 \n    0.0115107 \n    0.0014501 \n    98 \n    58 \n    98 \n    191 \n    244 \n    225 \n    221 \n    105 \n    266 \n  \n  \n    St Edmundsbury \n    313 \n    271 \n    313 \n    19511 \n    17447 \n    36958 \n    88.32277 \n    0.0039806 \n    0.0018960 \n    32 \n    61 \n    32 \n    190 \n    256 \n    227 \n    117 \n    159 \n    188 \n  \n  \n    Harborough \n    273 \n    265 \n    273 \n    19547 \n    21344 \n    40891 \n    64.82323 \n    0.0026586 \n    0.0022494 \n    66 \n    67 \n    66 \n    189 \n    201 \n    207 \n    211 \n    182 \n    147 \n  \n  \n    West Lancashire \n    214 \n    266 \n    214 \n    19805 \n    21733 \n    41538 \n    56.65700 \n    0.0009294 \n    0.0015818 \n    113 \n    66 \n    113 \n    188 \n    200 \n    203 \n    245 \n    282 \n    247 \n  \n  \n    Aylesbury Vale \n    330 \n    303 \n    330 \n    19831 \n    34981 \n    54812 \n    113.28702 \n    0.0227757 \n    0.0020113 \n    16 \n    30 \n    16 \n    187 \n    86 \n    129 \n    50 \n    81 \n    174 \n  \n  \n    Blackpool \n    178 \n    246 \n    178 \n    19835 \n    17775 \n    37610 \n    43.94347 \n    0.0005901 \n    0.0025846 \n    137 \n    86 \n    137 \n    186 \n    251 \n    224 \n    286 \n    315 \n    112 \n  \n  \n    Tunbridge Wells \n    227 \n    240 \n    227 \n    20116 \n    22147 \n    42263 \n    47.12165 \n    0.0336823 \n    0.0014347 \n    103 \n    92 \n    103 \n    185 \n    198 \n    197 \n    275 \n    61 \n    268 \n  \n  \n    Huntingdonshire \n    310 \n    302 \n    310 \n    20270 \n    31621 \n    51891 \n    102.90672 \n    0.0132382 \n    0.0023001 \n    35 \n    31 \n    35 \n    184 \n    113 \n    143 \n    83 \n    102 \n    139 \n  \n  \n    Woking \n    321 \n    232 \n    321 \n    20273 \n    27207 \n    47480 \n    59.27815 \n    0.0340234 \n    0.0020659 \n    24 \n    100 \n    24 \n    183 \n    145 \n    170 \n    230 \n    60 \n    165 \n  \n  \n    North Hertfordshire \n    293 \n    273 \n    293 \n    20355 \n    32707 \n    53062 \n    77.54596 \n    0.0292122 \n    0.0018191 \n    49 \n    59 \n    49 \n    182 \n    105 \n    137 \n    169 \n    70 \n    204 \n  \n  \n    Mid Sussex \n    306 \n    263 \n    306 \n    20393 \n    31709 \n    52102 \n    80.30516 \n    0.0306906 \n    0.0017534 \n    39 \n    69 \n    39 \n    181 \n    112 \n    140 \n    155 \n    63 \n    213 \n  \n  \n    Lichfield \n    292 \n    277 \n    292 \n    20396 \n    24559 \n    44955 \n    84.24212 \n    0.0020662 \n    0.0019028 \n    50 \n    55 \n    50 \n    180 \n    172 \n    183 \n    133 \n    203 \n    187 \n  \n  \n    Wychavon \n    264 \n    290 \n    264 \n    20602 \n    24629 \n    45231 \n    83.46586 \n    0.0017334 \n    0.0021899 \n    72 \n    42 \n    72 \n    179 \n    170 \n    181 \n    139 \n    225 \n    157 \n  \n  \n    South Bucks \n    310 \n    223 \n    310 \n    20603 \n    20381 \n    40984 \n    55.75605 \n    0.0262182 \n    0.0023714 \n    35 \n    106 \n    35 \n    178 \n    219 \n    205 \n    249 \n    75 \n    131 \n  \n  \n    Southend-on-Sea \n    247 \n    260 \n    247 \n    20661 \n    29749 \n    50410 \n    57.62656 \n    0.0460325 \n    0.0012049 \n    87 \n    72 \n    87 \n    177 \n    129 \n    156 \n    241 \n    44 \n    302 \n  \n  \n    Stevenage \n    314 \n    254 \n    314 \n    20748 \n    18525 \n    39273 \n    72.02250 \n    0.0171373 \n    0.0017124 \n    31 \n    78 \n    31 \n    176 \n    239 \n    212 \n    194 \n    91 \n    220 \n  \n  \n    Waverley \n    283 \n    258 \n    283 \n    20886 \n    27655 \n    48541 \n    68.70357 \n    0.0272366 \n    0.0019656 \n    59 \n    74 \n    59 \n    175 \n    144 \n    163 \n    200 \n    72 \n    184 \n  \n  \n    Rushcliffe \n    256 \n    288 \n    256 \n    20897 \n    30122 \n    51019 \n    76.63440 \n    0.0020342 \n    0.0022778 \n    78 \n    44 \n    78 \n    174 \n    123 \n    151 \n    174 \n    204 \n    143 \n  \n  \n    Sevenoaks \n    274 \n    246 \n    274 \n    20929 \n    30420 \n    51349 \n    58.51716 \n    0.0566217 \n    0.0013925 \n    65 \n    86 \n    65 \n    173 \n    121 \n    148 \n    235 \n    38 \n    274 \n  \n  \n    Spelthorne \n    309 \n    235 \n    309 \n    21043 \n    30107 \n    51150 \n    57.35777 \n    0.0369474 \n    0.0021774 \n    36 \n    97 \n    36 \n    172 \n    124 \n    149 \n    243 \n    57 \n    159 \n  \n  \n    Worcester \n    277 \n    269 \n    277 \n    21134 \n    17845 \n    38979 \n    75.86830 \n    0.0012321 \n    0.0020818 \n    63 \n    63 \n    63 \n    171 \n    248 \n    214 \n    176 \n    258 \n    164 \n  \n  \n    Chesterfield \n    242 \n    256 \n    242 \n    21349 \n    17107 \n    38456 \n    56.87320 \n    0.0007520 \n    0.0017426 \n    91 \n    76 \n    91 \n    170 \n    261 \n    217 \n    244 \n    299 \n    217 \n  \n  \n    Bedford \n    314 \n    297 \n    314 \n    21392 \n    22483 \n    43875 \n    100.59431 \n    0.0154519 \n    0.0018139 \n    31 \n    35 \n    31 \n    169 \n    196 \n    189 \n    90 \n    94 \n    206 \n  \n  \n    Newcastle-under-Lyme \n    261 \n    285 \n    261 \n    21455 \n    29382 \n    50837 \n    79.24630 \n    0.0011395 \n    0.0019857 \n    75 \n    47 \n    75 \n    168 \n    131 \n    153 \n    158 \n    268 \n    183 \n  \n  \n    Epping Forest \n    290 \n    251 \n    290 \n    21509 \n    35475 \n    56984 \n    68.68786 \n    0.0711352 \n    0.0015571 \n    52 \n    81 \n    52 \n    167 \n    84 \n    121 \n    201 \n    33 \n    253 \n  \n  \n    Fylde \n    230 \n    223 \n    230 \n    21711 \n    13080 \n    34791 \n    52.67556 \n    0.0005238 \n    0.0027609 \n    101 \n    106 \n    101 \n    166 \n    296 \n    238 \n    255 \n    319 \n    96 \n  \n  \n    Amber Valley \n    281 \n    271 \n    281 \n    21778 \n    25962 \n    47740 \n    77.94638 \n    0.0014457 \n    0.0019987 \n    61 \n    61 \n    61 \n    165 \n    160 \n    168 \n    167 \n    242 \n    180 \n  \n  \n    Thurrock \n    281 \n    268 \n    281 \n    21804 \n    34873 \n    56677 \n    75.03469 \n    0.0589668 \n    0.0013440 \n    61 \n    64 \n    61 \n    164 \n    87 \n    122 \n    180 \n    37 \n    280 \n  \n  \n    St. Helens \n    259 \n    283 \n    259 \n    22077 \n    35479 \n    57556 \n    81.68252 \n    0.0013260 \n    0.0018928 \n    76 \n    49 \n    76 \n    163 \n    83 \n    120 \n    151 \n    248 \n    190 \n  \n  \n    East Hertfordshire \n    297 \n    274 \n    297 \n    22122 \n    35988 \n    58110 \n    79.93959 \n    0.0446914 \n    0.0018916 \n    46 \n    58 \n    46 \n    162 \n    81 \n    118 \n    157 \n    45 \n    191 \n  \n  \n    Northumberland \n    287 \n    310 \n    287 \n    22254 \n    43011 \n    65265 \n    105.96942 \n    0.0024251 \n    0.0023084 \n    55 \n    23 \n    55 \n    161 \n    62 \n    95 \n    72 \n    189 \n    137 \n  \n  \n    South Norfolk \n    263 \n    258 \n    263 \n    22671 \n    28315 \n    50986 \n    60.76567 \n    0.0026761 \n    0.0027300 \n    73 \n    74 \n    73 \n    160 \n    136 \n    152 \n    223 \n    181 \n    100 \n  \n  \n    Medway \n    308 \n    312 \n    308 \n    22710 \n    50453 \n    73163 \n    109.01019 \n    0.0533814 \n    0.0015706 \n    37 \n    21 \n    37 \n    159 \n    50 \n    75 \n    64 \n    42 \n    251 \n  \n  \n    New Forest \n    302 \n    279 \n    302 \n    22744 \n    29791 \n    52535 \n    86.90241 \n    0.0054670 \n    0.0022859 \n    42 \n    53 \n    42 \n    158 \n    128 \n    138 \n    126 \n    137 \n    140 \n  \n  \n    Test Valley \n    318 \n    256 \n    318 \n    22956 \n    24789 \n    47745 \n    79.16895 \n    0.0075231 \n    0.0021833 \n    27 \n    76 \n    27 \n    157 \n    168 \n    167 \n    159 \n    118 \n    158 \n  \n  \n    Colchester \n    327 \n    270 \n    327 \n    22968 \n    24545 \n    47513 \n    94.70758 \n    0.0235711 \n    0.0016488 \n    18 \n    62 \n    18 \n    156 \n    173 \n    169 \n    102 \n    80 \n    233 \n  \n  \n    Charnwood \n    292 \n    317 \n    292 \n    23040 \n    34580 \n    57620 \n    107.91161 \n    0.0024076 \n    0.0026228 \n    50 \n    16 \n    50 \n    155 \n    92 \n    119 \n    65 \n    190 \n    108 \n  \n  \n    Halton \n    275 \n    274 \n    275 \n    23080 \n    22981 \n    46061 \n    82.81950 \n    0.0012432 \n    0.0021577 \n    64 \n    58 \n    64 \n    154 \n    186 \n    175 \n    142 \n    256 \n    161 \n  \n  \n    Cherwell \n    332 \n    298 \n    332 \n    23167 \n    26000 \n    49167 \n    111.31845 \n    0.0082417 \n    0.0026410 \n    14 \n    34 \n    14 \n    153 \n    158 \n    161 \n    59 \n    114 \n    107 \n  \n  \n    Surrey Heath \n    328 \n    243 \n    328 \n    23260 \n    24154 \n    47414 \n    70.25703 \n    0.0172171 \n    0.0021745 \n    17 \n    89 \n    17 \n    152 \n    177 \n    171 \n    197 \n    90 \n    160 \n  \n  \n    East Staffordshire \n    294 \n    291 \n    294 \n    23275 \n    18822 \n    42097 \n    101.32347 \n    0.0012667 \n    0.0020181 \n    48 \n    41 \n    48 \n    151 \n    237 \n    199 \n    88 \n    253 \n    172 \n  \n  \n    Telford and Wrekin \n    324 \n    296 \n    324 \n    23376 \n    18322 \n    41698 \n    109.90081 \n    0.0018745 \n    0.0020630 \n    21 \n    36 \n    21 \n    150 \n    242 \n    202 \n    62 \n    216 \n    166 \n  \n  \n    South Ribble \n    233 \n    256 \n    233 \n    23544 \n    30099 \n    53643 \n    59.66094 \n    0.0007475 \n    0.0026508 \n    99 \n    76 \n    99 \n    149 \n    125 \n    132 \n    228 \n    302 \n    105 \n  \n  \n    Tameside \n    243 \n    299 \n    243 \n    23571 \n    45702 \n    69273 \n    84.14139 \n    0.0023514 \n    0.0023393 \n    90 \n    33 \n    90 \n    148 \n    54 \n    82 \n    134 \n    192 \n    135 \n  \n  \n    South Oxfordshire \n    337 \n    268 \n    337 \n    23589 \n    31775 \n    55364 \n    88.07716 \n    0.0151645 \n    0.0028817 \n    9 \n    64 \n    9 \n    147 \n    110 \n    127 \n    118 \n    95 \n    89 \n  \n  \n    Mole Valley \n    315 \n    217 \n    315 \n    23768 \n    19616 \n    43384 \n    53.14222 \n    0.0298856 \n    0.0020016 \n    30 \n    110 \n    30 \n    146 \n    228 \n    193 \n    253 \n    66 \n    177 \n  \n  \n    Flintshire \n    284 \n    278 \n    284 \n    23770 \n    25459 \n    49229 \n    87.62641 \n    0.0012318 \n    0.0021949 \n    58 \n    54 \n    58 \n    145 \n    163 \n    160 \n    122 \n    259 \n    156 \n  \n  \n    Dacorum \n    338 \n    286 \n    338 \n    23817 \n    30858 \n    54675 \n    104.58269 \n    0.0370314 \n    0.0020320 \n    8 \n    46 \n    8 \n    144 \n    117 \n    130 \n    75 \n    56 \n    168 \n  \n  \n    Stafford \n    314 \n    294 \n    314 \n    23835 \n    20934 \n    44769 \n    105.13228 \n    0.0018028 \n    0.0020109 \n    31 \n    38 \n    31 \n    143 \n    211 \n    187 \n    74 \n    220 \n    175 \n  \n  \n    Swindon \n    334 \n    293 \n    334 \n    23868 \n    24439 \n    48307 \n    112.57493 \n    0.0066072 \n    0.0024599 \n    12 \n    39 \n    12 \n    142 \n    174 \n    164 \n    55 \n    124 \n    122 \n  \n  \n    Blackburn with Darwen \n    204 \n    245 \n    204 \n    23988 \n    19666 \n    43654 \n    46.17387 \n    0.0006750 \n    0.0024693 \n    120 \n    87 \n    120 \n    141 \n    227 \n    191 \n    278 \n    310 \n    120 \n  \n  \n    Cheltenham \n    293 \n    272 \n    293 \n    24125 \n    19592 \n    43717 \n    85.00521 \n    0.0025958 \n    0.0030665 \n    49 \n    60 \n    49 \n    140 \n    229 \n    190 \n    130 \n    184 \n    75 \n  \n  \n    Chichester \n    300 \n    253 \n    300 \n    24254 \n    16115 \n    40369 \n    73.41119 \n    0.0088457 \n    0.0017499 \n    44 \n    79 \n    44 \n    139 \n    272 \n    209 \n    187 \n    111 \n    215 \n  \n  \n    Fareham \n    310 \n    264 \n    310 \n    24609 \n    29734 \n    54343 \n    76.99256 \n    0.0039958 \n    0.0022174 \n    35 \n    68 \n    35 \n    138 \n    130 \n    131 \n    172 \n    157 \n    153 \n  \n  \n    Vale of White Horse \n    336 \n    272 \n    336 \n    24697 \n    25427 \n    50124 \n    98.46835 \n    0.0082747 \n    0.0030820 \n    10 \n    60 \n    10 \n    137 \n    165 \n    157 \n    96 \n    113 \n    74 \n  \n  \n    Rushmoor \n    334 \n    258 \n    334 \n    25017 \n    26056 \n    51073 \n    89.27181 \n    0.0143124 \n    0.0022710 \n    12 \n    74 \n    12 \n    136 \n    157 \n    150 \n    114 \n    99 \n    144 \n  \n  \n    Rochdale \n    258 \n    286 \n    258 \n    25139 \n    36507 \n    61646 \n    81.99142 \n    0.0017133 \n    0.0022337 \n    77 \n    46 \n    77 \n    135 \n    76 \n    103 \n    145 \n    226 \n    149 \n  \n  \n    Tewkesbury \n    322 \n    249 \n    322 \n    25184 \n    20469 \n    45653 \n    87.05614 \n    0.0015420 \n    0.0030289 \n    23 \n    83 \n    23 \n    134 \n    217 \n    179 \n    125 \n    236 \n    77 \n  \n  \n    Bournemouth \n    248 \n    283 \n    248 \n    25210 \n    32998 \n    58208 \n    72.37210 \n    0.0044016 \n    0.0028426 \n    86 \n    49 \n    86 \n    133 \n    102 \n    117 \n    192 \n    149 \n    92 \n  \n  \n    Hertsmere \n    316 \n    242 \n    316 \n    25251 \n    28231 \n    53482 \n    69.43996 \n    0.0558631 \n    0.0022121 \n    29 \n    90 \n    29 \n    132 \n    137 \n    135 \n    198 \n    39 \n    154 \n  \n  \n    North Warwickshire \n    277 \n    248 \n    277 \n    25282 \n    16883 \n    42165 \n    58.55078 \n    0.0017477 \n    0.0024229 \n    63 \n    84 \n    63 \n    131 \n    265 \n    198 \n    234 \n    224 \n    127 \n  \n  \n    Basingstoke and Deane \n    338 \n    280 \n    338 \n    25401 \n    30492 \n    55893 \n    101.39306 \n    0.0181075 \n    0.0025112 \n    8 \n    52 \n    8 \n    130 \n    118 \n    124 \n    86 \n    88 \n    117 \n  \n  \n    Stratford-on-Avon \n    323 \n    296 \n    323 \n    25409 \n    22594 \n    48003 \n    113.24263 \n    0.0043159 \n    0.0028345 \n    22 \n    36 \n    22 \n    129 \n    193 \n    165 \n    51 \n    152 \n    93 \n  \n  \n    Lincoln \n    229 \n    261 \n    229 \n    25583 \n    14947 \n    40530 \n    51.75565 \n    0.0008666 \n    0.0022827 \n    102 \n    71 \n    102 \n    128 \n    284 \n    208 \n    259 \n    288 \n    142 \n  \n  \n    York \n    304 \n    310 \n    304 \n    25651 \n    21058 \n    46709 \n    117.86975 \n    0.0023097 \n    0.0026595 \n    41 \n    23 \n    41 \n    127 \n    208 \n    174 \n    42 \n    197 \n    104 \n  \n  \n    Ashfield \n    273 \n    272 \n    273 \n    25763 \n    27847 \n    53610 \n    76.99274 \n    0.0010518 \n    0.0022554 \n    66 \n    60 \n    66 \n    126 \n    142 \n    133 \n    171 \n    271 \n    145 \n  \n  \n    Plymouth \n    332 \n    300 \n    332 \n    25793 \n    20138 \n    45931 \n    124.45365 \n    0.0015797 \n    0.0032944 \n    14 \n    32 \n    14 \n    125 \n    222 \n    176 \n    26 \n    229 \n    60 \n  \n  \n    Gloucester \n    290 \n    276 \n    290 \n    26099 \n    23463 \n    49562 \n    85.55168 \n    0.0014927 \n    0.0030158 \n    52 \n    56 \n    52 \n    124 \n    180 \n    158 \n    127 \n    238 \n    79 \n  \n  \n    Doncaster \n    291 \n    314 \n    291 \n    26494 \n    32298 \n    58792 \n    105.97681 \n    0.0019361 \n    0.0022314 \n    51 \n    19 \n    51 \n    123 \n    108 \n    116 \n    71 \n    208 \n    150 \n  \n  \n    North West Leicestershire \n    331 \n    267 \n    331 \n    26666 \n    19081 \n    45747 \n    95.63833 \n    0.0013247 \n    0.0024521 \n    15 \n    65 \n    15 \n    122 \n    234 \n    177 \n    99 \n    249 \n    123 \n  \n  \n    St Albans \n    318 \n    271 \n    318 \n    26809 \n    36418 \n    63227 \n    81.85818 \n    0.0619411 \n    0.0023555 \n    27 \n    61 \n    27 \n    121 \n    77 \n    99 \n    148 \n    35 \n    132 \n  \n  \n    Bury \n    261 \n    290 \n    261 \n    26895 \n    41317 \n    68212 \n    83.76982 \n    0.0021060 \n    0.0024213 \n    75 \n    42 \n    75 \n    120 \n    66 \n    86 \n    137 \n    201 \n    128 \n  \n  \n    Calderdale \n    319 \n    293 \n    319 \n    26978 \n    28593 \n    55571 \n    123.10999 \n    0.0019020 \n    0.0022845 \n    26 \n    39 \n    26 \n    119 \n    134 \n    126 \n    29 \n    213 \n    141 \n  \n  \n    Elmbridge \n    305 \n    245 \n    305 \n    27029 \n    35122 \n    62151 \n    62.72055 \n    0.0685952 \n    0.0024269 \n    40 \n    87 \n    40 \n    118 \n    85 \n    101 \n    219 \n    34 \n    126 \n  \n  \n    Wycombe \n    339 \n    283 \n    339 \n    27246 \n    32323 \n    59569 \n    100.06675 \n    0.0304376 \n    0.0027075 \n    7 \n    49 \n    7 \n    117 \n    107 \n    111 \n    92 \n    64 \n    102 \n  \n  \n    Ipswich \n    236 \n    255 \n    236 \n    27497 \n    21192 \n    48689 \n    53.76366 \n    0.0057598 \n    0.0023529 \n    96 \n    77 \n    96 \n    116 \n    205 \n    162 \n    251 \n    133 \n    134 \n  \n  \n    Wigan \n    311 \n    316 \n    311 \n    27578 \n    59356 \n    86934 \n    126.87502 \n    0.0023235 \n    0.0024079 \n    34 \n    17 \n    34 \n    115 \n    34 \n    57 \n    23 \n    194 \n    129 \n  \n  \n    Swansea \n    279 \n    300 \n    279 \n    27777 \n    19589 \n    47366 \n    98.91703 \n    0.0014553 \n    0.0027418 \n    62 \n    32 \n    62 \n    114 \n    230 \n    172 \n    94 \n    241 \n    98 \n  \n  \n    Sefton \n    217 \n    316 \n    217 \n    28443 \n    46950 \n    75393 \n    77.79284 \n    0.0022610 \n    0.0025645 \n    111 \n    17 \n    111 \n    113 \n    53 \n    69 \n    168 \n    198 \n    114 \n  \n  \n    Bracknell Forest \n    336 \n    263 \n    336 \n    28503 \n    31002 \n    59505 \n    84.64837 \n    0.0181350 \n    0.0026867 \n    10 \n    69 \n    10 \n    112 \n    116 \n    112 \n    131 \n    87 \n    103 \n  \n  \n    Harrow \n    311 \n    287 \n    311 \n    28680 \n    68538 \n    97218 \n    92.42766 \n    0.1476876 \n    0.0030209 \n    34 \n    45 \n    34 \n    111 \n    22 \n    48 \n    107 \n    26 \n    78 \n  \n  \n    Bexley \n    297 \n    282 \n    297 \n    28684 \n    63899 \n    92583 \n    81.72835 \n    0.1419983 \n    0.0016966 \n    46 \n    50 \n    46 \n    110 \n    28 \n    52 \n    150 \n    28 \n    223 \n  \n  \n    Watford \n    332 \n    248 \n    332 \n    28799 \n    24774 \n    53573 \n    78.54169 \n    0.0405963 \n    0.0024651 \n    14 \n    84 \n    14 \n    109 \n    169 \n    134 \n    163 \n    47 \n    121 \n  \n  \n    Barking and Dagenham \n    259 \n    278 \n    259 \n    28989 \n    45584 \n    74573 \n    74.07906 \n    0.0947743 \n    0.0016538 \n    76 \n    54 \n    76 \n    108 \n    55 \n    71 \n    182 \n    32 \n    231 \n  \n  \n    Shropshire \n    336 \n    330 \n    336 \n    29111 \n    34424 \n    63535 \n    148.35300 \n    0.0036140 \n    0.0027990 \n    10 \n    7 \n    10 \n    107 \n    94 \n    98 \n    8 \n    166 \n    94 \n  \n  \n    Oldham \n    241 \n    296 \n    241 \n    29113 \n    36102 \n    65215 \n    80.47174 \n    0.0019906 \n    0.0025758 \n    92 \n    36 \n    92 \n    106 \n    79 \n    96 \n    154 \n    206 \n    113 \n  \n  \n    Bath and North East Somerset \n    318 \n    289 \n    318 \n    29241 \n    23945 \n    53186 \n    106.11349 \n    0.0063148 \n    0.0031748 \n    27 \n    43 \n    27 \n    105 \n    178 \n    136 \n    70 \n    126 \n    67 \n  \n  \n    Sutton \n    323 \n    268 \n    323 \n    29841 \n    55030 \n    84871 \n    82.50370 \n    0.1105433 \n    0.0019988 \n    22 \n    64 \n    22 \n    104 \n    40 \n    59 \n    144 \n    30 \n    179 \n  \n  \n    Maidstone \n    296 \n    278 \n    296 \n    29979 \n    31058 \n    61037 \n    76.04405 \n    0.0296875 \n    0.0018485 \n    47 \n    54 \n    47 \n    103 \n    115 \n    109 \n    175 \n    68 \n    201 \n  \n  \n    Stockton-on-Tees \n    216 \n    292 \n    216 \n    29986 \n    29329 \n    59315 \n    65.89576 \n    0.0010995 \n    0.0031831 \n    112 \n    40 \n    112 \n    102 \n    132 \n    114 \n    207 \n    269 \n    66 \n  \n  \n    Middlesbrough \n    214 \n    250 \n    214 \n    30038 \n    20664 \n    50702 \n    53.13953 \n    0.0006790 \n    0.0029637 \n    113 \n    82 \n    113 \n    101 \n    215 \n    154 \n    254 \n    309 \n    82 \n  \n  \n    East Riding of Yorkshire \n    292 \n    326 \n    292 \n    30194 \n    54386 \n    84580 \n    120.56251 \n    0.0020021 \n    0.0031038 \n    50 \n    9 \n    50 \n    100 \n    41 \n    60 \n    35 \n    205 \n    70 \n  \n  \n    Waltham Forest \n    300 \n    284 \n    300 \n    30367 \n    71912 \n    102279 \n    87.15664 \n    0.1866278 \n    0.0023823 \n    44 \n    48 \n    44 \n    99 \n    17 \n    43 \n    124 \n    21 \n    130 \n  \n  \n    Newport \n    251 \n    264 \n    251 \n    30393 \n    21238 \n    51631 \n    68.26980 \n    0.0012649 \n    0.0030589 \n    83 \n    68 \n    83 \n    98 \n    204 \n    146 \n    202 \n    254 \n    76 \n  \n  \n    Chelmsford \n    293 \n    275 \n    293 \n    30575 \n    34222 \n    64797 \n    83.33582 \n    0.0512377 \n    0.0018830 \n    49 \n    57 \n    49 \n    97 \n    96 \n    97 \n    140 \n    43 \n    196 \n  \n  \n    Runnymede \n    335 \n    250 \n    335 \n    30604 \n    21324 \n    51928 \n    82.53407 \n    0.0279868 \n    0.0027531 \n    11 \n    82 \n    11 \n    96 \n    202 \n    141 \n    143 \n    71 \n    97 \n  \n  \n    Knowsley \n    221 \n    273 \n    221 \n    30613 \n    34820 \n    65433 \n    60.35691 \n    0.0015454 \n    0.0025930 \n    108 \n    59 \n    108 \n    95 \n    89 \n    93 \n    225 \n    235 \n    111 \n  \n  \n    Wokingham \n    340 \n    269 \n    340 \n    30764 \n    42810 \n    73574 \n    90.37405 \n    0.0237476 \n    0.0032668 \n    6 \n    63 \n    6 \n    94 \n    63 \n    74 \n    111 \n    79 \n    62 \n  \n  \n    Tonbridge and Malling \n    270 \n    254 \n    270 \n    30765 \n    30473 \n    61238 \n    56.01878 \n    0.0379614 \n    0.0018185 \n    68 \n    78 \n    68 \n    93 \n    119 \n    108 \n    248 \n    54 \n    205 \n  \n  \n    Blaby \n    304 \n    264 \n    304 \n    31649 \n    27848 \n    59497 \n    78.31709 \n    0.0018932 \n    0.0034461 \n    41 \n    68 \n    41 \n    92 \n    141 \n    113 \n    164 \n    214 \n    56 \n  \n  \n    Havering \n    286 \n    283 \n    286 \n    31769 \n    59870 \n    91639 \n    80.88612 \n    0.1240316 \n    0.0018851 \n    56 \n    49 \n    56 \n    91 \n    32 \n    53 \n    152 \n    29 \n    194 \n  \n  \n    Brighton and Hove \n    297 \n    287 \n    297 \n    31879 \n    36938 \n    68817 \n    88.44945 \n    0.0325543 \n    0.0022023 \n    46 \n    45 \n    46 \n    90 \n    75 \n    84 \n    116 \n    62 \n    155 \n  \n  \n    Poole \n    314 \n    276 \n    314 \n    32048 \n    24563 \n    56611 \n    87.92048 \n    0.0045316 \n    0.0030996 \n    31 \n    56 \n    31 \n    89 \n    171 \n    123 \n    120 \n    146 \n    71 \n  \n  \n    Redbridge \n    266 \n    289 \n    266 \n    32064 \n    77588 \n    109652 \n    80.78754 \n    0.1798939 \n    0.0020014 \n    71 \n    43 \n    71 \n    88 \n    12 \n    34 \n    153 \n    22 \n    178 \n  \n  \n    North Tyneside \n    256 \n    283 \n    256 \n    32439 \n    43079 \n    75518 \n    78.16212 \n    0.0019184 \n    0.0030158 \n    78 \n    49 \n    78 \n    87 \n    61 \n    68 \n    166 \n    211 \n    80 \n  \n  \n    Eastleigh \n    309 \n    260 \n    309 \n    32465 \n    33798 \n    66263 \n    81.90592 \n    0.0056096 \n    0.0029667 \n    36 \n    72 \n    36 \n    86 \n    98 \n    91 \n    146 \n    136 \n    81 \n  \n  \n    Central Bedfordshire \n    343 \n    312 \n    343 \n    32469 \n    66131 \n    98600 \n    129.24999 \n    0.0390917 \n    0.0028629 \n    3 \n    21 \n    3 \n    85 \n    24 \n    46 \n    21 \n    50 \n    91 \n  \n  \n    Reigate and Banstead \n    333 \n    262 \n    333 \n    32483 \n    35696 \n    68179 \n    89.77510 \n    0.0537983 \n    0.0024743 \n    13 \n    70 \n    13 \n    84 \n    82 \n    87 \n    112 \n    41 \n    119 \n  \n  \n    Peterborough \n    337 \n    294 \n    337 \n    32552 \n    19136 \n    51688 \n    111.41706 \n    0.0080528 \n    0.0029620 \n    9 \n    38 \n    9 \n    83 \n    233 \n    144 \n    58 \n    116 \n    83 \n  \n  \n    Dartford \n    306 \n    248 \n    306 \n    32588 \n    27117 \n    59705 \n    69.01172 \n    0.0545483 \n    0.0016458 \n    39 \n    84 \n    39 \n    82 \n    148 \n    110 \n    199 \n    40 \n    234 \n  \n  \n    Lewisham \n    273 \n    288 \n    273 \n    32829 \n    89663 \n    122492 \n    81.85742 \n    0.2550396 \n    0.0023540 \n    66 \n    44 \n    66 \n    81 \n    8 \n    25 \n    149 \n    13 \n    133 \n  \n  \n    West Berkshire \n    340 \n    277 \n    340 \n    33558 \n    28003 \n    61561 \n    103.72536 \n    0.0157734 \n    0.0033439 \n    6 \n    55 \n    6 \n    80 \n    139 \n    104 \n    79 \n    92 \n    58 \n  \n  \n    Warwick \n    341 \n    290 \n    341 \n    33726 \n    25353 \n    59079 \n    112.36995 \n    0.0056245 \n    0.0035936 \n    5 \n    42 \n    5 \n    79 \n    167 \n    115 \n    57 \n    135 \n    52 \n  \n  \n    Bolton \n    291 \n    302 \n    291 \n    33985 \n    42018 \n    76003 \n    106.68833 \n    0.0021221 \n    0.0027325 \n    51 \n    31 \n    51 \n    78 \n    65 \n    66 \n    68 \n    200 \n    99 \n  \n  \n    Luton \n    341 \n    293 \n    341 \n    34348 \n    33348 \n    67696 \n    117.08185 \n    0.0292726 \n    0.0026121 \n    5 \n    39 \n    5 \n    77 \n    100 \n    88 \n    43 \n    69 \n    110 \n  \n  \n    Kirklees \n    318 \n    323 \n    318 \n    34538 \n    59527 \n    94065 \n    133.83505 \n    0.0034612 \n    0.0032210 \n    27 \n    11 \n    27 \n    76 \n    33 \n    51 \n    17 \n    168 \n    65 \n  \n  \n    South Cambridgeshire \n    328 \n    284 \n    328 \n    34916 \n    39466 \n    74382 \n    98.77528 \n    0.0143335 \n    0.0042710 \n    17 \n    48 \n    17 \n    75 \n    71 \n    72 \n    95 \n    98 \n    38 \n  \n  \n    County Durham \n    316 \n    328 \n    316 \n    35081 \n    64602 \n    99683 \n    136.76168 \n    0.0025184 \n    0.0033631 \n    29 \n    8 \n    29 \n    74 \n    27 \n    45 \n    15 \n    186 \n    57 \n  \n  \n    Kingston upon Thames \n    317 \n    272 \n    317 \n    35923 \n    45101 \n    81024 \n    88.78187 \n    0.1066740 \n    0.0027264 \n    28 \n    60 \n    28 \n    73 \n    58 \n    64 \n    115 \n    31 \n    101 \n  \n  \n    Basildon \n    321 \n    282 \n    321 \n    36071 \n    36057 \n    72128 \n    92.09181 \n    0.0612035 \n    0.0019214 \n    24 \n    50 \n    24 \n    72 \n    80 \n    77 \n    109 \n    36 \n    185 \n  \n  \n    Rotherham \n    287 \n    312 \n    287 \n    36886 \n    43598 \n    80484 \n    110.48375 \n    0.0018907 \n    0.0027850 \n    55 \n    21 \n    55 \n    71 \n    60 \n    65 \n    61 \n    215 \n    95 \n  \n  \n    Windsor and Maidenhead \n    341 \n    273 \n    341 \n    36971 \n    34482 \n    71453 \n    99.72553 \n    0.0372343 \n    0.0038264 \n    5 \n    59 \n    5 \n    70 \n    93 \n    79 \n    93 \n    55 \n    47 \n  \n  \n    Exeter \n    248 \n    241 \n    248 \n    37151 \n    10809 \n    47960 \n    57.60331 \n    0.0011451 \n    0.0047422 \n    86 \n    91 \n    86 \n    69 \n    316 \n    166 \n    242 \n    267 \n    32 \n  \n  \n    Haringey \n    300 \n    286 \n    300 \n    37279 \n    80177 \n    117456 \n    93.22087 \n    0.2386431 \n    0.0032502 \n    44 \n    46 \n    44 \n    68 \n    11 \n    29 \n    106 \n    15 \n    63 \n  \n  \n    Guildford \n    334 \n    258 \n    334 \n    38372 \n    30423 \n    68795 \n    85.17198 \n    0.0361713 \n    0.0030977 \n    12 \n    74 \n    12 \n    67 \n    120 \n    85 \n    129 \n    59 \n    72 \n  \n  \n    Merton \n    309 \n    280 \n    309 \n    38381 \n    67646 \n    106027 \n    87.42231 \n    0.1894013 \n    0.0028738 \n    36 \n    52 \n    36 \n    66 \n    23 \n    38 \n    123 \n    20 \n    90 \n  \n  \n    Welwyn Hatfield \n    336 \n    271 \n    336 \n    38496 \n    22907 \n    61403 \n    90.64350 \n    0.0389517 \n    0.0029540 \n    10 \n    61 \n    10 \n    65 \n    189 \n    106 \n    110 \n    51 \n    84 \n  \n  \n    Richmond upon Thames \n    316 \n    273 \n    316 \n    38600 \n    58964 \n    97564 \n    87.93170 \n    0.1564364 \n    0.0037355 \n    29 \n    59 \n    29 \n    64 \n    35 \n    47 \n    119 \n    25 \n    48 \n  \n  \n    Kingston upon Hull, City of \n    292 \n    298 \n    292 \n    38602 \n    24199 \n    62801 \n    102.14345 \n    0.0012955 \n    0.0025353 \n    50 \n    34 \n    50 \n    63 \n    176 \n    100 \n    85 \n    250 \n    115 \n  \n  \n    Dudley \n    318 \n    318 \n    318 \n    38796 \n    57172 \n    95968 \n    126.70449 \n    0.0042945 \n    0.0031201 \n    27 \n    15 \n    27 \n    62 \n    37 \n    49 \n    24 \n    153 \n    68 \n  \n  \n    Slough \n    335 \n    271 \n    335 \n    39282 \n    31753 \n    71035 \n    94.80244 \n    0.0380361 \n    0.0041691 \n    11 \n    61 \n    11 \n    61 \n    111 \n    80 \n    101 \n    53 \n    40 \n  \n  \n    Northampton \n    337 \n    307 \n    337 \n    39498 \n    27141 \n    66639 \n    118.08045 \n    0.0088677 \n    0.0036166 \n    9 \n    26 \n    9 \n    60 \n    147 \n    90 \n    41 \n    110 \n    51 \n  \n  \n    Greenwich \n    316 \n    289 \n    316 \n    39593 \n    70802 \n    110395 \n    97.80635 \n    0.1959638 \n    0.0024311 \n    29 \n    43 \n    29 \n    59 \n    21 \n    33 \n    97 \n    19 \n    125 \n  \n  \n    Wiltshire \n    345 \n    331 \n    345 \n    39717 \n    55625 \n    95342 \n    160.51941 \n    0.0150479 \n    0.0040658 \n    1 \n    6 \n    1 \n    58 \n    38 \n    50 \n    5 \n    96 \n    42 \n  \n  \n    Croydon \n    306 \n    302 \n    306 \n    39884 \n    92094 \n    131978 \n    100.31073 \n    0.2122394 \n    0.0026456 \n    39 \n    31 \n    39 \n    57 \n    7 \n    21 \n    91 \n    18 \n    106 \n  \n  \n    Stoke-on-Trent \n    313 \n    309 \n    313 \n    40031 \n    33667 \n    73698 \n    114.84293 \n    0.0015778 \n    0.0029178 \n    32 \n    24 \n    32 \n    56 \n    99 \n    73 \n    48 \n    230 \n    86 \n  \n  \n    Sunderland \n    254 \n    294 \n    254 \n    40830 \n    34827 \n    75657 \n    81.87235 \n    0.0018640 \n    0.0028891 \n    80 \n    38 \n    80 \n    55 \n    88 \n    67 \n    147 \n    217 \n    88 \n  \n  \n    Bromley \n    322 \n    288 \n    322 \n    40897 \n    80537 \n    121434 \n    104.05368 \n    0.2233553 \n    0.0022546 \n    23 \n    44 \n    23 \n    54 \n    10 \n    26 \n    78 \n    16 \n    146 \n  \n  \n    Portsmouth \n    343 \n    288 \n    343 \n    41272 \n    27862 \n    69134 \n    115.85177 \n    0.0059324 \n    0.0032274 \n    3 \n    44 \n    3 \n    53 \n    140 \n    83 \n    45 \n    129 \n    64 \n  \n  \n    Enfield \n    314 \n    294 \n    314 \n    41313 \n    73140 \n    114453 \n    105.61314 \n    0.1777036 \n    0.0031087 \n    31 \n    38 \n    31 \n    52 \n    15 \n    30 \n    73 \n    23 \n    69 \n  \n  \n    Derby \n    316 \n    308 \n    316 \n    41670 \n    29802 \n    71472 \n    113.83201 \n    0.0029402 \n    0.0032790 \n    29 \n    25 \n    29 \n    51 \n    126 \n    78 \n    49 \n    178 \n    61 \n  \n  \n    Walsall \n    333 \n    313 \n    333 \n    41782 \n    48755 \n    90537 \n    130.19952 \n    0.0039666 \n    0.0033192 \n    13 \n    20 \n    13 \n    50 \n    52 \n    54 \n    19 \n    160 \n    59 \n  \n  \n    Southampton \n    321 \n    300 \n    321 \n    41891 \n    41234 \n    83125 \n    115.21255 \n    0.0069496 \n    0.0036577 \n    24 \n    32 \n    24 \n    49 \n    67 \n    63 \n    47 \n    123 \n    50 \n  \n  \n    Winchester \n    327 \n    270 \n    327 \n    41929 \n    23369 \n    65298 \n    89.55948 \n    0.0114415 \n    0.0035121 \n    18 \n    62 \n    18 \n    48 \n    182 \n    94 \n    113 \n    106 \n    55 \n  \n  \n    Reading \n    332 \n    289 \n    332 \n    42267 \n    32715 \n    74982 \n    112.58266 \n    0.0227425 \n    0.0040357 \n    14 \n    43 \n    14 \n    47 \n    104 \n    70 \n    54 \n    82 \n    43 \n  \n  \n    Gateshead \n    200 \n    279 \n    200 \n    42942 \n    42399 \n    85341 \n    51.61637 \n    0.0017757 \n    0.0035313 \n    123 \n    53 \n    123 \n    46 \n    64 \n    58 \n    260 \n    222 \n    53 \n  \n  \n    Crawley \n    335 \n    246 \n    335 \n    43108 \n    18998 \n    62106 \n    72.56600 \n    0.0248586 \n    0.0029446 \n    11 \n    86 \n    11 \n    45 \n    235 \n    102 \n    190 \n    78 \n    85 \n  \n  \n    Preston \n    288 \n    270 \n    288 \n    44352 \n    21146 \n    65498 \n    84.42626 \n    0.0011831 \n    0.0042716 \n    54 \n    62 \n    54 \n    44 \n    207 \n    92 \n    132 \n    265 \n    37 \n  \n  \n    Wolverhampton \n    314 \n    305 \n    314 \n    44388 \n    40094 \n    84482 \n    112.57007 \n    0.0032852 \n    0.0030924 \n    31 \n    28 \n    31 \n    43 \n    69 \n    61 \n    56 \n    172 \n    73 \n  \n  \n    Milton Keynes \n    344 \n    307 \n    344 \n    44450 \n    27780 \n    72230 \n    122.22514 \n    0.0253813 \n    0.0035232 \n    2 \n    26 \n    2 \n    42 \n    143 \n    76 \n    30 \n    76 \n    54 \n  \n  \n    Wakefield \n    297 \n    322 \n    297 \n    45101 \n    45316 \n    90417 \n    120.17849 \n    0.0029064 \n    0.0038373 \n    46 \n    12 \n    46 \n    41 \n    57 \n    55 \n    37 \n    179 \n    46 \n  \n  \n    Oxford \n    333 \n    287 \n    333 \n    45775 \n    15693 \n    61468 \n    107.32489 \n    0.0113616 \n    0.0045709 \n    13 \n    45 \n    13 \n    40 \n    277 \n    105 \n    66 \n    107 \n    34 \n  \n  \n    Stockport \n    320 \n    314 \n    320 \n    47968 \n    58798 \n    106766 \n    127.30501 \n    0.0044807 \n    0.0047446 \n    25 \n    19 \n    25 \n    39 \n    36 \n    37 \n    22 \n    148 \n    31 \n  \n  \n    Norwich \n    283 \n    259 \n    283 \n    48392 \n    21251 \n    69643 \n    63.73725 \n    0.0026206 \n    0.0041001 \n    59 \n    73 \n    59 \n    38 \n    203 \n    81 \n    213 \n    183 \n    41 \n  \n  \n    Warrington \n    326 \n    302 \n    326 \n    49172 \n    34607 \n    83779 \n    124.18728 \n    0.0028033 \n    0.0038653 \n    19 \n    31 \n    19 \n    37 \n    90 \n    62 \n    27 \n    180 \n    45 \n  \n  \n    Newham \n    331 \n    305 \n    331 \n    49198 \n    77274 \n    126472 \n    118.87240 \n    0.2181891 \n    0.0037221 \n    15 \n    28 \n    15 \n    36 \n    13 \n    24 \n    39 \n    17 \n    49 \n  \n  \n    Bradford \n    337 \n    318 \n    337 \n    50336 \n    55040 \n    105376 \n    142.38026 \n    0.0043787 \n    0.0048884 \n    9 \n    15 \n    9 \n    35 \n    39 \n    39 \n    12 \n    150 \n    29 \n  \n  \n    Coventry \n    339 \n    321 \n    339 \n    50577 \n    39493 \n    90070 \n    145.23539 \n    0.0058079 \n    0.0048386 \n    7 \n    13 \n    7 \n    34 \n    70 \n    56 \n    10 \n    132 \n    30 \n  \n  \n    Cheshire West and Chester \n    323 \n    324 \n    323 \n    50910 \n    51970 \n    102880 \n    141.77478 \n    0.0034742 \n    0.0039760 \n    22 \n    10 \n    22 \n    33 \n    44 \n    42 \n    13 \n    167 \n    44 \n  \n  \n    Cambridge \n    312 \n    250 \n    312 \n    51240 \n    16062 \n    67302 \n    73.34194 \n    0.0134464 \n    0.0046020 \n    33 \n    82 \n    33 \n    32 \n    273 \n    89 \n    188 \n    101 \n    33 \n  \n  \n    Solihull \n    333 \n    320 \n    333 \n    51374 \n    49120 \n    100494 \n    133.30159 \n    0.0075356 \n    0.0053752 \n    13 \n    14 \n    13 \n    31 \n    51 \n    44 \n    18 \n    117 \n    26 \n  \n  \n    Barnet \n    335 \n    295 \n    335 \n    53143 \n    94328 \n    147471 \n    107.29323 \n    0.2678205 \n    0.0053627 \n    11 \n    37 \n    11 \n    30 \n    6 \n    14 \n    67 \n    11 \n    27 \n  \n  \n    Cheshire East \n    331 \n    334 \n    331 \n    53260 \n    51773 \n    105033 \n    153.00249 \n    0.0049410 \n    0.0044883 \n    15 \n    4 \n    15 \n    29 \n    46 \n    41 \n    7 \n    141 \n    36 \n  \n  \n    Brent \n    324 \n    306 \n    324 \n    54353 \n    86120 \n    140473 \n    115.73294 \n    0.2552967 \n    0.0066587 \n    21 \n    27 \n    21 \n    28 \n    9 \n    17 \n    46 \n    12 \n    19 \n  \n  \n    Sandwell \n    330 \n    322 \n    330 \n    58716 \n    61446 \n    120162 \n    138.97124 \n    0.0058632 \n    0.0045497 \n    16 \n    12 \n    16 \n    27 \n    30 \n    28 \n    14 \n    130 \n    35 \n  \n  \n    Salford \n    327 \n    304 \n    327 \n    59144 \n    51900 \n    111044 \n    118.37394 \n    0.0039354 \n    0.0053232 \n    18 \n    29 \n    18 \n    26 \n    45 \n    32 \n    40 \n    162 \n    28 \n  \n  \n    South Gloucestershire \n    342 \n    315 \n    342 \n    59359 \n    53569 \n    112928 \n    143.90381 \n    0.0071708 \n    0.0067618 \n    4 \n    18 \n    4 \n    25 \n    43 \n    31 \n    11 \n    121 \n    18 \n  \n  \n    Hackney \n    325 \n    282 \n    325 \n    60542 \n    75197 \n    135739 \n    104.27664 \n    0.2704059 \n    0.0068321 \n    20 \n    50 \n    20 \n    24 \n    14 \n    19 \n    77 \n    10 \n    17 \n  \n  \n    Ealing \n    342 \n    296 \n    342 \n    63429 \n    95217 \n    158646 \n    121.88623 \n    0.2424303 \n    0.0072984 \n    4 \n    36 \n    4 \n    23 \n    5 \n    11 \n    32 \n    14 \n    14 \n  \n  \n    Sheffield \n    337 \n    337 \n    337 \n    63693 \n    45426 \n    109119 \n    160.95208 \n    0.0033646 \n    0.0042047 \n    9 \n    3 \n    9 \n    22 \n    56 \n    35 \n    4 \n    169 \n    39 \n  \n  \n    Wandsworth \n    327 \n    305 \n    327 \n    63894 \n    124029 \n    187923 \n    121.44261 \n    0.4178796 \n    0.0058755 \n    18 \n    28 \n    18 \n    21 \n    1 \n    9 \n    33 \n    5 \n    22 \n  \n  \n    Leicester \n    328 \n    311 \n    328 \n    67191 \n    41007 \n    108198 \n    121.94219 \n    0.0045364 \n    0.0060454 \n    17 \n    22 \n    17 \n    20 \n    68 \n    36 \n    31 \n    145 \n    20 \n  \n  \n    Trafford \n    316 \n    299 \n    316 \n    70188 \n    50717 \n    120905 \n    113.06647 \n    0.0048473 \n    0.0068569 \n    29 \n    33 \n    29 \n    19 \n    49 \n    27 \n    53 \n    143 \n    16 \n  \n  \n    Cardiff \n    321 \n    310 \n    321 \n    73041 \n    32252 \n    105293 \n    126.18715 \n    0.0032443 \n    0.0056728 \n    24 \n    23 \n    24 \n    18 \n    109 \n    40 \n    25 \n    173 \n    24 \n  \n  \n    Hounslow \n    339 \n    298 \n    339 \n    73977 \n    71624 \n    145601 \n    113.12328 \n    0.1694069 \n    0.0072375 \n    7 \n    34 \n    7 \n    17 \n    18 \n    15 \n    52 \n    24 \n    15 \n  \n  \n    Bristol, City of \n    338 \n    324 \n    338 \n    80907 \n    54120 \n    135027 \n    146.21380 \n    0.0085801 \n    0.0081482 \n    8 \n    10 \n    8 \n    16 \n    42 \n    20 \n    9 \n    112 \n    13 \n  \n  \n    Kensington and Chelsea \n    334 \n    256 \n    334 \n    86860 \n    50799 \n    137659 \n    87.89829 \n    0.3011796 \n    0.0144531 \n    12 \n    76 \n    12 \n    15 \n    47 \n    18 \n    121 \n    8 \n    5 \n  \n  \n    Lambeth \n    339 \n    295 \n    339 \n    87037 \n    115419 \n    202456 \n    120.60327 \n    0.4329508 \n    0.0086193 \n    7 \n    37 \n    7 \n    14 \n    2 \n    8 \n    34 \n    3 \n    12 \n  \n  \n    Nottingham \n    336 \n    315 \n    336 \n    89650 \n    38180 \n    127830 \n    134.64542 \n    0.0039334 \n    0.0059435 \n    10 \n    18 \n    10 \n    13 \n    73 \n    23 \n    16 \n    163 \n    21 \n  \n  \n    Newcastle upon Tyne \n    320 \n    292 \n    320 \n    89811 \n    38300 \n    128111 \n    104.36164 \n    0.0030717 \n    0.0057526 \n    25 \n    40 \n    25 \n    12 \n    72 \n    22 \n    76 \n    177 \n    23 \n  \n  \n    Hammersmith and Fulham \n    340 \n    273 \n    340 \n    90212 \n    64765 \n    154977 \n    103.70858 \n    0.3005236 \n    0.0118080 \n    6 \n    59 \n    6 \n    11 \n    26 \n    13 \n    80 \n    9 \n    9 \n  \n  \n    Liverpool \n    301 \n    333 \n    301 \n    91162 \n    50759 \n    141921 \n    130.03027 \n    0.0042335 \n    0.0055228 \n    43 \n    5 \n    43 \n    10 \n    48 \n    16 \n    20 \n    154 \n    25 \n  \n  \n    Hillingdon \n    345 \n    303 \n    345 \n    96119 \n    61002 \n    157121 \n    123.20678 \n    0.1448890 \n    0.0086205 \n    1 \n    30 \n    1 \n    9 \n    31 \n    12 \n    28 \n    27 \n    11 \n  \n  \n    Leeds \n    340 \n    340 \n    340 \n    121087 \n    65369 \n    186456 \n    166.23405 \n    0.0072535 \n    0.0092803 \n    6 \n    2 \n    6 \n    8 \n    25 \n    10 \n    2 \n    120 \n    10 \n  \n  \n    Islington \n    342 \n    277 \n    342 \n    132028 \n    70981 \n    203009 \n    102.43241 \n    0.3661235 \n    0.0151687 \n    4 \n    55 \n    4 \n    7 \n    19 \n    7 \n    84 \n    7 \n    4 \n  \n  \n    Southwark \n    343 \n    297 \n    343 \n    132137 \n    95381 \n    227518 \n    120.54708 \n    0.4190788 \n    0.0124909 \n    3 \n    35 \n    3 \n    6 \n    4 \n    6 \n    36 \n    4 \n    8 \n  \n  \n    Birmingham \n    345 \n    343 \n    345 \n    166056 \n    100223 \n    266279 \n    174.73617 \n    0.0144646 \n    0.0127334 \n    1 \n    1 \n    1 \n    5 \n    3 \n    3 \n    1 \n    97 \n    7 \n  \n  \n    Manchester \n    345 \n    333 \n    345 \n    179517 \n    72365 \n    251882 \n    161.42941 \n    0.0081722 \n    0.0134337 \n    1 \n    5 \n    1 \n    4 \n    16 \n    5 \n    3 \n    115 \n    6 \n  \n  \n    Tower Hamlets \n    340 \n    296 \n    340 \n    185467 \n    70808 \n    256275 \n    119.14147 \n    0.4108055 \n    0.0210011 \n    6 \n    36 \n    6 \n    3 \n    20 \n    4 \n    38 \n    6 \n    3 \n  \n  \n    Camden \n    345 \n    282 \n    345 \n    227171 \n    62784 \n    289955 \n    116.18251 \n    0.4715192 \n    0.0277070 \n    1 \n    50 \n    1 \n    2 \n    29 \n    2 \n    44 \n    2 \n    2 \n  \n  \n    Westminster,City of London \n    345 \n    289 \n    345 \n    866007 \n    42018 \n    908025 \n    109.10666 \n    1.0000000 \n    0.0736260 \n    1 \n    43 \n    1 \n    1 \n    65 \n    1 \n    63 \n    1 \n    1"
  },
  {
    "objectID": "src/network_analysis.html#compare-centralities",
    "href": "src/network_analysis.html#compare-centralities",
    "title": "Network analysis practical: networks of cities",
    "section": "Compare centralities",
    "text": "Compare centralities\nThe below code provides a corregram of the different centrality measures.\n\ncor.mat <- cor(centralities[,c(2:10)])\ncorrplot(cor.mat, type=\"upper\")\n\n\n\n\n\n\n\nQuestion: Discuss the differences between the different centrality measures in the context of the commuting network."
  },
  {
    "objectID": "src/network_analysis.html#community-detection",
    "href": "src/network_analysis.html#community-detection",
    "title": "Network analysis practical: networks of cities",
    "section": "Community detection",
    "text": "Community detection\nTo begin with, we need to convert our network to an undirected one, as the fast_greedy algorithm we are using can only be applied to such networks.\n\nnet.all.und <- as.undirected(net.all,\n                             mode=c(\"mutual\"),\n                             edge.attr.comb = igraph_opt(\"edge.attr.comb\"))\n\ncommunities.net.all <- cluster_fast_greedy(net.all.und)\n\n# This provides a summary of the community algorithm:\nprint(communities.net.all)\n\nIGRAPH clustering fast greedy, groups: 11, mod: 0.69\n+ groups:\n  $`1`\n   [1] \"E41000033\" \"E41000034\" \"E41000035\" \"E41000098\" \"E41000100\" \"E41000101\"\n   [7] \"E41000102\" \"E41000104\" \"E41000106\" \"E41000107\" \"E41000127\" \"E41000130\"\n  [13] \"E41000137\" \"E41000138\" \"E41000139\" \"E41000140\" \"E41000141\" \"E41000142\"\n  [19] \"E41000143\" \"E41000144\" \"E41000145\" \"E41000146\" \"E41000147\" \"E41000148\"\n  [25] \"E41000228\" \"E41000229\" \"E41000231\" \"E41000232\" \"E41000233\" \"E41000234\"\n  [31] \"E41000236\" \"E41000293\" \"E41000294\" \"E41000295\" \"E41000296\" \"E41000297\"\n  [37] \"E41000298\" \"E41000299\" \"E41000300\" \"E41000301\" \"E41000302\" \"E41000303\"\n  [43] \"E41000304\" \"E41000305\" \"E41000306\" \"E41000307\" \"E41000308\" \"E41000309\"\n  [49] \"E41000310\" \"E41000311\" \"E41000312\" \"E41000313\" \"E41000314\" \"E41000315\"\n  + ... omitted several groups/vertices\n\n# To see how many communities we have, run the below:\nlength(communities.net.all)\n\n[1] 11\n\n# And these are the community sizes:\nsizes(communities.net.all)\n\nCommunity sizes\n 1  2  3  4  5  6  7  8  9 10 11 \n63 46 29 31 16 47 27 14 29 22 22 \n\n# Now, let's create a new object with the community membership\n#communities.net.all_membership <- membership(communities.net.all)\n\n# And convert it to a data.frame\n\ncommunities.net.all_membership <- membership(communities.net.all) %>%\n  unclass %>%                          # we first need to unclass the object\n  as.data.frame %>%                    # we convert it to a dataframe\n  rename(community = \".\") %>%          # rename the community column\n  rownames_to_column(\"cmlad11cd\") %>%  # we 'move' the rownames to a\n                                       # new column in order to do a merge below\n  left_join(la.names) %>%              # and now we can merge it with the LA names\n  arrange(community) %>%               # arrange based on the community membership\n  glimpse()\n\nRows: 346\nColumns: 3\n$ cmlad11cd <chr> \"E41000033\", \"E41000034\", \"E41000035\", \"E41000098\", \"E410001~\n$ community <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ~\n$ cmlad11nm <chr> \"Southend-on-Sea\", \"Thurrock\", \"Medway\", \"Basildon\", \"Brentw~\n\n# this is just a test to see if the `left_join` led to any NAs\nsapply(communities.net.all_membership, function(x) sum(is.na(x)))\n\ncmlad11cd community cmlad11nm \n        0         0         0 \n\n\nLet’s try now to map our output. We need the local authorities shape file we have already loaded.\n\n# First we merge the `la` object with the community membership\nla <- merge(la, communities.net.all_membership, by = \"cmlad11cd\")\n# Please note that I used base R for the above. I could have easily used the dplyr\n# equivalent. Which function would this be?\n\n# just a check to see how the merge worked\nsapply(la, function(x) sum(is.na(x))) \n\n     cmlad11cd       objectid    cmlad11nm.x     cmlad11nmw   st_areashape \n             0              0              0              0              0 \nst_lengthshape      community    cmlad11nm.y       geometry \n             0              0              0              0 \n\n# And this is our map\nggplot(la, aes(fill = as.factor(community))) + \n  geom_sf() +\n  ggtitle(\"Communities using the 'fast and greedy' algorithm\")\n\n\n\n\n\n\n\nQuestion: What do you think about the output? Can we learn anything? Can you try different community algorithms? Check igraph’s manual and Javed et al (2018)"
  },
  {
    "objectID": "src/network_analysis.html#network-visualisation",
    "href": "src/network_analysis.html#network-visualisation",
    "title": "Network analysis practical: networks of cities",
    "section": "Network Visualisation",
    "text": "Network Visualisation\nThe below chunks of code offer some intro to plotting network data. Have a look to see how the code works.\n\nplot(net.all, # the graph to be plotted\n     layout=layout.fruchterman.reingold, # the layout method. see the igraph documentation for details\n     main='My first graph in R', # specifies the title\n     vertex.label.dist=0.5, # puts the name labels slightly off the dots\n     vertex.frame.color='blue', # the colour of the border of the dots\n     vertex.label.color='black', # the colour of the name labels\n     vertex.label.font=2, # the font of the name labels\n     vertex.label=V(net.all)$id, # specifies the labels of the vertices. in this case the 'name' attribute is used\n     vertex.label.cex=.5,   # specifies the size of the font of the labels. can also be made to vary\n     edge.arrow.size=0.1) # specifies the arrow size\n\n\n\n\nNot a very nice outcome :( Let’s remove some information\n\nplot(net.all, # the graph to be plotted\n     layout=layout.fruchterman.reingold, # the layout method. see the igraph documentation for details\n     main='My second graph in R',   # specifies the title\n     vertex.frame.color='blue', # the colour of the border of the dots\n     vertex.label.font=2,   # the font of the name labels\n     vertex.label=NA,   # no labels for the vertices\n     edge.arrow.size=0, # specifies the arrow size\n     vertex.size=5) # vertex size\n\n\n\n\nLet’s try to only plot nodes with high weighted degree centrality.\n\n# The below gives us the 90th percentile:\nq <- quantile(strength(net.all), .9)\n\n# Then, we create a network with the nodes we DON'T want to plot. In this case the lowest 90%\nlow_nodes <- V(net.all)[strength(net.all) < q] # 108659 is the 90% percentile. Feel free to play with different numbers\n\n# And this is the network with the 10% of the most central nodes\nnet.all.central <- delete.vertices(net.all, low_nodes)\n\n# The below uses the node degree centrality to plot the node size.\n# Pay attention to the 0.0001 factor.\n\nplot(net.all.central, # the graph to be plotted\n     layout=layout.fruchterman.reingold, # the layout method. see the igraph documentation for details\n     main='My third graph in R', # specifies the title\n     vertex.frame.color='blue', # the colour of the border of the dots\n     vertex.label.font=2,   # the font of the name labels\n     vertex.label=V(net.all.central)$id, # no labels for the vertices\n     vertex.label.font=1, # the font type of the name labels (1 plain, 2 bold, 3, italic, 4 bold italic, 5 symbol)\n     vertex.label.cex=.5,   # specifies the size of the font of the labels. can also be made to vary\n     edge.arrow.size=0, # specifies the arrow size\n     vertex.size=strength(net.all.central)*0.0001) # defines the node size based on weighted degree centrality\n\n\n\n\nNot very nice either…\n\n\n\nFor the next time:\n\n\n\n\nspend some time browsing the igraph’s manual,\n\n\n\n\nsearch for code online to plot large netwoks in R using igraph, and\n\n\n\n\nuse the following tutorials\n\n\n\n\n\n\nnetVizR (the data can be found here under the ‘Network Visualization in R’ section\n\n\n\n\nedge-bundling\n\n\n\n\nin order to produce more meaningful network visualisations of the UK commuting network.\n\n\nI am interesting in one or multiple plots with:\n\n\n\n\nall or a subset of the nodes and edges. How could you select such a subset?\n\n\n\n\nthe communities you detected.\n\n\n\n\nvarying size of nodes based on a centrality measure. Again, you can decide to plot a subset of the network based on some network characteristics.\n\n\n\n\nan appropriate to the network layout."
  },
  {
    "objectID": "src/network_analysis.html#mapping",
    "href": "src/network_analysis.html#mapping",
    "title": "Network analysis practical: networks of cities",
    "section": "Mapping",
    "text": "Mapping\nUntil now we focused mostly on the topology of the network and we ignored its spatial dimension. However, this is an important attribute of the commuting network and we should necessarily consider it and incorporate it in our analysis. To begin with we will map these commuting flows. Bare in mind that this is not a trivial process as, in essence, we need to attach the geographical coordinates to the network nodes and plot the network based on these coordinates. Given the size of our network this might be computationally expensive. It is also challenging to create a meaningful map given the size of the network.\nThe local authorities spatial object is necessary in order to use the od2line() function from the stplanr package. This is a very useful function transforms origin to destination (OD) tables to linear spatial objects. In order for this function to work we need the above spatial object with the zones of the origin and destination flows. Importantly it needs to only include the zone codes (i.e. the local authority codes), which should match with the origin and destination codes.This is the la spatial object of the local authorities in England and Wales, which has already been loaded in R.\nThe below code just plots the boundaries of local authorities.\n\nggplot(la) + \n  geom_sf() +\n  ggtitle(\"Local authorities\")\n\n\n\n\nNow let’s do some clean-up of the commuting.all data frame in order to convert it to a spatial object using the od2line() function.\n\n# We start by plotting a histogram of the data. We are using ggplot() as the output\n# is nicer, but the simpler hist() could also be used\n\noptions(scipen=999) # It prevents R from using scientific notation for numbers\nggplot(commuting.all,\n       aes(x=weight)) +\n  geom_histogram() +\n  geom_vline(aes(xintercept=mean(weight)), # This line of code adds a vertical line to represent the mean\n             color=\"blue\", linetype=\"dashed\", size=1)\n\n\n\n\nAs you can see the flow data is very skewed. So, let’s truncate the data and plot a histogram for flows between origin and destinations will less than 1000 people.\n\nggplot(commuting.all[commuting.all$weight < 1000,],\n       aes(x=weight)) +\n  geom_histogram() +\n  geom_vline(aes(xintercept=mean(weight)),\n             color=\"blue\",\n             linetype=\"dashed\",\n             size=1)\n\n\n\n\nThere is a very large number of local authority pairs with very few people commuting between these OD pairs. So, in order to decrease the data and the mapping complexity we will keep only the OD pairs with more than 5 commuters.\n\ncommuting.all.truncated <- commuting.all %>% \n  filter(weight > 5) %>% \n  glimpse()\n\nRows: 41,659\nColumns: 3\n$ o      <chr> \"E41000001\", \"E41000001\", \"E41000001\", \"E41000001\", \"E41000001\"~\n$ d      <chr> \"E41000002\", \"E41000003\", \"E41000004\", \"E41000005\", \"E41000010\"~\n$ weight <dbl> 1591, 534, 3865, 433, 8, 24, 6, 30, 6, 6, 10, 8, 6, 7, 7, 7, 9,~\n\n\n\n\n\nQuestion: How many lines did we filter out?\n\n\n\nThe next chunk of code converts the origin-destination table to a spatial object using the corresponding zones spatial object (la) that we have already loaded.\n\n# od2line() has some strict requirement regarding data structure. \n# Check ?od2line\n# Therefore, we kept only the local authority code and name.\n# The actual requirement is to have the the zone code as the \n# first column of the zone object. \n# If you remember, we run the following when we loaded the la object: \n# la.names <- as.data.frame(la) %>% \n#   select(cmlad11cd, cmlad11nm) # all we need is the LA names and codes\n\ntravel_network <- od2line(flow = commuting.all.truncated, \n                          zones = la)\n\n# Just to see the class of the new spatial object\nclass(travel_network)\n\n[1] \"sf\"         \"data.frame\"\n\nplot(travel_network)\n\n\n\n\nThis is a naive plot of the spatial network. We can guess the shape of England and Wales, but this is like a hairball network and far from being useful. In order to produce a more useful visualisation we will employ the leaflet package, which produces interactive maps using JaveScript Libraries.\n\n# this is the colour pallet we are going to use based on 5 quantiles\nFlow_pal <- colorQuantile(\"YlOrBr\", domain = travel_network$weight, n=5)\n\nleaflet() %>%\n  addTiles() %>%\n  addPolylines(\n    data = travel_network,\n    weight = .1,\n    color = ~Flow_pal(weight),\n    opacity = .6) %>%\n    addLegend(\"topright\",\n              pal = Flow_pal,\n              values = travel_network$weight,\n              title = \"Commuting flows in 2011\")\n\n\n\n\n\nLet’s try now to create an interactive map showing only the flows originating from Bristol and Birmingham.\n\n# To begin with let's find out the local authority codes for Bristol and Birmingham\n# Look up the grep() function. Very useful!\nla.names[grep(\"Bristol\", la.names$cmlad11nm),]\n\n   cmlad11cd        cmlad11nm\n23 E41000023 Bristol, City of\n\nla.names[grep(\"Birmingham\", la.names$cmlad11nm),]\n\n    cmlad11cd  cmlad11nm\n281 E41000281 Birmingham\n\n# These are E41000023 and E41000281 respectively.\n\n# Next we will create the 'groups' of local authorities\ntravel_network$la.groups = \"Rest\"\ntravel_network$la.groups[travel_network$o == \"E41000023\"] = \"Bristol\"\ntravel_network$la.groups[travel_network$o == \"E41000281\"] = \"Birmingham\"\n\nleaflet() %>%\n  addTiles() %>%\n  addPolylines(\n    data = travel_network,\n    weight = 1, # Notice the different value for better visual effect when zoom in\n    color = ~Flow_pal(weight),\n    opacity = .8, # as above\n    group = travel_network$la.groups) %>%\n  addLayersControl(\n    position = \"bottomleft\",\n    overlayGroups = unique(travel_network$la.groups),\n    options = layersControlOptions(\n      collapsed = FALSE)) %>%\n  addLegend(\"topright\",\n          pal = Flow_pal,\n          values = travel_network$weight,\n          title = \"Commuting flows in 2011\")"
  },
  {
    "objectID": "src/network_models.html",
    "href": "src/network_models.html",
    "title": "Network models in practice",
    "section": "",
    "text": "Pay attention on the packages sand and igraphdata. The first one contains all the different network datasets used by (Kolaczyk and Csárdi 2020). Then, the second one contain network data to be used together with the igraph package. More information can be found here and here. Feel free to explore these network data on your own time.\n\nlibrary(tidyverse)\nlibrary(igraph)\n\nlibrary(sand)       \nlibrary(igraphdata)"
  },
  {
    "objectID": "src/network_models.html#aims-of-the-practical",
    "href": "src/network_models.html#aims-of-the-practical",
    "title": "Network models in practice",
    "section": "Aims of the practical",
    "text": "Aims of the practical\n\nSimulate network models\nAnalyse their key attributes\nCompare them\n\nigraph enables us to generate networks based on some of the some key network models we discussed. I list below some of these functions:\n\nsample_gnp()\nsample_smallworld()\nsample_pa()\n\nGo to igraph’s webpage and familiarise yourselves with the syntax of these functions.\n\n\n\nTask: Create three networks using these three functions with, let’s say, (n = 500) nodes each.\n\n\nVisualise and compare these networks.\n\n\n\nImportantly, just before you generate a network with one of the above three functions you will need to define a random seed for reproducibility reasons, e.g. set.seed(55).\n\n\n\nQuestion: Without defining a random seed, generate a network as per the above, run some type of quick analysis about this network and then repeat the code by generating a second network with the exact same characteristics. Run the same analysis for the second network. Are the results the same?\n\n\nWhy do we need to define the random seed ?"
  },
  {
    "objectID": "src/network_models.html#examples-of-modelled-networks",
    "href": "src/network_models.html#examples-of-modelled-networks",
    "title": "Network models in practice",
    "section": "Examples of modelled networks",
    "text": "Examples of modelled networks\n\nsample_gnp(n = 500, p = 0.02) %>% \n  plot(layout=layout_in_circle, vertex.label=NA)\n\n\n\nsample_pa(n = 500, directed=FALSE) %>% \n  plot(layout=layout_in_circle, vertex.label=NA)\n\n\n\nsample_smallworld(dim = 1, size = 500, nei = 5, p = 0.05) %>% \n  plot(layout=layout_in_circle, vertex.label=NA)\n\n\n\nmake_lattice(dim =1, length = 100, nei = 5) %>% \n  plot(vertex.label=NA)"
  },
  {
    "objectID": "src/description.html",
    "href": "src/description.html",
    "title": "Unit description and aims",
    "section": "",
    "text": "This unit introduces students to the research fields of Urban Analytics and City Science. It enables them to utilise cutting-edge methods from these fields and pair them with new sources of data to answer urging research questions about cities. Moreover, the students will develop a critical understanding of these tools and data as well as their applicability and value for urban research, planning and urban policy making. Emphasis will be placed on the interactions between digital technologies and urban space and the smart city agenda.\nEmphasis will be placed on the network understanding of our cities. Networks have long formed a distinctive element of urban research. Various sub-fields of geography, such as transport, economic and urban geography, are heavily based on networks both from a conceptual and an analytical point of view. Moreover, the digital revolution and developments related to social media and connectivity as well as heightened flows of information within and between urban regions, have greatly enhanced the relevance of a network approach to contemporary socio-economic and cultural trends. This module will approach the above issues both from a theoretical and practical perspective.\nThe first part of this unit will be dedicated to concepts and tools from social network analysis, including hands-on practicals. This part will provide the fundamental knowledge of this module. Networks analysis will then lead to the concept of scaling in urban science, which will be linked with essential urban economic elements such as agglomeration economies and urban hierarchies. The practical knowledge of network analysis will be used as a stepping stone to understand ideas and methods from the field of transport geography regarding modelling flows within and between cities. Common thread here is the network structure which is an essential element of both transport geography and social network analysis. The empirical element of this part will deal with basic concepts such as gravity models as well as connectivity and accessibility measures.\nThe unit aims:"
  },
  {
    "objectID": "src/description.html#intended-learning-outcomes",
    "href": "src/description.html#intended-learning-outcomes",
    "title": "Unit description and aims",
    "section": "Intended Learning Outcomes",
    "text": "Intended Learning Outcomes\n\nBe able to creatively utilise cutting edge methods from Urban Analytics and Urban Science in order to answer urban research questions.\nBe able to critically assess the value of and utilise new sources of big data for urban research.\nIdentify key concepts and theories of digital transformations and smart cities.\nPresent the results of statistical analysis in a clear, cogent manner, using effective visualizations, tables, and written argument."
  },
  {
    "objectID": "src/description.html#assessment-details",
    "href": "src/description.html#assessment-details",
    "title": "Unit description and aims",
    "section": "Assessment details",
    "text": "Assessment details\nOne 3500-word report (100% of the unit mark) for an urban data analysis project. The report will be written in a reproducible manner and will include the necessary code for the data analysis and the outputs (e.g. an Rmarkddown document)."
  },
  {
    "objectID": "src/description.html#software",
    "href": "src/description.html#software",
    "title": "Unit description and aims",
    "section": "Software",
    "text": "Software\nAll the analysis will be done using R and RStudio."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Urban Analytics and City Science",
    "section": "",
    "text": "This is the webpage for the Urban Analytics and City Science unit, a core unit for the MSc in Geographic Data Science and Spatial Analytics. This programme is part of the School of Geographical Sciences at the University of Bristol and has been developed by the Quantitative Spatial Science Research Group.\nAll the unit material can be accessed in .html form from the left-hand side menu. If you want to access the source code please go to the src directory of the GitHub repository."
  },
  {
    "objectID": "src/syllabus.html",
    "href": "src/syllabus.html",
    "title": "Syllabus",
    "section": "",
    "text": "Network science, urban laws and scaling\n\nPractical: Build and compare models\n\nMoving from network analysis to network science with clear urban applications.\nReading week\nMethods in transport geography\nSame methods, different facets of urban research. This part of the unit will allow you to apply your network skills to answer transport related questions. It will also make the transition from networks to flows.\n\n\n\n\n\n\n\n\n\n\nSpatial interaction modelling\nYou ve’learned how to analyse networks, now you can learn how to analyse and model flows. Do you see the parallel?\n\n\n\nAccessibility\nDiversity in cities\nWhy is diversity important in cities and how do we measure it?\nUrban policies and causality\nFrom urban analysis to urban policies. And how to assess such policies. Causality."
  },
  {
    "objectID": "src/readings.html",
    "href": "src/readings.html",
    "title": "Key readings",
    "section": "",
    "text": "All lecture slides include a reference list. Please go through these materials.\nA indicative list of key readings include:\nAlso, the Big Book of R is a great collection of R related books. Some of these include:\nPlease don’t limit your reading in the following list."
  },
  {
    "objectID": "src/author.html",
    "href": "src/author.html",
    "title": "Urban analytics and city science",
    "section": "",
    "text": "I am a Professor of Quantitative Human Geography at the University of Bristol and a Fellow at the Alan Turing Institute. My research has been exposing the spatial dimensions of digital technologies and the digital economy from their early stages until today. I have published on issues related to the geography of the internet infrastructure, the economic impacts that such digital infrastructure can generate on cities and regions and the position of cities within spatial, complex networks. I have a strong interest and expertise on the use of new sources of big data, such as data from mobile phone operators, to better understand the complexities of smart cities and urban systems. Using such data and relevant computational methods, my research has explored the interplay between geography, spatial structure and social networks and how these support knowledge transfer and creation. Together with my team, we have explored how access to digital tools can intervene with some key dimensions of spatial structure including commuting and the role of distance.\nRecently, we have been exploring the geography and the evolution of the creation of online content and its interrelation with cities and spatial structure using web data and digital archives. Our research framework enables us to access how early engagement with digital technologies may intervene with future regional productivity pathways.\nI am an Editor of the Regional Science Policy and Practice journal, the Conferences Officer of QMRG, a Board Member of the British and Irish Section of RSAI and the Director of the MSc in Geographic Data Science and Spatial Analytics the MRes in Advanced Quantitative Methods (AQM).\nEmail me at: e [dot] tranos [at] bristol [dot] ac [dot] uk\nAffiliations:\n\nQuantitative Spatial Science, University of Bristol\nSchool of Geographical Sciences, University of Bristol\nThe Alan Turing Institute\n\nProfessor Emmanouil Tranos"
  },
  {
    "objectID": "src/street_networks.html",
    "href": "src/street_networks.html",
    "title": "Street network analysis practical: networks within cities",
    "section": "",
    "text": "Until this point the focus has been on networks between cities. Now we are turning the focus on networks within cities and more specifically on street networks. These are spatial networks whose edges and not only their nodes contain spatial information. To summarise, in spatial or, in other words, geospatial networks:\n\nNodes always contain geographical coordinates.\nHowever, edges can:\n\neither contain geographical information (e.g. road networks),\nor not, and instead just link two nodes (e.g. social networks whose node’s geograpical location is known to us)\n\n\nStreet network analysis is not new. For instance, Leonhard Euler proved that the Seven Bridges of Königsberg problem had no solution. This type of problems and analysis – routing – later on became integral part of the standard GIS toolkit.\nWhy is it important to study street networks:\n\nTo understand the form of cities. There are quite a few recent studies (e.g. Boeing 2019, 2017), but this was also part of an older strand of research called Space Syntax (Hillier et al. 1976).\nTo understand the structure of transportation systems and support transportation planning.\n\nSome key characteristics of street networks:\n\nThey might have multiple edges between two nodes.\nStreet networks are approximately planar (Boeing 2017).\nEdges contain geographical information.\n\nTopological measures are important to understand and (maybe compare different) urban street networks.\nTry to think what the below topological measures might mean for a street network:\n\nNode density\nNode eccentricity\nNetwork diameter\nNode degree\nClustering coefficient\nBetweenness centrality and its maximum value in a network\nCloseness centrality\n\nKey development: OpenStreetMap. Known as the Wikipedia for maps, OSM is a collaborative, citizen science project, which allows individuals to contribute in building openly distributed geographic data (Muki Haklay et al. 2021; Mordechai Haklay and Weber 2008). Through OSM urban analysts have access to street network data from around the world, something which wasn’t the case, let’s say, 20 years ago.\nThe below are based on the very helpful vignettes of the sfnetworks and osmdata packages. Please make sure to revisit these materials on your own time.\n\nlibrary(sfnetworks) #tidy geospatial networks\nlibrary(sf)         #simple features, spatial data\nlibrary(tidygraph)  #tidyverse's version of igraph\nlibrary(tidyverse)  #you should know this by now\nlibrary(igraph)     #as above\nlibrary(osmdata)    #access OSM data\nlibrary(dbscan)     #this is the dbscan clustering algorithm\n\nknitr::opts_chunk$set(echo = TRUE) \n\nIn geospatial networks:\n\nnodes always contain geographical coordinates (sf objects),\nedges can:\n\neither contain geographical information (e.g. road networks)\nor not, and instead just link two nodes (e.g. geospatial social networks)"
  },
  {
    "objectID": "src/street_networks.html#a-first-toy-example",
    "href": "src/street_networks.html#a-first-toy-example",
    "title": "Street network analysis practical: networks within cities",
    "section": "A first ‘toy’ example",
    "text": "A first ‘toy’ example\nThe below code chunks create and manipulate a toy geospatial network.\n\np1 = st_point(c(7, 51))\np2 = st_point(c(7, 52))\np3 = st_point(c(8, 52))\np4 = st_point(c(8, 51.5))\n\nl1 = st_sfc(st_linestring(c(p1, p2)))\nl2 = st_sfc(st_linestring(c(p1, p4, p3)))\nl3 = st_sfc(st_linestring(c(p3, p2)))\n\nedges = st_as_sf(c(l1, l2, l3), crs = 4326)\nnodes = st_as_sf(c(st_sfc(p1), st_sfc(p2), st_sfc(p3)), crs = 4326)\n\nedges$from = c(1, 1, 3)\nedges$to = c(2, 3, 2)\n\nAs you can see below, net has a valid spatial network structure\n\nnet = sfnetwork(nodes, edges)\n\nChecking if spatial network structure is valid...\n\n\nSpatial network structure is valid\n\n\nWe can check it’s class:\n\nclass(net)\n\n[1] \"sfnetwork\" \"tbl_graph\" \"igraph\"   \n\n\nAnd check it characteristics.\n\nnet\n\n# A sfnetwork with 3 nodes and 3 edges\n#\n# CRS:  EPSG:4326 \n#\n# A directed acyclic simple graph with 1 component with spatially explicit edges\n#\n# Node Data:     3 x 1 (active)\n# Geometry type: POINT\n# Dimension:     XY\n# Bounding box:  xmin: 7 ymin: 51 xmax: 8 ymax: 52\n            x\n  <POINT [°]>\n1      (7 51)\n2      (7 52)\n3      (8 52)\n#\n# Edge Data:     3 x 3\n# Geometry type: LINESTRING\n# Dimension:     XY\n# Bounding box:  xmin: 7 ymin: 51 xmax: 8 ymax: 52\n   from    to                    x\n  <int> <int>     <LINESTRING [°]>\n1     1     2         (7 51, 7 52)\n2     1     3 (7 51, 8 51.5, 8 52)\n3     3     2         (8 52, 7 52)\n\n\nJust like igraph we can refer to nodes using the names we can assign to them.\n\nnodes$name = c(\"city\", \"village\", \"farm\")\nedges$from = c(\"city\", \"city\", \"farm\")\nedges$to = c(\"village\", \"farm\", \"village\")\n\nedges # check the from and to columns \n\nSimple feature collection with 3 features and 2 fields\nGeometry type: LINESTRING\nDimension:     XY\nBounding box:  xmin: 7 ymin: 51 xmax: 8 ymax: 52\nGeodetic CRS:  WGS 84\n                               x from      to\n1        LINESTRING (7 51, 7 52) city village\n2 LINESTRING (7 51, 8 51.5, 8... city    farm\n3        LINESTRING (8 52, 7 52) farm village\n\nnet = sfnetwork(nodes, edges, node_key = \"name\")\n\nChecking if spatial network structure is valid...\n\n\nSpatial network structure is valid\n\n\nnet’s edges contain geographical information. So, let’s create an other_net whose edges do not contain geographical information. This could have been a geospatial social network, for example. We know where each node is located in space and then the edges illustrate the existence of a connection between two nodes. To do so, we simply set the st_geometry equal to NULL. The plots below will make these differences clear.\n\nst_geometry(edges) = NULL\n\nother_net = sfnetwork(nodes, edges, edges_as_lines = TRUE)\n\nChecking if spatial network structure is valid...\n\n\nSpatial network structure is valid\n\n\nWe can actually plot both example.\n\nplot(net, cex = 2, lwd = 2, main = \"Original geometries\")\n\n\n\nplot(other_net, cex = 2, lwd = 2, main = \"Geospatial social network example\")"
  },
  {
    "objectID": "src/street_networks.html#a-more-real-street-network",
    "href": "src/street_networks.html#a-more-real-street-network",
    "title": "Street network analysis practical: networks within cities",
    "section": "A more ‘real’ street network",
    "text": "A more ‘real’ street network\nLet’s increase the complexity now. We can use the roxel data from the sfnetworks package. Roxel is a small town just outside Munster in Germany.\nThe as_sfnetwork() function converts the spatial object to a network. So, this is the spatial object and this is how it’s geometry looks like.\n\nroxel\n\nSimple feature collection with 851 features and 2 fields\nGeometry type: LINESTRING\nDimension:     XY\nBounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax: 51.9612\nGeodetic CRS:  WGS 84\n# A tibble: 851 x 3\n   name                  type                                           geometry\n * <chr>                 <fct>                                  <LINESTRING [°]>\n 1 Havixbecker Strasse   residential      (7.533722 51.95556, 7.533461 51.95576)\n 2 Pienersallee          secondary   (7.532442 51.95422, 7.53236 51.95377, 7.53~\n 3 Schulte-Bernd-Strasse residential (7.532709 51.95209, 7.532823 51.95239, 7.5~\n 4 <NA>                  path        (7.540063 51.94468, 7.539696 51.94479, 7.5~\n 5 Welsingheide          residential       (7.537673 51.9475, 7.537614 51.94562)\n 6 <NA>                  footway     (7.543791 51.94733, 7.54369 51.94686, 7.54~\n 7 <NA>                  footway           (7.54012 51.94478, 7.539931 51.94514)\n 8 <NA>                  path        (7.53822 51.94546, 7.538131 51.94549, 7.53~\n 9 <NA>                  track       (7.540063 51.94468, 7.540338 51.94468, 7.5~\n10 <NA>                  track       (7.5424 51.94599, 7.54205 51.94629, 7.5419~\n# ... with 841 more rows\n\nplot(st_geometry(roxel))\n\n\n\n\nNow, we can convert it to a geospatial network and plot it.\n\nnet <- as_sfnetwork(roxel)\nplot(net)\n\n\n\n\nInstead of plot() we can also use ggplot2 functions. autoplot() does what it says.\n\nautoplot(net) + \n  ggtitle(\"Road network of Münster Roxel\")\n\n\n\n\nWe have a network, so let’s do some network analysis.\nFirst thing we need to do is to activate the network component we are interested in. In the below example we want to calculate the betweenness centrality of nodes and, therefore, we need to first activate the nodes.\nSo, the net object now has a bc column in the node attributes\n\nnet = net %>%\n  activate(\"nodes\") %>%\n  mutate(bc = centrality_betweenness()) %>% \n  print() # print() is equal to just run the object, in this case net.\n\n# A sfnetwork with 701 nodes and 851 edges\n#\n# CRS:  EPSG:4326 \n#\n# A directed multigraph with 14 components with spatially explicit edges\n#\n# Node Data:     701 x 2 (active)\n# Geometry type: POINT\n# Dimension:     XY\n# Bounding box:  xmin: 7.522622 ymin: 51.94151 xmax: 7.546705 ymax: 51.9612\n             geometry     bc\n          <POINT [°]>  <dbl>\n1 (7.533722 51.95556) 12936.\n2 (7.533461 51.95576) 11824 \n3 (7.532442 51.95422) 11926.\n4  (7.53209 51.95328)  7259.\n5 (7.532709 51.95209)  5668 \n6 (7.532869 51.95257)  2374 \n# ... with 695 more rows\n#\n# Edge Data:     851 x 5\n# Geometry type: LINESTRING\n# Dimension:     XY\n# Bounding box:  xmin: 7.522594 ymin: 51.94151 xmax: 7.546705 ymax: 51.9612\n   from    to name                  type                                geometry\n  <int> <int> <chr>                 <fct>                       <LINESTRING [°]>\n1     1     2 Havixbecker Strasse   residential (7.533722 51.95556, 7.533461 51~\n2     3     4 Pienersallee          secondary   (7.532442 51.95422, 7.53236 51.~\n3     5     6 Schulte-Bernd-Strasse residential (7.532709 51.95209, 7.532823 51~\n# ... with 848 more rows\n\n\nWe can now create a map of this spatial network, the size and the colour of its nodes are based on their betweenness centrality.\n\nggplot() +\n  geom_sf(data = st_as_sf(net, \"edges\"), col = \"grey50\") +            \n  geom_sf(data = st_as_sf(net, \"nodes\"), aes(col = bc), size = 1.5) + \n  ggtitle(\"Betweenness centrality in Münster Roxel\")\n\n\n\n\nTo better understand the structure of the above ggplot() look up geom_sf() and st_as_sf. If you only run net and st_as_sf(net, \"edges\") you can see what was the type of net originally and what it was transformed to with the st_as_sf.\n\n\n\nQuestion: Can you interpret betweenness centrality in this context?\n\n\n\nIf we want to get rid of geometries, all we need to do is to remove the geometry. As per base R, setting something equal to NULL means that we remove it.\n\nnet %>%\n  activate(\"edges\") %>%\n  st_set_geometry(NULL) %>%\n  plot(draw_lines = T, main = \"Edges without geometries\")\n\n\n\nnet %>%\n  activate(\"nodes\") %>%\n  st_set_geometry(NULL) %>%\n  plot(vertex.color = \"black\", main = \"Nodes without geometries\")"
  },
  {
    "objectID": "src/street_networks.html#a-real-world-example-from-open-street-map",
    "href": "src/street_networks.html#a-real-world-example-from-open-street-map",
    "title": "Street network analysis practical: networks within cities",
    "section": "A real world example from Open Street Map",
    "text": "A real world example from Open Street Map\nLet’s now try to use some real-world data from OSM. The below code extracts the Bristol street data from the OSM API.\nTo understand the key and value options, go to OSM’s wiki page.\nKeep an eye on the below. Depending on your internet connections and the OSM’s API response time, it might take a couple of minutes. If you get an error message from running the opq() try again, it might work the second time as something might have gone wrong the first one. This is not uncommon when we extract data over the internet through an API. Usually such API requests are wrapped up in a if_else() function to re-try if the first attempt was unsuccessful.\n\nbristol_data <- opq(bbox = 'Bristol') %>%\n  add_osm_feature(\n    key = 'highway', \n    value = c(\"motorway\", \"trunk\", \"primary\", \"secondary\", \"tertiary\", \"residential\", \"unclassified\", \"motorway_link\", \"trunk_link\", \"primary_link\", \"secondary_link\",\"tertiary_link\", \"residential_link\")\n) %>% \n  osmdata_sf(quiet = FALSE)\n\nIssuing query to Overpass API ...\n\n\nAnnounced endpoint: none\n\n\nQuery complete!\n\n\nconverting OSM data to sf format\n\n# extract the roads\nbristol_roads <- st_geometry(bristol_data$osm_lines)\n  \n# build the sfnetwork object\nbristol_sfn <- as_sfnetwork(bristol_roads, directed = FALSE, length_as_weight = TRUE)\n\nggplot() +\n  geom_sf(data = st_as_sf(bristol_sfn, \"edges\"), col = \"grey50\") +\n  geom_sf(data = st_as_sf(bristol_sfn, \"nodes\"), size = .01)\n\n\n\n\nNetwork data wrangling. We need to:\n\nRemove multiple edges and loops. AKA simplifying the networks.\n\n\n\nRemove nodes that are interior points in a line and define the shape of the line. AKA smoothing the network.\n\nTo keep track of the changes, let’s keep a note of the original network size.\n\n# size of original network\ngsize(bristol_sfn)  # number of edges\n\n[1] 15104\n\ngorder(bristol_sfn) # number of nodes\n\n[1] 20915\n\n\nNow we can simplify the network.\n\nbristol_wrangled <- bristol_sfn %>%\n  activate(\"edges\") %>%\n  filter(!edge_is_multiple()) %>%   # Simplify the network\n  filter(!edge_is_loop())           # Simplify the network \n\n# size of simplified network\ngsize(bristol_wrangled)  # number of edges\n\n[1] 14904\n\ngorder(bristol_wrangled) # number of nodes\n\n[1] 20915\n\n\n\nRemove the interior points…\n\nbristol_wrangled <- convert(bristol_wrangled, to_spatial_smooth)\n\n# size of simplified network\ngsize(bristol_wrangled)  # number of edges\n\n[1] 11747\n\ngorder(bristol_wrangled) # number of nodes\n\n[1] 17758\n\n\n… and plot the network again.\n\nggplot() +\n  geom_sf(data = st_as_sf(bristol_wrangled, \"edges\"), col = \"grey50\") +\n  geom_sf(data = st_as_sf(bristol_wrangled, \"nodes\"), size = .01)"
  },
  {
    "objectID": "src/street_networks.html#network-measures",
    "href": "src/street_networks.html#network-measures",
    "title": "Street network analysis practical: networks within cities",
    "section": "Network measures",
    "text": "Network measures\nNow we can calculate betweenness centrality for Bristol, using the OSM street network we acquired.\n\nbristol_wrangled <- bristol_wrangled %>%\n  activate(\"nodes\") %>%\n  mutate(bc = centrality_betweenness())\n\nWarning in betweenness(graph = graph, v = V(graph), directed = directed, :\n'nobigint' is deprecated since igraph 1.3 and will be removed in igraph 1.4\n\nggplot() +\n  geom_sf(data = st_as_sf(bristol_wrangled, \"edges\"), col = \"grey50\") +\n  geom_sf(data = st_as_sf(bristol_wrangled, \"nodes\"), aes(col = bc,   \n                                                          alpha = bc), # Increase opacity based on betweenness...\n          size = 1) + \n  guides(alpha=FALSE) +                                                # ...but exclude this from the legend. Remove this line to see what will happen\n  ggtitle(\"Betweenness centrality in Bristol\")\n\nWarning: `guides(<scale> = FALSE)` is deprecated. Please use `guides(<scale> =\n\"none\")` instead.\n\n\n\n\n\n\n\n\nQuestion: How can we interpret this map?\n\n\n\nRemember the community detections algorithms? We can detect such communities within the street network. These are neighbourhoods of streets which are better connected internally than externally with the whole network. There is a contradiction here, no? Community detection is about nodes, not edges? However, here we are interested in clustering edges. So, we wiil do a trick. We first ‘inverse’ our spatial network, which means that the nodes become edges and vice versa. We do this with morph(to_linegraph). Read the Wikipedia entry of line graps and see teh below image for an example. The unmorgh() brings the changes – that is the new group column back to the original network, that we now call grouped_net. For more details, have a look here.\n\nSource: mathworld.wolfram.com\n\ngrouped_net = bristol_wrangled %>%\n  morph(to_linegraph) %>%\n  mutate(group = group_louvain()) %>%\n  unmorph()\n\n# A new group column has been added with the community membership\ngrouped_net\n\n# A sfnetwork with 17758 nodes and 11747 edges\n#\n# CRS:  EPSG:4326 \n#\n# An undirected multigraph with 6657 components with spatially explicit edges\n#\n# Node Data:     17,758 x 2 (active)\n# Geometry type: POINT\n# Dimension:     XY\n# Bounding box:  xmin: -2.748173 ymin: 51.38876 xmax: -2.460661 ymax: 51.56766\n                     x     bc\n           <POINT [°]>  <dbl>\n1  (-2.460661 51.5015)     0 \n2 (-2.521586 51.51787) 10561.\n3 (-2.546315 51.54446)     0 \n4 (-2.552245 51.40075)  6653 \n5 (-2.516866 51.51245)  5452.\n6 (-2.518981 51.51272) 31706.\n# ... with 17,752 more rows\n#\n# Edge Data:     11,747 x 5\n# Geometry type: LINESTRING\n# Dimension:     XY\n# Bounding box:  xmin: -2.748173 ymin: 51.38876 xmax: -2.460661 ymax: 51.56766\n   from    to weight                                                     x group\n  <int> <int>  <dbl>                                      <LINESTRING [°]> <int>\n1     6     7 219.   (-2.518981 51.51272, -2.518938 51.51293, -2.518937 5~    28\n2     8     9 980.   (-2.523849 51.52109, -2.522684 51.5198, -2.521651 51~    28\n3    18    19   5.23              (-2.528247 51.50576, -2.528179 51.50578)    28\n# ... with 11,744 more rows\n\n# There are quite a few communities overall\ngrouped_net %>%\n  activate(\"edges\") %>%\n  pull(group) %>%\n  unique() %>%\n  length()\n\n[1] 6699\n\ngrouped_net %>%\n  activate(\"edges\") %>%\n  st_as_sf() %>%                                     # If you remember, we used this above.\n  transmute(group = as.factor(group)) %>%            # We turn community membership to a factor.\n  filter(group %in% c(1:15)) %>%                     # Only plotting the first 15 communities.\n  ggplot() +\n  geom_sf(aes(col = group), lwd = 4) +               # This plots the communities ...\n  geom_sf(data = st_as_sf(bristol_wrangled, \"edges\"),# ... and this all the network.\n          col = \"grey\", lwd = 0.5, alpha = 0.4) +\n  theme(legend.position=\"none\") +\n  ggtitle(\"Bristol's street communities\")            # No legend please.\n\n\n\n\n\n\n\nTask: Read the routing vigneette of `sfnetworks and apply these techniques in the Bristol street network."
  },
  {
    "objectID": "assignments/project.html",
    "href": "assignments/project.html",
    "title": "Urban analytics and city science",
    "section": "",
    "text": "You need to identify and analyse a spatial network you are interested in. This involves:\n\nSelecting a spatial network, which is of interest for you; finding, using and analysing relevant network data – more on this below.\nSetting up research questions. You will need to set up clear research questions that your analysis will answer. Although I don’t expect a full literature review section in your report, you need to link these research questions to some previous literature.\nAnalysing your network. You will need to employ relevant methods and tools that we discussed during the course (from data acquisition to network analysis and from diversity measures to spatial interaction models) to answer your research questions. The methods you will use should be appropriate for the research questions you need to answer. I will encourage you (and give extra points) if you utilise relevant methods beyond those discussed during the classes. Your methodological choices should be justified in the text.\nWriting up the report, which needs to be adequately structured (i.e. introduce the problem, link it to some previous literature, describe the methods and the data, present and discuss the results, indicate some key outcomes). The report should be written as an RMarkdown document and knitted as an .html document that allows the reader to see both the text, the code you will develop and the output of this code. Your report should include tables and figures where appropriate – these form an important element of the assessment. Be critical to what outputs will be included in the report. The report needs to be appropriately referenced.\n\n\n\n\nIn order to address the different interests the cohort might have, the data choice is up to you. I offer below a few ideas, but if you want to analyse other data, please get in touch with me directly to discuss. You will need to do this early on during the term, so please start thinking about the report early.\n\nUS internal migration flows. You can use data from the American Community Survey (ACS). There are quite a few R packages, which enable you to directly access these data through an API.\nAfrica migration flows from WorldPop.\nData for Good by Facebook. There are quite a few interesting datasets there. Some of them are ready to download, some require an application. If you are interested in the latter, apply sooner than later.\nInternet submarine cables\nNYC Taxi trips\nFlight data\n\n\n\n\nThe report should be 3,500 long excluding references and code. It is worth 100% of the unit’s mark and on top of the programme marking criteria, I will also consider:\n\nThe reproducibility of the analysis.\nThe quality of visualisations and tables and the appearance of the knitted .html document.\nThe relevance and the novelty of setting up specific research questions.\nThe use of relevant tools beyond the ones directly demonstrated during this unit.\nThe robustness of the analysis and modelling.\nThe complexity of the data that you will use."
  },
  {
    "objectID": "src/transport_geography.html#transport-geography-quantitative-dimension",
    "href": "src/transport_geography.html#transport-geography-quantitative-dimension",
    "title": "Methods in transport geography",
    "section": "Transport geography: quantitative dimension",
    "text": "Transport geography: quantitative dimension\n\nEmpirical data\nData analytics\nApplied science: improve the efficiency of movements / spatial constraints\nWhy in this unit?"
  },
  {
    "objectID": "src/transport_geography.html#transport-geography-key-elements",
    "href": "src/transport_geography.html#transport-geography-key-elements",
    "title": "Methods in transport geography",
    "section": "Transport geography: key elements",
    "text": "Transport geography: key elements\n\nDistance\nAccessibility: the capacity of a location to be reached by, or to reach different locations\nSpatial interaction: movement of people, freight or information between an origin and destination\nTransportation and land use models"
  },
  {
    "objectID": "src/transport_geography.html#graph-theory-aka-network-analysis",
    "href": "src/transport_geography.html#graph-theory-aka-network-analysis",
    "title": "Methods in transport geography",
    "section": "Graph theory, aka network analysis",
    "text": "Graph theory, aka network analysis\n\n\n\n\nAbstraction\nRepresent the structure not the appearance\nTerminal = node\nNode (vertex)\nLink (edge)\nSub-graph - Loop (buckle)\nPlanar graph\nNon-planar graph\nCycle, circuit\nTree \\((e = v-1)\\)\n\n\n\n  Source: Rodrigue (2020)"
  },
  {
    "objectID": "src/transport_geography.html#graph-theory-aka-network-analysis-1",
    "href": "src/transport_geography.html#graph-theory-aka-network-analysis-1",
    "title": "Methods in transport geography",
    "section": "Graph theory, aka network analysis",
    "text": "Graph theory, aka network analysis\n\n\\(\\beta = e / v\\), where \\(e\\) is the number of links & \\(v\\) the number of nodes\n\\(Gamma\\) AKA network density (number of liks / maximum number of links)\n\nplanar: \\(\\gamma = \\frac{e}{3(v-2)}\\)\nnon-planar: \\(\\gamma = \\frac{2e}{v(v-1)}\\)"
  },
  {
    "objectID": "src/transport_geography.html#graph-theory-aka-network-analysis-2",
    "href": "src/transport_geography.html#graph-theory-aka-network-analysis-2",
    "title": "Methods in transport geography",
    "section": "Graph theory, aka network analysis",
    "text": "Graph theory, aka network analysis\n\nDegree centrality\nEccentricity: the distance from a given node to the farthest node from it in the network\nShimbel index, or nodal accessibility, or Fareness (see Lecture 3\n\n\\(c_𝑖= \\sum_j d_{ij}\\)\nThis is a purely topological accessibility metric, remember this for later."
  },
  {
    "objectID": "src/transport_geography.html#closeness-centrality-from-lecture-3",
    "href": "src/transport_geography.html#closeness-centrality-from-lecture-3",
    "title": "Methods in transport geography",
    "section": "Closeness centrality (from Lecture 3)",
    "text": "Closeness centrality (from Lecture 3)\n\nWhich node has the shortest distance to other nodes\nInstead of focusing on the number of links, the focus turns to the network distances\nDifferent definitions:\nCloseness, \\(c_{i} = 1/\\sum_{j} d_{ij}\\)\nFareness, \\(c_{i} = \\sum_{j} d_{ij}\\)\nigraph calculates closeness"
  },
  {
    "objectID": "src/transport_geography.html#the-gini-coefficient",
    "href": "src/transport_geography.html#the-gini-coefficient",
    "title": "Methods in transport geography",
    "section": "The Gini coefficient",
    "text": "The Gini coefficient\n\n\n\nInequality measure\n\n0: perfect equality\n1 :perfect inequality\n\nOrdered X and Y, cumulative percentage\nMostly used for income inequalities, but can be more widely used\n\\(Gini = A / (A + B)\\)\n\n\n\n Source: Rodrigue (2020)"
  },
  {
    "objectID": "src/transport_geography.html#section",
    "href": "src/transport_geography.html#section",
    "title": "Methods in transport geography",
    "section": "",
    "text": "Source: Rodrigue (2020)"
  },
  {
    "objectID": "src/transport_geography.html#section-1",
    "href": "src/transport_geography.html#section-1",
    "title": "Methods in transport geography",
    "section": "",
    "text": "Source: Rodrigue (2020)"
  },
  {
    "objectID": "src/transport_geography.html#the-location-quotient-coefficient",
    "href": "src/transport_geography.html#the-location-quotient-coefficient",
    "title": "Methods in transport geography",
    "section": "The Location Quotient Coefficient",
    "text": "The Location Quotient Coefficient\n\nDegree of concentration of a certain activities\nVery common for regional analysis too\n\\(M_{ti}\\) is the traffic of a merchandise \\(t\\) at a terminal \\(i\\)\n\\(Mi\\) is the traffic of all merchandise at a terminal \\(i\\)\n\\(M_{t}\\) is the total of all merchandises of type \\(t\\) for all terminals, and\n\\(M\\) is the total of all types of merchandises for all terminals"
  },
  {
    "objectID": "src/transport_geography.html#the-location-quotient-coefficient-1",
    "href": "src/transport_geography.html#the-location-quotient-coefficient-1",
    "title": "Methods in transport geography",
    "section": "The Location Quotient Coefficient",
    "text": "The Location Quotient Coefficient\n\n\n  \n\\(LQ = \\frac{\\frac{M_{it}}{M_i}}{\\frac{M_t}{M}}\\)\n\n\n\\(LQ <1\\): traffic of merchandise \\(t\\) in terminal \\(i\\) is under-represented compared to the same merchandise in all terminals\n\\(LQ = 1\\) traffic of merchandise \\(t\\) in terminal \\(i\\) is proportional to its participation to total traffic\n\\(LQ > 1\\) traffic of merchandise \\(t\\) in a terminal \\(i\\) is preponderant in total traffic."
  },
  {
    "objectID": "src/transport_geography.html#section-2",
    "href": "src/transport_geography.html#section-2",
    "title": "Methods in transport geography",
    "section": "",
    "text": "Employment in manufacturing sector\n Source: ONS"
  },
  {
    "objectID": "src/transport_geography.html#spatial-interactions-and-the-gravity-model",
    "href": "src/transport_geography.html#spatial-interactions-and-the-gravity-model",
    "title": "Methods in transport geography",
    "section": "Spatial interactions and the gravity model",
    "text": "Spatial interactions and the gravity model\n\nA spatial interaction is a realised movement of people, freight or information between an origin and a destination\nIt is a transport demand/supply relationship expressed over geographical space."
  },
  {
    "objectID": "src/transport_geography.html#section-3",
    "href": "src/transport_geography.html#section-3",
    "title": "Methods in transport geography",
    "section": "",
    "text": "Source: Rodrigue (2020)"
  },
  {
    "objectID": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-1",
    "href": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-1",
    "title": "Methods in transport geography",
    "section": "Spatial interactions and the gravity model",
    "text": "Spatial interactions and the gravity model\nConditions for spatial interaction to be materialised\n\nComplementarity\nIntervening opportunity\nTransferability"
  },
  {
    "objectID": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-2",
    "href": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-2",
    "title": "Methods in transport geography",
    "section": "Spatial interactions and the gravity model",
    "text": "Spatial interactions and the gravity model\n\nOrigin/destination matrices\nVery large matrices\nMissing data/0s\nEstimation of flows"
  },
  {
    "objectID": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-3",
    "href": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-3",
    "title": "Methods in transport geography",
    "section": "Spatial interactions and the gravity model",
    "text": "Spatial interactions and the gravity model\n\\(T_{ij} = f(V_i, W_j, S_{ij})\\)\n\nFlows are a function of the attributes of the locations of origin, the attributes of the locations of destination and the friction of distance between the concerned origins and the destinations"
  },
  {
    "objectID": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-4",
    "href": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-4",
    "title": "Methods in transport geography",
    "section": "Spatial interactions and the gravity model",
    "text": "Spatial interactions and the gravity model\n\\(T_{ij} = f(V_i, W_j, S_{ij})\\)\n\n\\(T_{ij}\\): Interaction between location \\(i\\) (origin) and location \\(j\\) (destination)\n\\(V_i\\): Attributes of the location of origin \\(i\\) (e.g. population, number of jobs available, industrial output, GDP); push factors; the potential of origins"
  },
  {
    "objectID": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-5",
    "href": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-5",
    "title": "Methods in transport geography",
    "section": "Spatial interactions and the gravity model",
    "text": "Spatial interactions and the gravity model\n\\(T_{ij} = f(V_i, W_j, S_{ij})\\)\n\n\\(W_j\\): Attributes of the location of destination \\(j\\), pull factors; attractiveness of destinations\n\\(S_{ij}\\): Attributes of separation between \\(i\\) and \\(j\\) (e.g. distance, transport costs, or travel time); cost of overcoming the separation between origins and destinations"
  },
  {
    "objectID": "src/transport_geography.html#calculate-flows-naive",
    "href": "src/transport_geography.html#calculate-flows-naive",
    "title": "Methods in transport geography",
    "section": "1. Calculate flows (naive)",
    "text": "1. Calculate flows (naive)\n\\(T_{ij} = k\\frac{V_i^\\lambda W_j^\\alpha}{d_{ij}^\\beta}\\)\n\nKnown: \\(V\\), \\(W\\), and \\(d\\)\nDefine: \\(\\lambda=1\\), \\(\\alpha=1\\), \\(\\beta=2\\), and \\(k=0.00001\\)\nThese are some standard results from past empirical studies\nBig unknown: \\(T\\)\nExample from Tranos, Gheasi, and Nijkamp (2015)"
  },
  {
    "objectID": "src/transport_geography.html#calculate-flows-naive-1",
    "href": "src/transport_geography.html#calculate-flows-naive-1",
    "title": "Methods in transport geography",
    "section": "1. Calculate flows (naive)",
    "text": "1. Calculate flows (naive)"
  },
  {
    "objectID": "src/transport_geography.html#calculate-flows-naive-2",
    "href": "src/transport_geography.html#calculate-flows-naive-2",
    "title": "Methods in transport geography",
    "section": "1. Calculate flows (naive)",
    "text": "1. Calculate flows (naive)\n\nFairly good estimation of reality for such an oversimplified model, but…\n… not good enough."
  },
  {
    "objectID": "src/transport_geography.html#estimate-lambda-alpha-beta-and-k",
    "href": "src/transport_geography.html#estimate-lambda-alpha-beta-and-k",
    "title": "Methods in transport geography",
    "section": "2. Estimate \\(\\lambda\\), \\(\\alpha\\), \\(\\beta\\) and \\(k\\)",
    "text": "2. Estimate \\(\\lambda\\), \\(\\alpha\\), \\(\\beta\\) and \\(k\\)\n\nKnown: \\(T\\), \\(V\\), \\(W\\), \\(d\\) and \\(k\\)\nEstiamte: \\(\\lambda=1\\), \\(\\alpha=1\\), and \\(\\beta=2\\)\nWhy? To understand the effect of distance, pull and push factors\nHow? Regression"
  },
  {
    "objectID": "src/transport_geography.html#estimate-lambda-alpha-beta-and-k-1",
    "href": "src/transport_geography.html#estimate-lambda-alpha-beta-and-k-1",
    "title": "Methods in transport geography",
    "section": "2. Estimate \\(\\lambda\\), \\(\\alpha\\), \\(\\beta\\) and \\(k\\)",
    "text": "2. Estimate \\(\\lambda\\), \\(\\alpha\\), \\(\\beta\\) and \\(k\\)\n\n\n\\(T_{ij} = k\\frac{V_i^\\lambda W_j^\\alpha}{d_{ij}^\\beta}\\)\nLook up properties of logarithms, e.g. here\n\\(T_{ij} = kV_i^\\lambda W_j^\\alpha d_{ij}^{-\\beta}\\)\n\\(ln T_{ij} = ln (kV_i^\\lambda W_j^\\alpha d_{ij}^{-\\beta})\\)\n\\(ln T_{ij} = lnk + lnV_i^\\lambda + ln W_j^\\alpha + lnd_{ij}^{-\\beta}\\)\n\\(\\color{red}{ln T_{ij}} = \\color{blue}{lnk} + \\lambda \\color{green}{lnV_i} + \\alpha \\color{orange}{ln W_j} -\\beta \\color{purple}{lnd_{ij}}\\)\n\\(\\color{red}{y} = \\color{blue}{c} + \\lambda \\color{green}{x_1} + \\alpha \\color{orange}{x_2} + \\beta \\color{purple}{x_3}\\)\nMultivariate linear regression"
  },
  {
    "objectID": "src/transport_geography.html#estimate-lambda-alpha-beta-and-k-2",
    "href": "src/transport_geography.html#estimate-lambda-alpha-beta-and-k-2",
    "title": "Methods in transport geography",
    "section": "2. Estimate \\(\\lambda\\), \\(\\alpha\\), \\(\\beta\\) and \\(k\\)",
    "text": "2. Estimate \\(\\lambda\\), \\(\\alpha\\), \\(\\beta\\) and \\(k\\)"
  },
  {
    "objectID": "src/transport_geography.html#estimate-lambda-alpha-beta-and-k-3",
    "href": "src/transport_geography.html#estimate-lambda-alpha-beta-and-k-3",
    "title": "Methods in transport geography",
    "section": "2. Estimate \\(\\lambda\\), \\(\\alpha\\), \\(\\beta\\) and \\(k\\)",
    "text": "2. Estimate \\(\\lambda\\), \\(\\alpha\\), \\(\\beta\\) and \\(k\\)\n\n\\(c = lnk = 13.84\\)\n\\(\\lambda = lnV_i = 0.727\\)\n\\(\\alpha = lnW_j = 0.464\\)\n\\(\\beta = lnd_{ij} = -0.624\\)\nWhat did we learn?\nHow can we use these coefficients"
  },
  {
    "objectID": "src/transport_geography.html#estimate-accessibility-indicators",
    "href": "src/transport_geography.html#estimate-accessibility-indicators",
    "title": "Methods in transport geography",
    "section": "3. Estimate accessibility indicators",
    "text": "3. Estimate accessibility indicators\n\nThe potential of opportunities for interaction\nEase of spatial interaction\nAttractiveness of a node in a network taking into account the mass of other nodes and the costs to reach those nodes via the network"
  },
  {
    "objectID": "src/transport_geography.html#estimate-accessibility-indicators-1",
    "href": "src/transport_geography.html#estimate-accessibility-indicators-1",
    "title": "Methods in transport geography",
    "section": "3. Estimate accessibility indicators",
    "text": "3. Estimate accessibility indicators\nDifferent typologies (Holl 2007)\n\nNetwork access\n\ndistance to access the network\ntravel opportunities\n\nTravel cost measures\n\nnetwork access + distance/time travelled on the network\n\nMarket potential accessibility\n\ndestinations at greater distance provide diminishing opportunities"
  },
  {
    "objectID": "src/transport_geography.html#estimate-accessibility-indicators-2",
    "href": "src/transport_geography.html#estimate-accessibility-indicators-2",
    "title": "Methods in transport geography",
    "section": "3. Estimate accessibility indicators",
    "text": "3. Estimate accessibility indicators\n\n\\(Acc_{i} = \\sum_j \\frac{W_j}{d_{ij}^2}\\)\n\n\n\n\n\n\n\n\n\n\n\n\n\nSource:Rodrigue (2020)"
  },
  {
    "objectID": "src/transport_geography.html#estimate-accessibility-indicators-3",
    "href": "src/transport_geography.html#estimate-accessibility-indicators-3",
    "title": "Methods in transport geography",
    "section": "3. Estimate accessibility indicators",
    "text": "3. Estimate accessibility indicators\n\nGeographical indicator\nSpatial structure (e.g. distance) and economic activities (e.g. population)\nThe potential for interaction\nOpportunities"
  },
  {
    "objectID": "src/transport_geography.html#references",
    "href": "src/transport_geography.html#references",
    "title": "Methods in transport geography",
    "section": "References",
    "text": "References\n\n\n\n\n\n\nBruinsma, Frank, and Pieter Rietveld. 1998. “The Accessibility of European Cities: Theoretical Framework and Comparison of Approaches.” Environment and Planning A 30 (3): 499–521.\n\n\nHoll, Adelheid. 2007. “Twenty Years of Accessibility Improvements. The Case of the Spanish Motorway Building Programme.” Journal of Transport Geography 15 (4): 286–97. https://doi.org/https://doi.org/10.1016/j.jtrangeo.2006.09.003.\n\n\nRodrigue, Jean-Paul. 2020. The Geography of Transport Systems. Routledge. https://transportgeography.org/.\n\n\nTranos, Emmanouil, Masood Gheasi, and Peter Nijkamp. 2015. “International Migration: A Global Complex Network.” Environment and Planning B: Planning and Design 42 (1): 4–22."
  },
  {
    "objectID": "src/accessibility_full.html",
    "href": "src/accessibility_full.html",
    "title": "Accessibility in practice",
    "section": "",
    "text": "To run this pratical you need to have an RStudio project as discussed in the previous practical.\n\nlibrary(tidyverse)\nlibrary(accessibility)\nlibrary(sf)\nlibrary(kableExtra)\nlibrary(rprojroot)\nlibrary(osrm)\n\npath <- find_rstudio_root_file()\n\n# This is the project path\nknitr::opts_chunk$set(include=TRUE, message=FALSE, warning=FALSE)"
  },
  {
    "objectID": "src/accessibility_full.html#aims-of-the-practical",
    "href": "src/accessibility_full.html#aims-of-the-practical",
    "title": "Accessibility in practice",
    "section": "Aims of the practical",
    "text": "Aims of the practical\nThe aim of this practical is to calculate different accessibility indicators. For a brief overview about accessibility, please have a look at (Rodrigue 2020) (for example here ). For in depth reviews have a look at Holl (2007), El-Geneidy and Levinson (2022) and Shi et al. (2020) as well as at some older and well-cited papers such as Geurs and Van Wee (2004) and Bruinsma and Rietveld (1998). The below typology of accessibility concepts is from Holl (2007).\n\nNetwork access\n\ndistance to access the network\ntravel opportunities\n\nTravel cost measures\n\nnetwork access + distance/time travelled on the network\n\nMarket potential accessibility\n\ndestinations at greater distance provide diminishing opportunities\n\\(Acc_i = \\sum_j\\frac{W_j} {c_{ij}^a}\\)\n\n\nAmong other R packages, the practical is based on the accessibility package. Some of the below materials are based on the package’s vignette.\nLet’s start with using the toy data that comes with the accessibility package. As you can see below, the data comes in R’s native data format called .Rds and, therefore, we use the relevant function to read it – readRDS().\nThe first data object we are using is the travel time matrix between all potential origins and destinations in city of Belo Horizonte, Brazil. As you can see, the matrix is stored in a long format and not as an \\(n*n\\) matrix. If you check the dimension of that object you will understand what I mean (dim(travel_matrix)).\n\ndata_dir <- system.file(\"extdata\", package = \"accessibility\")\n\ntravel_matrix <- readRDS(file.path(data_dir, \"travel_matrix.rds\")) \n\nhead(travel_matrix)\n\n           from_id           to_id travel_time\n1: 89a88cdb57bffff 89a88cdb57bffff         5.8\n2: 89a88cdb57bffff 89a88cdb597ffff        47.0\n3: 89a88cdb57bffff 89a88cdb5b3ffff        48.0\n4: 89a88cdb57bffff 89a88cdb5cfffff        47.0\n5: 89a88cdb57bffff 89a88cd909bffff        64.0\n6: 89a88cdb57bffff 89a88cd90b7ffff        59.0\n\n\nThen, we are loading the characteristics of each location. As you can see, the id records match with the from_id and to_id from the travel_matrix.\n\nland_use_data <- readRDS(file.path(data_dir, \"land_use_data.rds\"))\nhead(land_use_data)\n\n                id population jobs schools\n1: 89a88cdb57bffff        606   82       0\n2: 89a88cdb597ffff        734  308       2\n3: 89a88cdb5b3ffff       1670  100       0\n4: 89a88cdb5cfffff       1864  109       0\n5: 89a88cd909bffff         29    0       0\n6: 89a88cd90b7ffff       1117  480       0\n\n\nThe first accessibility function we are using is cost_to_closest(). As per its name, it calculates the minimum travel cost to the closest n number of opportunities. In our example, as travel cost we understand the travel time between origins and destinations included in the column travel_time from the travel_matrix object. We are only interested in the closest (n=1) opportunity, which in this example is a school.\n\nmtc <- cost_to_closest(\n  travel_matrix,\n  land_use_data,\n  opportunity = \"schools\",\n  travel_cost = \"travel_time\",\n  n = 1\n)\n\nhead(mtc)\n\n                id travel_time\n1: 89a881a5a2bffff          29\n2: 89a881a5a2fffff          24\n3: 89a881a5a67ffff          28\n4: 89a881a5a6bffff          33\n5: 89a881a5a6fffff          32\n6: 89a881a5b03ffff          17\n\n\nThe next measure is the total number of opportunities (in other words, the cumulative opportunities) within a cut-off of the travel cost. So, the below provides the number of jobs accessible within 30 minutes of travel time.\n\ncum_cutoff <- cumulative_cutoff(\n  travel_matrix,\n  land_use_data,\n  opportunity = \"jobs\",\n  travel_cost = \"travel_time\",\n  cutoff = 30\n)\n\nhead(cum_cutoff)\n\n                id  jobs\n1: 89a88cdb57bffff 22239\n2: 89a88cdb597ffff 36567\n3: 89a88cdb5b3ffff 42372\n4: 89a88cdb5cfffff 55571\n5: 89a88cd909bffff 26774\n6: 89a88cd90b7ffff 36991\n\n\nIf the above was a form of active accessibility – that is how many opportunities one can access from their location – the below offers a passive form of accessibility – that is how many individuals can be reached from each destination within a cuttof. The latter is based on travel_time in the below.\n\npassive_cum_cutoff <- cumulative_cutoff(\n  travel_matrix,\n  land_use_data,\n  opportunity = \"population\",\n  travel_cost = \"travel_time\",\n  cutoff = 30,\n  active = FALSE\n)\n\nhead(passive_cum_cutoff)\n\n                id population\n1: 89a88cdb57bffff      62591\n2: 89a88cdb19bffff     180316\n3: 89a88cdb1d3ffff     185293\n4: 89a88cdb56fffff     162202\n5: 89a88cdb0afffff     243124\n6: 89a88cdb50fffff     107605\n\n\nLast, but not least we can calculate the gravity-based accessibility indicators, or, in other words, potential accessibility indicators. This is the same measure as the example we discussed during the class. The intuition is that the furthest away each opportunity is, the less important it becomes. So, the accessibility of a location \\(i\\) is equal to the sum of all opportunities available divided – in other words discounted – by the distance or the cost to reach them. The negative_exp function can take different decay functions (see here). We know from previous studies that the exponential function represents better shorter interactions (e.g. within cities) while the power function works better for longer distance interactions (e.g. migrations flows) Oshan (2021).\n\\(Acc_{i} = \\sum_j \\frac{W_j}{d_{ij}^2}\\)\n\nnegative_exp <- gravity(\n  travel_matrix,\n  land_use_data,\n  opportunity = \"schools\",\n  travel_cost = \"travel_time\",\n  decay_function = decay_exponential(decay_value = 0.2)\n)\n\nhead(negative_exp)\n\n                id    schools\n1: 89a88cdb57bffff 0.03041853\n2: 89a88cdb597ffff 1.15549493\n3: 89a88cdb5b3ffff 0.56519126\n4: 89a88cdb5cfffff 0.19852152\n5: 89a88cd909bffff 0.41378042\n6: 89a88cd90b7ffff 0.95737555\n\n\nAnd now we can plot these metrics. The grid object is a toy spatial dataset of the places we calculate the above accessibility indicators. We first load these spatial data, merge them with the acessibility indicator we want to plot and then we plot these data.\n\ngrid <- system.file(\"extdata/grid_bho.rds\", package = \"accessibility\")\ngrid <- readRDS(grid)\n\nspatial_data <- merge(grid, cum_cutoff, by = \"id\")\n\nggplot() +\n  geom_sf(data = spatial_data, aes(fill = jobs), color = NA) +\n  labs(\n    title = \"Job accessibility by transit in under 30 min.\",\n    fill = \"Accessible jobs\"\n  ) +\n  scale_fill_viridis_c() +\n  theme_void()"
  },
  {
    "objectID": "src/accessibility_full.html#london-example",
    "href": "src/accessibility_full.html#london-example",
    "title": "Accessibility in practice",
    "section": "London example",
    "text": "London example\nAll the above were based on the data that came together with the accessibility package. Let’s repeat this exercise using some real world data from data.london.gov.uk. Jobs and population per Local Authority represent the opportunities.\n\njobs <- read_csv(\"https://data.london.gov.uk/download/jobs-and-job-density-borough/79e85749-e38d-4bb6-8327-c60c6be27222/Jobs_and_Job_Density.csv\") %>% \n  filter(year == 2020) %>%  # I am only using 2020 data. Remove this line \n                            # to see what will happen to the data.\n  glimpse()\n\nRows: 49\nColumns: 5\n$ code           <chr> \"E09000001\", \"E09000002\", \"E09000003\", \"E09000004\", \"E0…\n$ area           <chr> \"City of London\", \"Barking and Dagenham\", \"Barnet\", \"Be…\n$ year           <dbl> 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2…\n$ number_of_jobs <dbl> 630000, 71000, 164000, 85000, 149000, 129000, 389000, 1…\n$ job_density    <dbl> 83.71, 0.52, 0.64, 0.54, 0.69, 0.62, 1.97, 0.58, 0.72, …\n\npop <- read_csv(\"https://data.london.gov.uk/download/land-area-and-population-density-ward-and-borough/77e9257d-ad9d-47aa-aeed-59a00741f301/housing-density-borough.csv\") %>% \n  filter(Year == 2020) %>% # This is a projection, but it will work for now\n  glimpse()\n\nRows: 36\nColumns: 10\n$ Code                            <chr> \"E09000001\", \"E09000002\", \"E09000003\",…\n$ Name                            <chr> \"City of London\", \"Barking and Dagenha…\n$ Year                            <dbl> 2020, 2020, 2020, 2020, 2020, 2020, 20…\n$ Source                          <chr> \"GLA Population Projections\", \"GLA Pop…\n$ Population                      <dbl> 8046, 218367, 407148, 254970, 343853, …\n$ `Inland_Area _Hectares`         <dbl> 290.4, 3610.8, 8674.8, 6058.1, 4323.3,…\n$ Total_Area_Hectares             <dbl> 314.9, 3779.9, 8674.8, 6428.6, 4323.3,…\n$ Population_per_hectare          <dbl> 27.7, 60.5, 46.9, 42.1, 79.5, 22.4, 11…\n$ Square_Kilometres               <dbl> 2.9, 36.1, 86.7, 60.6, 43.2, 150.1, 21…\n$ Population_per_square_kilometre <dbl> 2770.7, 6047.6, 4693.4, 4208.8, 7953.6…\n\n\nJobs and pop include observations for spatial units other than London’s 33 Local Authorities. Explore pop and jobs to see that. Therefore, we use the inner_join() function to join them. See here how it works. You should be able to understand the different functions to join data.\n\ndf <- inner_join(jobs, pop, by = c(\"code\" = \"Code\")) %>% \n  filter(area != \"London\") %>% \n  rename(id = code) \n\nTo produce a nicer looking table I am using here the kableExtra package. It just adds some nice styling for html outputs.\n\ndf %>% kbl() %>%\n  kable_styling(full_width = F) %>%   #Nice(r) table\n  scroll_box(width = \"900px\", height = \"400px\")\n\n\n\n \n  \n    id \n    area \n    year \n    number_of_jobs \n    job_density \n    Name \n    Year \n    Source \n    Population \n    Inland_Area _Hectares \n    Total_Area_Hectares \n    Population_per_hectare \n    Square_Kilometres \n    Population_per_square_kilometre \n  \n \n\n  \n    E09000001 \n    City of London \n    2020 \n    630000 \n    83.71 \n    City of London \n    2020 \n    GLA Population Projections \n    8046 \n    290.4 \n    314.9 \n    27.7 \n    2.9 \n    2770.7 \n  \n  \n    E09000002 \n    Barking and Dagenham \n    2020 \n    71000 \n    0.52 \n    Barking and Dagenham \n    2020 \n    GLA Population Projections \n    218367 \n    3610.8 \n    3779.9 \n    60.5 \n    36.1 \n    6047.6 \n  \n  \n    E09000003 \n    Barnet \n    2020 \n    164000 \n    0.64 \n    Barnet \n    2020 \n    GLA Population Projections \n    407148 \n    8674.8 \n    8674.8 \n    46.9 \n    86.7 \n    4693.4 \n  \n  \n    E09000004 \n    Bexley \n    2020 \n    85000 \n    0.54 \n    Bexley \n    2020 \n    GLA Population Projections \n    254970 \n    6058.1 \n    6428.6 \n    42.1 \n    60.6 \n    4208.8 \n  \n  \n    E09000005 \n    Brent \n    2020 \n    149000 \n    0.69 \n    Brent \n    2020 \n    GLA Population Projections \n    343853 \n    4323.3 \n    4323.3 \n    79.5 \n    43.2 \n    7953.6 \n  \n  \n    E09000006 \n    Bromley \n    2020 \n    129000 \n    0.62 \n    Bromley \n    2020 \n    GLA Population Projections \n    336395 \n    15013.5 \n    15013.5 \n    22.4 \n    150.1 \n    2240.6 \n  \n  \n    E09000007 \n    Camden \n    2020 \n    389000 \n    1.97 \n    Camden \n    2020 \n    GLA Population Projections \n    257384 \n    2178.9 \n    2178.9 \n    118.1 \n    21.8 \n    11812.4 \n  \n  \n    E09000008 \n    Croydon \n    2020 \n    143000 \n    0.58 \n    Croydon \n    2020 \n    GLA Population Projections \n    400272 \n    8650.4 \n    8650.4 \n    46.3 \n    86.5 \n    4627.2 \n  \n  \n    E09000009 \n    Ealing \n    2020 \n    159000 \n    0.72 \n    Ealing \n    2020 \n    GLA Population Projections \n    361833 \n    5554.4 \n    5554.4 \n    65.1 \n    55.5 \n    6514.3 \n  \n  \n    E09000010 \n    Enfield \n    2020 \n    126000 \n    0.59 \n    Enfield \n    2020 \n    GLA Population Projections \n    342993 \n    8083.2 \n    8220.1 \n    42.4 \n    80.8 \n    4243.3 \n  \n  \n    E09000011 \n    Greenwich \n    2020 \n    101000 \n    0.52 \n    Greenwich \n    2020 \n    GLA Population Projections \n    292466 \n    4733.4 \n    5043.9 \n    61.8 \n    47.3 \n    6178.8 \n  \n  \n    E09000012 \n    Hackney \n    2020 \n    152000 \n    0.76 \n    Hackney \n    2020 \n    GLA Population Projections \n    289488 \n    1904.9 \n    1904.9 \n    152.0 \n    19.0 \n    15197.0 \n  \n  \n    E09000013 \n    Hammersmith and Fulham \n    2020 \n    166000 \n    1.29 \n    Hammersmith and Fulham \n    2020 \n    GLA Population Projections \n    190721 \n    1639.7 \n    1715.4 \n    116.3 \n    16.4 \n    11631.1 \n  \n  \n    E09000014 \n    Haringey \n    2020 \n    94000 \n    0.51 \n    Haringey \n    2020 \n    GLA Population Projections \n    288913 \n    2959.8 \n    2959.8 \n    97.6 \n    29.6 \n    9761.1 \n  \n  \n    E09000015 \n    Harrow \n    2020 \n    89000 \n    0.57 \n    Harrow \n    2020 \n    GLA Population Projections \n    261348 \n    5046.3 \n    5046.3 \n    51.8 \n    50.5 \n    5179.0 \n  \n  \n    E09000016 \n    Havering \n    2020 \n    96000 \n    0.60 \n    Havering \n    2020 \n    GLA Population Projections \n    261830 \n    11235.0 \n    11445.7 \n    23.3 \n    112.3 \n    2330.5 \n  \n  \n    E09000017 \n    Hillingdon \n    2020 \n    206000 \n    1.03 \n    Hillingdon \n    2020 \n    GLA Population Projections \n    316253 \n    11570.1 \n    11570.1 \n    27.3 \n    115.7 \n    2733.4 \n  \n  \n    E09000018 \n    Hounslow \n    2020 \n    169000 \n    0.95 \n    Hounslow \n    2020 \n    GLA Population Projections \n    284358 \n    5597.8 \n    5658.5 \n    50.8 \n    56.0 \n    5079.8 \n  \n  \n    E09000019 \n    Islington \n    2020 \n    246000 \n    1.32 \n    Islington \n    2020 \n    GLA Population Projections \n    242827 \n    1485.7 \n    1485.7 \n    163.4 \n    14.9 \n    16344.7 \n  \n  \n    E09000020 \n    Kensington and Chelsea \n    2020 \n    148000 \n    1.41 \n    Kensington and Chelsea \n    2020 \n    GLA Population Projections \n    160794 \n    1212.4 \n    1238.4 \n    132.6 \n    12.1 \n    13262.4 \n  \n  \n    E09000021 \n    Kingston upon Thames \n    2020 \n    89000 \n    0.76 \n    Kingston upon Thames \n    2020 \n    GLA Population Projections \n    182728 \n    3726.1 \n    3726.1 \n    49.0 \n    37.3 \n    4904.0 \n  \n  \n    E09000022 \n    Lambeth \n    2020 \n    174000 \n    0.73 \n    Lambeth \n    2020 \n    GLA Population Projections \n    340324 \n    2681.0 \n    2724.9 \n    126.9 \n    26.8 \n    12693.9 \n  \n  \n    E09000023 \n    Lewisham \n    2020 \n    84000 \n    0.39 \n    Lewisham \n    2020 \n    GLA Population Projections \n    317465 \n    3514.9 \n    3532.0 \n    90.3 \n    35.1 \n    9031.9 \n  \n  \n    E09000024 \n    Merton \n    2020 \n    97000 \n    0.71 \n    Merton \n    2020 \n    GLA Population Projections \n    212658 \n    3762.5 \n    3762.5 \n    56.5 \n    37.6 \n    5652.1 \n  \n  \n    E09000025 \n    Newham \n    2020 \n    136000 \n    0.55 \n    Newham \n    2020 \n    GLA Population Projections \n    363552 \n    3619.8 \n    3857.4 \n    100.4 \n    36.2 \n    10043.3 \n  \n  \n    E09000026 \n    Redbridge \n    2020 \n    90000 \n    0.45 \n    Redbridge \n    2020 \n    GLA Population Projections \n    312264 \n    5641.9 \n    5644.2 \n    55.3 \n    56.4 \n    5534.7 \n  \n  \n    E09000027 \n    Richmond upon Thames \n    2020 \n    100000 \n    0.80 \n    Richmond upon Thames \n    2020 \n    GLA Population Projections \n    201713 \n    5740.7 \n    5876.1 \n    35.1 \n    57.4 \n    3513.7 \n  \n  \n    E09000028 \n    Southwark \n    2020 \n    310000 \n    1.33 \n    Southwark \n    2020 \n    GLA Population Projections \n    330290 \n    2886.2 \n    2991.3 \n    114.4 \n    28.9 \n    11443.8 \n  \n  \n    E09000029 \n    Sutton \n    2020 \n    82000 \n    0.63 \n    Sutton \n    2020 \n    GLA Population Projections \n    211297 \n    4384.7 \n    4384.7 \n    48.2 \n    43.8 \n    4819.0 \n  \n  \n    E09000030 \n    Tower Hamlets \n    2020 \n    320000 \n    1.32 \n    Tower Hamlets \n    2020 \n    GLA Population Projections \n    328043 \n    1978.1 \n    2157.9 \n    165.8 \n    19.8 \n    16583.5 \n  \n  \n    E09000031 \n    Waltham Forest \n    2020 \n    85000 \n    0.46 \n    Waltham Forest \n    2020 \n    GLA Population Projections \n    290024 \n    3880.8 \n    3880.8 \n    74.7 \n    38.8 \n    7473.3 \n  \n  \n    E09000032 \n    Wandsworth \n    2020 \n    146000 \n    0.61 \n    Wandsworth \n    2020 \n    GLA Population Projections \n    332731 \n    3426.4 \n    3522.0 \n    97.1 \n    34.3 \n    9710.8 \n  \n  \n    E09000033 \n    Westminster \n    2020 \n    749000 \n    3.93 \n    Westminster \n    2020 \n    GLA Population Projections \n    259981 \n    2148.7 \n    2203.0 \n    121.0 \n    21.5 \n    12099.5 \n  \n\n\n\n\n\nNext, we are bringing the spatial data – that is the polygons – for London’s Local Authorities. We start by downloading all the polygons for all Local Authorities in the country. Please go to this webpage, download the geojson file and save it to the appropriate data folder within your project directory.\nHowever, we don’t need all the Local Authorities, but instead we only need to ones within London. Therefore we use the filter option to select only the Local Authorities which are included within – this is the %in% operator – the df$id column. Finally, we create a new object which only includes the centroids of these polygons. Why are we doing this? Because we need to calculate distances and accessibility metrics for specific points and we will use these points as representative for each Local Authority.\n\n\n\n\n\n\nTip\n\n\n\nDo you see any problems with this approach?\n\n\n\npath.shape <- paste0(path, \"/data/Local_Authority_Districts_(May_2021)_UK_BFE.geojson\")\n\nlondon <- st_read(path.shape) %>%\n  dplyr::filter(LAD21CD %in% (df$id))\n\nReading layer `LAD_MAY_2021_UK_BFE_V2' from data source \n  `C:\\Users\\nw19521\\OneDrive - University of Bristol\\Bristol\\teaching\\urban_analytics_city_science\\data\\Local_Authority_Districts_(May_2021)_UK_BFE.geojson' \n  using driver `GeoJSON'\nSimple feature collection with 374 features and 9 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -8.649996 ymin: 49.86463 xmax: 1.768937 ymax: 60.86087\nGeodetic CRS:  WGS 84\n\nlondon.centres <- st_centroid(london)\n\nNow we need to actually calculate the distance matrix. We are going to use a real world road network to perform what is known as routing. There is a great discussion about routing and before you move forward I would encourage you to read the relevant section from Lovelace, Nowosad, and Muenchow (2019), which can be found here.\nWe are using the osmr package which can do routing for us. The details of the osrm package can be founf here.\nThe below code creates a distance table between all the london.centres. We are interested in distance measured as time – i.e. duration – by car. The osrm package offers other options too.\n\ndist <- osrmTable(loc = london.centres, \n                  measure = \"duration\",\n                  osrm.profile = \"car\")\n\nThe output of the above is a list with an \\(n*n\\) distance matrix, and a dataframe with the longitude and latitude of the origins and destinations. We are mostly interested in the former, so we start the data wrangling by creating a help dataframe with these distances, or in other words, durations. We then add row and column names using the london.centres names. We can just do that because the matrix follows the same order as the intimal spatial data of Local Authorities. I always like to throw in a dim function just to keep an eye on the dimensions of the objects I create. Indeed, the dist object is a \\(33*33\\) matrix as it should have been.\nThen, we need to convert the \\(n*n\\) matrix to a long format. If you remember, we used to call this format an edge list. There are different way to do this. We can use the ready-made function odmatrix_to_od() from the od package. To see how it works, make sure that the od package is installed and then type the following: od::odmatrix_to_od. This will reveal how the odmatrix_to_od() function works under the hood. As you can see the magic happens by using the following R-base function: as.data.frame(as.table(odmatrix)). Therefore, I just used the below R-base function. You can, of course, use directly the odmatrix_to_od() function.\n\nhelp <- dist$durations \n\n\nrownames(help) <- as.vector(london.centres$LAD21CD)\ncolnames(help) <- as.vector(london.centres$LAD21CD)\n\ndim(dist$durations)\n\n[1] 33 33\n\ndist.df <- as.data.frame(as.table(help)) %>% \n  rename(from_id = Var1,\n         to_id = Var2,\n         travel_time = Freq)\n\nAs before, we calculate the cumulative opportunities for London’s Local Authorities (the centroids to be more accurate) within a cut-off of 20 minutes.\n\nmtc <- cumulative_cutoff(\n  dist.df,\n  df,\n  opportunity = \"number_of_jobs\",\n  travel_cost = \"travel_time\",\n  cutoff = 20\n)\nhead(mtc)\n\n         id number_of_jobs\n1 E09000001        2970000\n2 E09000007        2721000\n3 E09000012        2142000\n4 E09000019        2580000\n5 E09000020        2377000\n6 E09000022        1344000\n\n\nAnd finally, we plot our accessibility map.\n\nlondon <- merge(london, mtc, by.x = \"LAD21CD\", by.y = \"id\" )\n  \n  \nggplot() +\n  geom_sf(data = london, aes(fill = number_of_jobs), color = NA) +\n  labs(\n    title = \"Job accessibility by driving in under 20 min\",\n    fill = \"Accessible jobs\"\n  ) +\n  scale_fill_viridis_c() +\n  theme_void()\n\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nCan you calculate and plot other accessibility metrics for London?\n\n\n\n\n\n\n\n\nTip\n\n\n\nWhat do we miss by focusing on London’ accessibility?"
  },
  {
    "objectID": "src/sim.html",
    "href": "src/sim.html",
    "title": "Spatial interaction modelling",
    "section": "",
    "text": "Some of the materials for this tutorial have been adapted from:\n\nthe Origin-destination data with stplanr manual,\nthe Modelling Population Flows Using Spatial Interaction Models tutorial, and\nOshan (2021)\nLovelace, Nowosad, and Muenchow (2019)\n\n\nlibrary(tidyverse)\nlibrary(geojsonio)\nlibrary(SpatialPosition)\nlibrary(stargazer)\nlibrary(rprojroot)\nlibrary(kableExtra)\nlibrary(sf)\nlibrary(caret)\n\nknitr::opts_chunk$set(include=TRUE, message=FALSE, warning=FALSE)\n\n# This is the project path\npath <- find_rstudio_root_file()"
  },
  {
    "objectID": "src/sim.html#commuting-data-and-networks",
    "href": "src/sim.html#commuting-data-and-networks",
    "title": "Spatial interaction modelling",
    "section": "Commuting data and networks",
    "text": "Commuting data and networks\nThis the same data and the same data preparation we did for the network analysis practical. Please follow the below workflow, which you should already be familiar with. Once the data preperation is done, we will model these commuting flows.\nFor this tutorial we will use travel to work data from the 2011 UK Census. The data is available online, but it requires an academic login. After you log in, download the WU03UK element, save the .csv on your working directory under a /data directory and unzip it. We will use the:\n\nLocation of usual residence and place of work by method of travel to work\n\nfor\n\nCensus Merged local authority districts in England and Wales, Council areas in Scotland, Local government districts in Northern Ireland.\n\nThe below code loads the data.\n\npath.data <- paste0(path, \"/data/wu03uk_v3/wu03uk_v3.csv\")\ncommuting <- read_csv(path.data)\ncommuting\n\n# A tibble: 110,162 × 14\n   Area of…¹ Area …² All c…³ Work …⁴ Under…⁵ Train Bus, …⁶  Taxi Motor…⁷ Drivi…⁸\n   <chr>     <chr>     <dbl>   <dbl>   <dbl> <dbl>   <dbl> <dbl>   <dbl>   <dbl>\n 1 95AA      95AA       9465       0       0    12     243   421      58    5376\n 2 95AA      95BB        107       0       0     0       1     2       0      68\n 3 95AA      95CC         42       0       0     0       1     0       0      29\n 4 95AA      95DD       1485       0       0    11      84    13       8    1111\n 5 95AA      95EE         35       0       0     0       1     0       0      25\n 6 95AA      95FF         18       0       0     0       0     0       0      12\n 7 95AA      95GG       4538       0       0   165     434    14      23    3009\n 8 95AA      95HH        139       0       0     1       1     0       0     113\n 9 95AA      95II        282       0       0     2      15     0       0     219\n10 95AA      95JJ        108       0       0    15       2     0       0      78\n# … with 110,152 more rows, 4 more variables:\n#   `Passenger in a car or van` <dbl>, Bicycle <dbl>, `On foot` <dbl>,\n#   `Other method of travel to work` <dbl>, and abbreviated variable names\n#   ¹​`Area of usual residence`, ²​`Area of workplace`,\n#   ³​`All categories: Method of travel to work`,\n#   ⁴​`Work mainly at or from home`, ⁵​`Underground, metro, light rail, tram`,\n#   ⁶​`Bus, minibus or coach`, ⁷​`Motorcycle, scooter or moped`, …\n\n\nYou might have observe some weird codes (OD0000001, OD0000002, OD0000003 and OD0000004). With some simple Google searching we can find the 2011 Census Origin-Destination Data User Guide, which indicates that these codes do not refer to local authorities:\n\nOD0000001 = Mainly work at or from home\nOD0000002 = Offshore installation\nOD0000003 = No fixed place\nOD0000004 = Outside UK\n\nFor the sake of simplicity we will remove these non-geographical nodes.\nnon.la <- c(\"OD0000001\", \"OD0000002\", \"OD0000003\", \"OD0000004\")\ncommuting <- commuting %>% \n  filter(!`Area of workplace` %in% non.la)\ncheck the %in% operator.\nNow let’s do some clean-up of the commuting data frame. Let’s remind ourselves how the data look like\nWe are keeping the English and Wales local authorities by keeping the observations with a local authority code starting from E (for England) and W (for Wales).\n\ncommuting <- commuting %>% filter(startsWith(`Area of usual residence`, \"E\") |\n                                  startsWith(`Area of usual residence`, \"W\")) %>% \n                           filter(startsWith(`Area of workplace`, \"E\") |\n                                  startsWith(`Area of workplace`, \"W\")) %>% \n  glimpse()\n\nRows: 93,034\nColumns: 14\n$ `Area of usual residence`                  <chr> \"E41000001\", \"E41000001\", \"…\n$ `Area of workplace`                        <chr> \"E41000001\", \"E41000002\", \"…\n$ `All categories: Method of travel to work` <dbl> 20777, 1591, 534, 3865, 433…\n$ `Work mainly at or from home`              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ `Underground, metro, light rail, tram`     <dbl> 6, 1, 0, 1, 0, 0, 0, 0, 0, …\n$ Train                                      <dbl> 26, 32, 0, 49, 11, 0, 0, 0,…\n$ `Bus, minibus or coach`                    <dbl> 1922, 140, 21, 167, 7, 0, 0…\n$ Taxi                                       <dbl> 527, 11, 4, 20, 1, 0, 0, 0,…\n$ `Motorcycle, scooter or moped`             <dbl> 107, 6, 6, 23, 4, 0, 0, 0, …\n$ `Driving a car or van`                     <dbl> 11788, 1225, 448, 3144, 360…\n$ `Passenger in a car or van`                <dbl> 1965, 99, 36, 365, 33, 0, 0…\n$ Bicycle                                    <dbl> 593, 13, 1, 29, 2, 0, 0, 0,…\n$ `On foot`                                  <dbl> 3789, 60, 16, 60, 15, 0, 0,…\n$ `Other method of travel to work`           <dbl> 54, 4, 2, 7, 0, 0, 0, 0, 0,…\n\n\nWe can also see we many rows we dropped with glimpse().\nIt is very important to distinguish between intra- and inter-local authority flows. In network analysis terms, these are the values we find on the diagonal of an adjacency matrix and refer to the commuting flows within a specific local authority or between different ones. For this exercise we are dropping the intra-local authority flows. Although not used here, we also create a new object with the intra-local authority flows.\n\ncommuting.intra <- commuting %>%\n  filter(`Area of usual residence` == `Area of workplace`)\ncommuting <- commuting %>%\n  filter(`Area of usual residence` != `Area of workplace`) %>% \n  glimpse()\n\nRows: 92,688\nColumns: 14\n$ `Area of usual residence`                  <chr> \"E41000001\", \"E41000001\", \"…\n$ `Area of workplace`                        <chr> \"E41000002\", \"E41000003\", \"…\n$ `All categories: Method of travel to work` <dbl> 1591, 534, 3865, 433, 5, 2,…\n$ `Work mainly at or from home`              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ `Underground, metro, light rail, tram`     <dbl> 1, 0, 1, 0, 0, 0, 0, 0, 0, …\n$ Train                                      <dbl> 32, 0, 49, 11, 0, 0, 0, 0, …\n$ `Bus, minibus or coach`                    <dbl> 140, 21, 167, 7, 0, 0, 0, 1…\n$ Taxi                                       <dbl> 11, 4, 20, 1, 0, 0, 0, 0, 0…\n$ `Motorcycle, scooter or moped`             <dbl> 6, 6, 23, 4, 0, 0, 0, 0, 0,…\n$ `Driving a car or van`                     <dbl> 1225, 448, 3144, 360, 5, 2,…\n$ `Passenger in a car or van`                <dbl> 99, 36, 365, 33, 0, 0, 0, 0…\n$ Bicycle                                    <dbl> 13, 1, 29, 2, 0, 0, 0, 0, 0…\n$ `On foot`                                  <dbl> 60, 16, 60, 15, 0, 0, 0, 0,…\n$ `Other method of travel to work`           <dbl> 4, 2, 7, 0, 0, 0, 0, 0, 0, …\n\n\nPlease note the constant use of glimpse() to keep control of how many observations we have and check if we missed anything.\nAlso, take a note of the commuting object, which includes multiple types of commuting flows. Therefore, we will build \\(3\\) different networks:\n\none for all the commuting flows\none only for train flows\none only for bicycle flows.\n\n\ncommuting.all <- commuting %>%\n  select(`Area of usual residence`,\n                `Area of workplace`,\n                `All categories: Method of travel to work`) %>%\n  rename(o = `Area of usual residence`,     # Area of usual residence is annoyingly\n         d = `Area of workplace`,           # long, so I am renaiming theses columns\n         weight = `All categories: Method of travel to work`)\n\n# just FYI this is how you could have achieved the same output using base R\n# instead of dplyr of the tidyverse ecosystem\n# commuting.all <- commuting[,1:3]\n# names(commuting.all)[1] <- \"o\"\n# names(commuting.all)[2] <- \"d\"\n# names(commuting.all)[3] <- \"weight\"\n\ncommuting.train <- commuting %>%\n  select(`Area of usual residence`,\n         `Area of workplace`,\n         `All categories: Method of travel to work`,\n         `Train`) %>%\n  rename(o = `Area of usual residence`,\n         d = `Area of workplace`,\n         weight = `All categories: Method of travel to work`) %>%\n  # The below code drops all the lines with 0 train flows in order to exclude\n  # these edges from the network.\n  filter(Train!=0)\n\ncommuting.bicycle <- commuting %>%\n  select(`Area of usual residence`,\n                `Area of workplace`,\n                `All categories: Method of travel to work`,\n                `Bicycle`) %>%\n  rename(o = `Area of usual residence`,\n         d = `Area of workplace`,\n         weight = `All categories: Method of travel to work`) %>%\n  # The below code drops all the lines with 0 bicycle flows in order to exclude\n  # these edges from the network.\n  filter(Bicycle!=0)\n\nUnless you know the local authority codes by hard, it might be useful to also add the corresponding local authority names. These can be easily obtained from the ONS. The below code directly downloads a GeoJSON file with the local authorities in England and Wales. If you don’t know what a GeoJSON file is, have a look here. Boundary data can also be obtained by UK Data Service.\nFor the time being we are only interested in the local authority names and codes. We will use the spatial object later.\nTip: the below code downloads the GeoJSON file over the web. If you want to run the code multiple times, it might be faster to download the file ones, save it on your hard drive and the point this location to st_read().\n\nla <-st_read(\"https://opendata.arcgis.com/datasets/d54f953d633b45f5a82fdd3c89b4c955_0.geojson\")\nglimpse(la) \n\nla.names <- as.data.frame(la) %>% \n  select(cmlad11cd, cmlad11nm)    # all we need is the LA names and codes"
  },
  {
    "objectID": "src/sim.html#spatial-interaction-modelling",
    "href": "src/sim.html#spatial-interaction-modelling",
    "title": "Spatial interaction modelling",
    "section": "Spatial interaction modelling",
    "text": "Spatial interaction modelling\nLet’s now move to model these flows. If you remember the basic Gravity model is defined as following:\n\\[T_{ij} = k \\displaystyle \\frac{V_i^\\lambda M_j^\\alpha}{D_{ij}^\\beta}\\]\nAnd if we take the logarithms of both sides of the equation we can transform the Gravity model to something which looks like a linear model:\n\\[lnT_{ij} = lnk + \\lambda lnV_i + \\alpha lnM_j - \\beta lnD_{ij}\\]\nThe above transformed equation can be estimated as a linear model if we assume that \\(y = lnT_{ij}\\), \\(c = lnk\\), \\(x_1 = lnV_i\\), \\(a_1 = \\lambda\\) etc. Hence, we can use OLS to estimate the following:\n\\[lnT_{ij} = lnk + \\lambda lnV_i + \\alpha lnM_j - \\beta lnD_{ij} + e_{ij}\\]\nThis is what is known as the log-linear or log-normal transformation.\nThere are a number of issues with such an approach though. Most importantly, our dependent variable is not continuous, but instead a discrete, positive variable (there are no flows of -324.56 people!). Therefore we need to employ an appropriate estimator and this is what the Poisson regression does. Briefly, if we exponentiate both sides, the above equation can be written as:\n\\[T_{ij} = e^{lnk + \\lambda lnV_i + \\alpha lnM_j - \\beta lnD_{ij}}\\] The above is in the form of the Poisson regression. So, we are interested in modelling not the mean \\(T_{ij}\\) drawn from a normally distributed \\(T\\), but, instead, the mean \\(T_{ij}\\), which is the average of the all the flows (i.e. counts) between any \\(i\\) and \\(j\\). For more details about the Poisson regression have a look at Roback and Legler (2021). For this practical we will estimate the commuting flows using both OLS and Poisson regressions.\nBut before we get into the estimation we need to build a data frame, which includes all the necessary variables. These are the origin-destination flows \\(T\\) between \\(i\\) and \\(j\\), the distance \\(dist\\) between \\(i\\) and \\(j\\) and the characteristics \\(V\\) and \\(M\\) of origin \\(i\\) and destinations \\(j\\) that we believe push and pull individuals to commute.\n\n# we use the `SpatialPosition` package and the `CreateDistMatrix()` function to\n# calculate a distance matrix for all local authorities,\nla.d <- CreateDistMatrix(la, la, longlat = T)\n\n# we use as column and row name the local authority codes\nrownames(la.d) <- la$cmlad11cd\ncolnames(la.d) <- la$cmlad11cd\n\n# This is a matrix of the distances between *all* local authorities. We then use\n# the function as.data.frame.table() to convert this matrix to a data frame each\n# line of which represents an origin-destination pair.\nla.d <- as.data.frame.table(la.d, responseName = \"value\")\nglimpse(la.d)\n\nRows: 119,716\nColumns: 3\n$ Var1  <fct> E41000001, E41000002, E41000003, E41000004, E41000005, E41000006…\n$ Var2  <fct> E41000001, E41000001, E41000001, E41000001, E41000001, E41000001…\n$ value <dbl> 0.00, 14370.86, 20185.71, 11427.54, 23175.73, 175329.74, 164912.…\n\n# Please note that the elements of the diagonal are present in this distance matrix.\n\nIf you want to check that the distances we are correct, use google maps to calculate the distance between E41000001 (Middlesbrough) and E41000002 (Hartlepool). Remember that the la.d is expressed in meters.\nWhat is missing here? Do you remember the intra-zone commuting flows? E.g. the commuters that live and work in Bristol? We had removed these from the network analysis and visualisation element. Because we don’t have information about the distances of the intra-zone commutes, we will exclude them from this analysis.\n\nla.d <- la.d %>%\n  filter(Var1 != Var2) %>% \n  glimpse()\n\nRows: 119,370\nColumns: 3\n$ Var1  <fct> E41000002, E41000003, E41000004, E41000005, E41000006, E41000007…\n$ Var2  <fct> E41000001, E41000001, E41000001, E41000001, E41000001, E41000001…\n$ value <dbl> 14370.86, 20185.71, 11427.54, 23175.73, 175329.74, 164912.66, 13…\n\n\nWhat we want to do is to match the data frame with all the distances with the commuting flows data frame. To do that we will (1) create a new data frame for the origin-destination pair and (2) match the two data frames.\n\nla.d <- la.d %>% \n  mutate(ij.code = paste(Var1, Var2, sep = \"_\")) %>% \n  glimpse()\n\nRows: 119,370\nColumns: 4\n$ Var1    <fct> E41000002, E41000003, E41000004, E41000005, E41000006, E410000…\n$ Var2    <fct> E41000001, E41000001, E41000001, E41000001, E41000001, E410000…\n$ value   <dbl> 14370.86, 20185.71, 11427.54, 23175.73, 175329.74, 164912.66, …\n$ ij.code <chr> \"E41000002_E41000001\", \"E41000003_E41000001\", \"E41000004_E4100…\n\ncommuting <- commuting %>% \n  mutate(ij.code = paste(`Area of usual residence`,\n                          `Area of workplace`,\n                           sep = \"_\")) %>% \n  glimpse()\n\nRows: 92,688\nColumns: 15\n$ `Area of usual residence`                  <chr> \"E41000001\", \"E41000001\", \"…\n$ `Area of workplace`                        <chr> \"E41000002\", \"E41000003\", \"…\n$ `All categories: Method of travel to work` <dbl> 1591, 534, 3865, 433, 5, 2,…\n$ `Work mainly at or from home`              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ `Underground, metro, light rail, tram`     <dbl> 1, 0, 1, 0, 0, 0, 0, 0, 0, …\n$ Train                                      <dbl> 32, 0, 49, 11, 0, 0, 0, 0, …\n$ `Bus, minibus or coach`                    <dbl> 140, 21, 167, 7, 0, 0, 0, 1…\n$ Taxi                                       <dbl> 11, 4, 20, 1, 0, 0, 0, 0, 0…\n$ `Motorcycle, scooter or moped`             <dbl> 6, 6, 23, 4, 0, 0, 0, 0, 0,…\n$ `Driving a car or van`                     <dbl> 1225, 448, 3144, 360, 5, 2,…\n$ `Passenger in a car or van`                <dbl> 99, 36, 365, 33, 0, 0, 0, 0…\n$ Bicycle                                    <dbl> 13, 1, 29, 2, 0, 0, 0, 0, 0…\n$ `On foot`                                  <dbl> 60, 16, 60, 15, 0, 0, 0, 0,…\n$ `Other method of travel to work`           <dbl> 4, 2, 7, 0, 0, 0, 0, 0, 0, …\n$ ij.code                                    <chr> \"E41000001_E41000002\", \"E41…\n\n\nBefore we perform the match, keep a note of how many observations both data frames have in order to check if we loose any observations during the matching. As you can see the commuting data frame has less observations than the la.d one, which includes all the possible origin-destination pairs.\nWhat does it mean? That for some origin-destination pairs there are no commuting flows, which of course makes sense. We need to include these pairs with \\(flow = 0\\) in our data though because the lack of commuting flows is not missing data!\n\ncommuting.si <- full_join(la.d, commuting, by = \"ij.code\") %>% \n  glimpse()\n\nRows: 119,370\nColumns: 18\n$ Var1                                       <fct> E41000002, E41000003, E4100…\n$ Var2                                       <fct> E41000001, E41000001, E4100…\n$ value                                      <dbl> 14370.86, 20185.71, 11427.5…\n$ ij.code                                    <chr> \"E41000002_E41000001\", \"E41…\n$ `Area of usual residence`                  <chr> \"E41000002\", \"E41000003\", \"…\n$ `Area of workplace`                        <chr> \"E41000001\", \"E41000001\", \"…\n$ `All categories: Method of travel to work` <dbl> 990, 558, 2590, 266, 1, 4, …\n$ `Work mainly at or from home`              <dbl> 0, 0, 0, 0, 0, 0, 0, NA, 0,…\n$ `Underground, metro, light rail, tram`     <dbl> 0, 1, 0, 0, 0, 0, 0, NA, 0,…\n$ Train                                      <dbl> 6, 3, 25, 2, 0, 0, 0, NA, 1…\n$ `Bus, minibus or coach`                    <dbl> 58, 8, 87, 6, 0, 0, 0, NA, …\n$ Taxi                                       <dbl> 1, 2, 4, 0, 0, 0, 0, NA, 0,…\n$ `Motorcycle, scooter or moped`             <dbl> 2, 1, 12, 0, 0, 0, 0, NA, 0…\n$ `Driving a car or van`                     <dbl> 783, 499, 2259, 244, 1, 4, …\n$ `Passenger in a car or van`                <dbl> 73, 26, 154, 10, 0, 0, 0, N…\n$ Bicycle                                    <dbl> 15, 9, 23, 0, 0, 0, 0, NA, …\n$ `On foot`                                  <dbl> 52, 8, 24, 4, 0, 0, 0, NA, …\n$ `Other method of travel to work`           <dbl> 0, 1, 2, 0, 0, 0, 0, NA, 0,…\n\n# Some variables are repetitive or need name change\ncommuting.si <- commuting.si %>% \n  rename(i = Var1,\n         j = Var2,\n         distance = value) %>% \n  select(-`Area of usual residence`,\n         -`Area of workplace`) %>% \n  glimpse()\n\nRows: 119,370\nColumns: 16\n$ i                                          <fct> E41000002, E41000003, E4100…\n$ j                                          <fct> E41000001, E41000001, E4100…\n$ distance                                   <dbl> 14370.86, 20185.71, 11427.5…\n$ ij.code                                    <chr> \"E41000002_E41000001\", \"E41…\n$ `All categories: Method of travel to work` <dbl> 990, 558, 2590, 266, 1, 4, …\n$ `Work mainly at or from home`              <dbl> 0, 0, 0, 0, 0, 0, 0, NA, 0,…\n$ `Underground, metro, light rail, tram`     <dbl> 0, 1, 0, 0, 0, 0, 0, NA, 0,…\n$ Train                                      <dbl> 6, 3, 25, 2, 0, 0, 0, NA, 1…\n$ `Bus, minibus or coach`                    <dbl> 58, 8, 87, 6, 0, 0, 0, NA, …\n$ Taxi                                       <dbl> 1, 2, 4, 0, 0, 0, 0, NA, 0,…\n$ `Motorcycle, scooter or moped`             <dbl> 2, 1, 12, 0, 0, 0, 0, NA, 0…\n$ `Driving a car or van`                     <dbl> 783, 499, 2259, 244, 1, 4, …\n$ `Passenger in a car or van`                <dbl> 73, 26, 154, 10, 0, 0, 0, N…\n$ Bicycle                                    <dbl> 15, 9, 23, 0, 0, 0, 0, NA, …\n$ `On foot`                                  <dbl> 52, 8, 24, 4, 0, 0, 0, NA, …\n$ `Other method of travel to work`           <dbl> 0, 1, 2, 0, 0, 0, 0, NA, 0,…\n\n# Let's see if we have any missing values\nsapply(commuting.si, function(x) sum(is.na(x)))\n\n                                       i \n                                       0 \n                                       j \n                                       0 \n                                distance \n                                       0 \n                                 ij.code \n                                       0 \nAll categories: Method of travel to work \n                                   26682 \n             Work mainly at or from home \n                                   26682 \n    Underground, metro, light rail, tram \n                                   26682 \n                                   Train \n                                   26682 \n                   Bus, minibus or coach \n                                   26682 \n                                    Taxi \n                                   26682 \n            Motorcycle, scooter or moped \n                                   26682 \n                    Driving a car or van \n                                   26682 \n               Passenger in a car or van \n                                   26682 \n                                 Bicycle \n                                   26682 \n                                 On foot \n                                   26682 \n          Other method of travel to work \n                                   26682 \n\n\nThere are quite a few. What does it mean? That there are no commuting flows for these origin-destination pairs and,therefore, were excluded from the origin commuting data set we downloaded. So, we are going to replace these \\(NAs\\) with \\(0s\\).\n\ncommuting.si <- commuting.si %>% \n  replace(., is.na(.), 0)\n\nNow let’s bring data for some \\(i\\) and \\(j\\) characteristics that we believe that affect commuting. I have prepared such a small data set from the census, which includes resident population and working populations as push and pull variables. These data have been obtained by nomis.\n\ndata.workplace <- read_csv(\"https://www.dropbox.com/s/0ym88p8quwaiyau/data_workplace.csv?dl=1\")\n\n# Dropbox trick: to use in an .Rmd the link that Dropbox provides to share a file\n# replace dl=0 with dl=1 at the end of the link\n\ndata.resident <- read_csv(\"https://www.dropbox.com/s/09d7v5cm6ov3ioz/data_resident.csv?dl=1\")\n\ncommuting.si <- commuting.si %>% \n  left_join(data.resident, by = c('i' = 'Merging.Local.Authority.Code')) %>% \n  left_join(data.workplace, by = c('j' = 'Merging.Local.Authority.Code')) \n\n\n\n\nQuestion are there any redundant columns? Can you remove them?\n\n\n\nBefore we start modelling these flows, let’s plot our variables.\nggplot(commuting.si, aes(x=distance,\n                         y=`All categories: Method of travel to work`)) +\n  geom_point() +\n  geom_smooth(method=lm)\n\n\n\nggplot(commuting.si, aes(x=resident,\n                         y=`All categories: Method of travel to work`)) +\n  geom_point() +\n  geom_smooth(method=lm)\n\n\n\nggplot(commuting.si, aes(x=workplace,\n                         y=`All categories: Method of travel to work`)) +\n  geom_point() +\n  geom_smooth(method=lm)\n\n\n\n\n\n\nQuestion What do you take from these graphs?\n\n\n\nLet’s try now to model these flows. We will start with a simple OLS to estimate the above specifications. Please pay attention to the small trick we did. Because there are non-materialised origin-destination pairs (i.e. with 0 flows), we added a small value (\\(0.5\\)) in the dependent variable. Otherwise we will receive an error as the logarithm of \\(0\\) is not defined.\n\nols.model <- lm(log(`All categories: Method of travel to work`+.5) ~\n                  log(distance) + log(resident) + log(workplace),\n                data = commuting.si)\n\n# To see the model output you can use the summary() function.\nsummary(ols.model)\n\n\nCall:\nlm(formula = log(`All categories: Method of travel to work` + \n    0.5) ~ log(distance) + log(resident) + log(workplace), data = commuting.si)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-4.2623 -0.7149 -0.0430  0.6429  8.6146 \n\nCoefficients:\n                Estimate Std. Error t value Pr(>|t|)    \n(Intercept)     7.961526   0.106137   75.01   <2e-16 ***\nlog(distance)  -1.839355   0.004611 -398.87   <2e-16 ***\nlog(resident)   0.514276   0.005403   95.19   <2e-16 ***\nlog(workplace)  0.852536   0.005186  164.38   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.104 on 115932 degrees of freedom\n  (4816 observations deleted due to missingness)\nMultiple R-squared:  0.6442,    Adjusted R-squared:  0.6442 \nF-statistic: 6.997e+04 on 3 and 115932 DF,  p-value: < 2.2e-16\n\n\nSo, the OLS regression estimated the four parameters:\n\n\\(lnk = 7.971\\)\n\\(\\beta = -1.840\\)\n\\(\\lambda = 0.514\\)\n\\(\\alpha = -0.852\\)\n\nLet’s estimate now our model using a Poisson regression. Given that we don’t take the logarithm of the dependent variable, there is no need to add \\(0.5\\).\n\nglm.model <- glm((`All categories: Method of travel to work`)~\n                   log(distance) + log(resident) + log(workplace),\n                 family = poisson(link = \"log\"), data = commuting.si)\nsummary(glm.model)\n\n\nCall:\nglm(formula = (`All categories: Method of travel to work`) ~ \n    log(distance) + log(resident) + log(workplace), family = poisson(link = \"log\"), \n    data = commuting.si)\n\nDeviance Residuals: \n    Min       1Q   Median       3Q      Max  \n-343.27    -4.94    -3.17    -1.82   346.33  \n\nCoefficients:\n                 Estimate Std. Error z value Pr(>|z|)    \n(Intercept)    11.6302968  0.0091305  1273.8   <2e-16 ***\nlog(distance)  -1.8155761  0.0002800 -6483.1   <2e-16 ***\nlog(resident)   0.3189626  0.0005445   585.8   <2e-16 ***\nlog(workplace)  0.8202729  0.0004197  1954.4   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for poisson family taken to be 1)\n\n    Null deviance: 71855219  on 115935  degrees of freedom\nResidual deviance: 14140526  on 115932  degrees of freedom\n  (4816 observations deleted due to missingness)\nAIC: 14483130\n\nNumber of Fisher Scoring iterations: 6\n\n\nThe following parameter1 have been estimated\n\n\\(lnk = 11.635\\)\n\\(\\beta = -1.816\\)\n\\(\\lambda = 0.319\\)\n\\(\\alpha = 0.820\\)\n\nAs you can see the differences are rather small.\nThe stargazer package I use below creates elegant regression tables. Replace type = \"html\" with type = \"text\" to have be able to read the results using the .Rmd document. the “html” option is useful for when knitting the script to an .html document.\nstargazer(ols.model, glm.model, type = \"html\")\n\n\n\n\n\n\n\n\n\n\nDependent variable:\n\n\n\n\n\n\n\n\n\n\n\n\nlog(All categories: Method of travel to work + 0.5)\n\n\n(All categories: Method of travel to work)\n\n\n\n\n\n\nOLS\n\n\nPoisson\n\n\n\n\n\n\n(1)\n\n\n(2)\n\n\n\n\n\n\n\n\nlog(distance)\n\n\n-1.839***\n\n\n-1.816***\n\n\n\n\n\n\n(0.005)\n\n\n(0.0003)\n\n\n\n\n\n\n\n\n\n\n\n\nlog(resident)\n\n\n0.514***\n\n\n0.319***\n\n\n\n\n\n\n(0.005)\n\n\n(0.001)\n\n\n\n\n\n\n\n\n\n\n\n\nlog(workplace)\n\n\n0.853***\n\n\n0.820***\n\n\n\n\n\n\n(0.005)\n\n\n(0.0004)\n\n\n\n\n\n\n\n\n\n\n\n\nConstant\n\n\n7.962***\n\n\n11.630***\n\n\n\n\n\n\n(0.106)\n\n\n(0.009)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nObservations\n\n\n115,936\n\n\n115,936\n\n\n\n\nR2\n\n\n0.644\n\n\n\n\n\n\nAdjusted R2\n\n\n0.644\n\n\n\n\n\n\nLog Likelihood\n\n\n\n\n-7,241,561.000\n\n\n\n\nAkaike Inf. Crit.\n\n\n\n\n14,483,130.000\n\n\n\n\nResidual Std. Error\n\n\n1.104 (df = 115932)\n\n\n\n\n\n\nF Statistic\n\n\n69,973.050*** (df = 3; 115932)\n\n\n\n\n\n\n\n\n\n\nNote:\n\n\np<0.1; p<0.05; p<0.01\n\n\n\n\n\n\n\nQuestion Can you interpret the regression results?"
  },
  {
    "objectID": "src/sim.html#this-is-not-a-machine-learning-introduction",
    "href": "src/sim.html#this-is-not-a-machine-learning-introduction",
    "title": "Spatial interaction modelling",
    "section": "This is not a Machine Learning introduction…",
    "text": "This is not a Machine Learning introduction…\n… but maybe a sneak preview of the philosophy behind modern data science approaches to answer computational problems. We are using the caret package to:\n\nsplit our data into test and training\ntrain a lm()and a glm() model using the training data set\nuse the estimated models to make out-of-sample predictions using the test data set\nplot the results and the relevant metrics and choose the best model.\n\nThis is obviously an oversimplification, but it provides a good preview of machine learning frameworks.\nIt is worth browsing the caret package.\nThe below will take a few minutes!\ncommuting.si <- commuting.si %>% \n  drop_na() \n\nset.seed(3456)\ntrainIndex <- createDataPartition(commuting.si$`All categories: Method of travel to work`, p = .8, \n                                  list = FALSE, \n                                  times = 1)\ndim(trainIndex)\n[1] 92751 1\ndim(commuting.si)\n[1] 115936 22\ncommuting.si.train <- commuting.si[ trainIndex,]\ncommuting.si.test  <- commuting.si[-trainIndex,]\n\nmodel.lm <- train(`All categories: Method of travel to work` ~\n                    distance + resident + workplace,\n                    data = commuting.si,\n                    method = \"lm\")\n\npredictions.lm <- predict(model.lm, commuting.si.test)\nlm.metrics <- postResample(pred = predictions.lm, obs = commuting.si.test$`All categories: Method of travel to work`) \n\nmodel.glm <- train(`All categories: Method of travel to work` ~\n                    distance + resident + workplace,\n                    data = commuting.si,\n                    method = \"glmnet\",\n                    family = \"poisson\", \n                    na.action = na.omit)\n\npredictions.glm <- predict(model.glm, commuting.si.test)\nglm.metrics <- postResample(pred = predictions.glm, obs = commuting.si.test$`All categories: Method of travel to work`) \nbind_rows(lm.metrics, glm.metrics) %>% \n  mutate(Model = c(\"lm\", \"glm\")) %>% \n  select(Model, Rsquared, RMSE, MAE) %>% \n  kable(digits = 3)\n\n\n\n \n  \n    Model \n    Rsquared \n    RMSE \n    MAE \n  \n \n\n  \n    lm \n    0.067 \n    824.062 \n    214.027 \n  \n  \n    glm \n    0.423 \n    687.778 \n    112.517 \n  \n\n\n\n\n\n\n\nQuestion Which model would you choose?\n\n\n\npredict.lm.plot <- bind_cols(commuting.si.test$`All categories: Method of travel to work`, predictions.lm) %>% \n  rename(y = '...1',\n         y_hat = '...2') %>% \n  ggplot(aes(x=y, y=y_hat)) + geom_point() + ggtitle(\"lm\") + \n  theme(plot.title = element_text(hjust = 0.5))\n\npredict.glm.plot <- bind_cols(commuting.si.test$`All categories: Method of travel to work`, predictions.glm) %>% \n  rename(y = '...1',\n         y_hat = '...2') %>% \n  ggplot(aes(x=y, y=y_hat)) + geom_point() + ggtitle(\"glm\") + \n  theme(plot.title = element_text(hjust = 0.5))\n\nlibrary(patchwork)\npredict.lm.plot + predict.glm.plot"
  },
  {
    "objectID": "src/sim.html#current-research",
    "href": "src/sim.html#current-research",
    "title": "Spatial interaction modelling",
    "section": "Current research",
    "text": "Current research\nAs an introduction, see here some a recent research project we did, which used spatial interaction type of modelling to predict interregional trade flow, which web data (Tranos, Carrascal-Incera, and Willis 2022)."
  },
  {
    "objectID": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-6",
    "href": "src/transport_geography.html#spatial-interactions-and-the-gravity-model-6",
    "title": "Methods in transport geography",
    "section": "Spatial interactions and the gravity model",
    "text": "Spatial interactions and the gravity model\n\\(T_{ij} = k\\frac{V_i^\\lambda W_j^\\alpha}{d_{ij}^\\beta}\\)\n\n\\(\\beta\\): transport friction parameter\n\\(\\lambda\\): Potential to generate movements\n\\(\\alpha\\): Potential to attract movements"
  },
  {
    "objectID": "src/diversity.html#mapping-diversity",
    "href": "src/diversity.html#mapping-diversity",
    "title": "Diversity in cities",
    "section": "Mapping diversity",
    "text": "Mapping diversity\npath.shape <- paste0(path, \"/data/Local_Authority_Districts_(May_2021)_UK_BFE.geojson\")\n\nlondon <- st_read(path.shape, quiet = T) %>%\n  dplyr::filter(LAD21CD %in% (london.firms$oslaua))\n\nlondon <- merge(london, london.firms.sum, by.x = \"LAD21CD\", by.y = \"oslaua\" )\n  \nggplot() +\n  geom_sf(data = london, aes(fill = entropy), color = NA) +\n  labs(\n    title = \"Business diversity in London' Local Autorities\",\n    fill = \"Entropy\") +\n  scale_fill_viridis_c() +\n  theme_void() +\n  theme(plot.title = element_text(hjust = 0.5)) # centres the title"
  }
]